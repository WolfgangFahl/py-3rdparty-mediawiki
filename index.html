
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.30">
    
    
      
        <title>py-3rdparty-mediawiki API Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#py-3rdparty-mediawiki-api-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="py-3rdparty-mediawiki API Documentation" class="md-header__button md-logo" aria-label="py-3rdparty-mediawiki API Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            py-3rdparty-mediawiki API Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="py-3rdparty-mediawiki API Documentation" class="md-nav__button md-logo" aria-label="py-3rdparty-mediawiki API Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    py-3rdparty-mediawiki API Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    API
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd" class="md-nav__link">
    <span class="md-ellipsis">
      wikibot3rd
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.crypt" class="md-nav__link">
    <span class="md-ellipsis">
      crypt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="crypt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.crypt.Crypt" class="md-nav__link">
    <span class="md-ellipsis">
      Crypt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Crypt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.crypt.Crypt.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.crypt.Crypt.decrypt" class="md-nav__link">
    <span class="md-ellipsis">
      decrypt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.crypt.Crypt.encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      encrypt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.crypt.Crypt.getCrypt" class="md-nav__link">
    <span class="md-ellipsis">
      getCrypt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action" class="md-nav__link">
    <span class="md-ellipsis">
      lambda_action
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lambda_action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.Code" class="md-nav__link">
    <span class="md-ellipsis">
      Code
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.Code.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.Code.execute" class="md-nav__link">
    <span class="md-ellipsis">
      execute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.Code.executeTemplate" class="md-nav__link">
    <span class="md-ellipsis">
      executeTemplate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.LambdaAction" class="md-nav__link">
    <span class="md-ellipsis">
      LambdaAction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LambdaAction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.LambdaAction.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.LambdaAction.execute" class="md-nav__link">
    <span class="md-ellipsis">
      execute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.LambdaAction.unescapeHTML" class="md-nav__link">
    <span class="md-ellipsis">
      unescapeHTML
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.mwTable" class="md-nav__link">
    <span class="md-ellipsis">
      mwTable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mwTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.mwTable.MediaWikiTable" class="md-nav__link">
    <span class="md-ellipsis">
      MediaWikiTable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MediaWikiTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.mwTable.MediaWikiTable.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.mwTable.MediaWikiTable.addHeader" class="md-nav__link">
    <span class="md-ellipsis">
      addHeader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.mwTable.MediaWikiTable.asWikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      asWikiMarkup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory" class="md-nav__link">
    <span class="md-ellipsis">
      pagehistory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="pagehistory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory.PageHistory" class="md-nav__link">
    <span class="md-ellipsis">
      PageHistory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PageHistory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory.PageHistory.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory.PageHistory.exists" class="md-nav__link">
    <span class="md-ellipsis">
      exists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory.PageHistory.getFirstUser" class="md-nav__link">
    <span class="md-ellipsis">
      getFirstUser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory.PageRevision" class="md-nav__link">
    <span class="md-ellipsis">
      PageRevision
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.selector" class="md-nav__link">
    <span class="md-ellipsis">
      selector
    </span>
  </a>
  
    <nav class="md-nav" aria-label="selector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector" class="md-nav__link">
    <span class="md-ellipsis">
      Selector
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Selector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.createWindow" class="md-nav__link">
    <span class="md-ellipsis">
      createWindow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.getUpdatedPages" class="md-nav__link">
    <span class="md-ellipsis">
      getUpdatedPages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.quitSelector" class="md-nav__link">
    <span class="md-ellipsis">
      quitSelector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.select" class="md-nav__link">
    <span class="md-ellipsis">
      select
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.select_all" class="md-nav__link">
    <span class="md-ellipsis">
      select_all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.updateCheck" class="md-nav__link">
    <span class="md-ellipsis">
      updateCheck
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.updatePages" class="md-nav__link">
    <span class="md-ellipsis">
      updatePages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.smw" class="md-nav__link">
    <span class="md-ellipsis">
      smw
    </span>
  </a>
  
    <nav class="md-nav" aria-label="smw">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.PrintRequest" class="md-nav__link">
    <span class="md-ellipsis">
      PrintRequest
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PrintRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.PrintRequest.debug" class="md-nav__link">
    <span class="md-ellipsis">
      debug
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.PrintRequest.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.PrintRequest.deserialize" class="md-nav__link">
    <span class="md-ellipsis">
      deserialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.PrintRequest.deserializeSingle" class="md-nav__link">
    <span class="md-ellipsis">
      deserializeSingle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.QueryResultSizeExceedException" class="md-nav__link">
    <span class="md-ellipsis">
      QueryResultSizeExceedException
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryResultSizeExceedException">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.QueryResultSizeExceedException.getResults" class="md-nav__link">
    <span class="md-ellipsis">
      getResults
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW" class="md-nav__link">
    <span class="md-ellipsis">
      SMW
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SMW">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW.deserialize" class="md-nav__link">
    <span class="md-ellipsis">
      deserialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW.fixAsk" class="md-nav__link">
    <span class="md-ellipsis">
      fixAsk
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW.getConcept" class="md-nav__link">
    <span class="md-ellipsis">
      getConcept
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW.getOuterMostArgumentValueOfQuery" class="md-nav__link">
    <span class="md-ellipsis">
      getOuterMostArgumentValueOfQuery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot" class="md-nav__link">
    <span class="md-ellipsis">
      SMWBot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SMWBot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot.info" class="md-nav__link">
    <span class="md-ellipsis">
      info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot.rawquery" class="md-nav__link">
    <span class="md-ellipsis">
      rawquery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot.submit" class="md-nav__link">
    <span class="md-ellipsis">
      submit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient" class="md-nav__link">
    <span class="md-ellipsis">
      SMWClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SMWClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.ask" class="md-nav__link">
    <span class="md-ellipsis">
      ask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.askForAllResults" class="md-nav__link">
    <span class="md-ellipsis">
      askForAllResults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.askPartitionQuery" class="md-nav__link">
    <span class="md-ellipsis">
      askPartitionQuery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.getBoundariesOfQuery" class="md-nav__link">
    <span class="md-ellipsis">
      getBoundariesOfQuery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.getTimeStampBoundary" class="md-nav__link">
    <span class="md-ellipsis">
      getTimeStampBoundary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.info" class="md-nav__link">
    <span class="md-ellipsis">
      info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.rawquery" class="md-nav__link">
    <span class="md-ellipsis">
      rawquery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SplitClause" class="md-nav__link">
    <span class="md-ellipsis">
      SplitClause
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SplitClause">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SplitClause.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SplitClause.deserialize" class="md-nav__link">
    <span class="md-ellipsis">
      deserialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SplitClause.getFirst" class="md-nav__link">
    <span class="md-ellipsis">
      getFirst
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SplitClause.queryBounds" class="md-nav__link">
    <span class="md-ellipsis">
      queryBounds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.sso" class="md-nav__link">
    <span class="md-ellipsis">
      sso
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sso">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO" class="md-nav__link">
    <span class="md-ellipsis">
      SSO
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.check_credentials" class="md-nav__link">
    <span class="md-ellipsis">
      check_credentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.check_port" class="md-nav__link">
    <span class="md-ellipsis">
      check_port
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.fetch_user_data_from_database" class="md-nav__link">
    <span class="md-ellipsis">
      fetch_user_data_from_database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.get_pool" class="md-nav__link">
    <span class="md-ellipsis">
      get_pool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.get_user" class="md-nav__link">
    <span class="md-ellipsis">
      get_user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.verify_password" class="md-nav__link">
    <span class="md-ellipsis">
      verify_password
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.User" class="md-nav__link">
    <span class="md-ellipsis">
      User
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.version.Version" class="md-nav__link">
    <span class="md-ellipsis">
      Version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wiki" class="md-nav__link">
    <span class="md-ellipsis">
      wiki
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wiki">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wiki.Wiki" class="md-nav__link">
    <span class="md-ellipsis">
      Wiki
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wiki">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wiki.Wiki.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wiki.Wiki.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiaction" class="md-nav__link">
    <span class="md-ellipsis">
      wikiaction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikiaction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiaction.WikiAction" class="md-nav__link">
    <span class="md-ellipsis">
      WikiAction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiAction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiaction.WikiAction.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiaction.WikiAction.getLambdaAction" class="md-nav__link">
    <span class="md-ellipsis">
      getLambdaAction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikibackup" class="md-nav__link">
    <span class="md-ellipsis">
      wikibackup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot" class="md-nav__link">
    <span class="md-ellipsis">
      wikibot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikibot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot" class="md-nav__link">
    <span class="md-ellipsis">
      WikiBot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiBot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.checkFamily" class="md-nav__link">
    <span class="md-ellipsis">
      checkFamily
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.getHtml" class="md-nav__link">
    <span class="md-ellipsis">
      getHtml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.getPage" class="md-nav__link">
    <span class="md-ellipsis">
      getPage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.getWikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiMarkup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.register_family_file" class="md-nav__link">
    <span class="md-ellipsis">
      register_family_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.savePage" class="md-nav__link">
    <span class="md-ellipsis">
      savePage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient" class="md-nav__link">
    <span class="md-ellipsis">
      wikiclient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikiclient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient" class="md-nav__link">
    <span class="md-ellipsis">
      WikiClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getClients" class="md-nav__link">
    <span class="md-ellipsis">
      getClients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getHtml" class="md-nav__link">
    <span class="md-ellipsis">
      getHtml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getPage" class="md-nav__link">
    <span class="md-ellipsis">
      getPage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getSite" class="md-nav__link">
    <span class="md-ellipsis">
      getSite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getSiteStatistics" class="md-nav__link">
    <span class="md-ellipsis">
      getSiteStatistics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getWikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiMarkup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_clients" class="md-nav__link">
    <span class="md-ellipsis">
      get_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_html" class="md-nav__link">
    <span class="md-ellipsis">
      get_html
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_page" class="md-nav__link">
    <span class="md-ellipsis">
      get_page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_site" class="md-nav__link">
    <span class="md-ellipsis">
      get_site
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_site_statistics" class="md-nav__link">
    <span class="md-ellipsis">
      get_site_statistics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_wiki_markup" class="md-nav__link">
    <span class="md-ellipsis">
      get_wiki_markup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.login" class="md-nav__link">
    <span class="md-ellipsis">
      login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.needsLogin" class="md-nav__link">
    <span class="md-ellipsis">
      needsLogin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.needs_login" class="md-nav__link">
    <span class="md-ellipsis">
      needs_login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.ofWikiId" class="md-nav__link">
    <span class="md-ellipsis">
      ofWikiId
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.ofWikiUser" class="md-nav__link">
    <span class="md-ellipsis">
      ofWikiUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.of_wiki_id" class="md-nav__link">
    <span class="md-ellipsis">
      of_wiki_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.of_wiki_user" class="md-nav__link">
    <span class="md-ellipsis">
      of_wiki_user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.savePage" class="md-nav__link">
    <span class="md-ellipsis">
      savePage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.save_page" class="md-nav__link">
    <span class="md-ellipsis">
      save_page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.try_login" class="md-nav__link">
    <span class="md-ellipsis">
      try_login
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiedit" class="md-nav__link">
    <span class="md-ellipsis">
      wikiedit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikinuke" class="md-nav__link">
    <span class="md-ellipsis">
      wikinuke
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush" class="md-nav__link">
    <span class="md-ellipsis">
      wikipush
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikipush">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush" class="md-nav__link">
    <span class="md-ellipsis">
      WikiPush
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiPush">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.backup" class="md-nav__link">
    <span class="md-ellipsis">
      backup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.backupImages" class="md-nav__link">
    <span class="md-ellipsis">
      backupImages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.convertToCSV" class="md-nav__link">
    <span class="md-ellipsis">
      convertToCSV
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.downloadImage" class="md-nav__link">
    <span class="md-ellipsis">
      downloadImage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.edit" class="md-nav__link">
    <span class="md-ellipsis">
      edit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.edit_page_content" class="md-nav__link">
    <span class="md-ellipsis">
      edit_page_content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.edit_wikison" class="md-nav__link">
    <span class="md-ellipsis">
      edit_wikison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.ensureDirectoryExists" class="md-nav__link">
    <span class="md-ellipsis">
      ensureDirectoryExists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.ensureParentDirectoryExists" class="md-nav__link">
    <span class="md-ellipsis">
      ensureParentDirectoryExists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.extract_category_and_mainlabel" class="md-nav__link">
    <span class="md-ellipsis">
      extract_category_and_mainlabel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.extract_template_records" class="md-nav__link">
    <span class="md-ellipsis">
      extract_template_records
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.formatQueryResult" class="md-nav__link">
    <span class="md-ellipsis">
      formatQueryResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.getDiff" class="md-nav__link">
    <span class="md-ellipsis">
      getDiff
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.getDownloadPath" class="md-nav__link">
    <span class="md-ellipsis">
      getDownloadPath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.getHomePath" class="md-nav__link">
    <span class="md-ellipsis">
      getHomePath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.getModify" class="md-nav__link">
    <span class="md-ellipsis">
      getModify
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.handleAPIWarnings" class="md-nav__link">
    <span class="md-ellipsis">
      handleAPIWarnings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.handleException" class="md-nav__link">
    <span class="md-ellipsis">
      handleException
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.handleWarning" class="md-nav__link">
    <span class="md-ellipsis">
      handleWarning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.log" class="md-nav__link">
    <span class="md-ellipsis">
      log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.nuke" class="md-nav__link">
    <span class="md-ellipsis">
      nuke
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.push" class="md-nav__link">
    <span class="md-ellipsis">
      push
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.pushImages" class="md-nav__link">
    <span class="md-ellipsis">
      pushImages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.queryPages" class="md-nav__link">
    <span class="md-ellipsis">
      queryPages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.restore" class="md-nav__link">
    <span class="md-ellipsis">
      restore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.show_exception" class="md-nav__link">
    <span class="md-ellipsis">
      show_exception
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.upload" class="md-nav__link">
    <span class="md-ellipsis">
      upload
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.uploadImage" class="md-nav__link">
    <span class="md-ellipsis">
      uploadImage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.work" class="md-nav__link">
    <span class="md-ellipsis">
      work
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiquery" class="md-nav__link">
    <span class="md-ellipsis">
      wikiquery
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikirestore" class="md-nav__link">
    <span class="md-ellipsis">
      wikirestore
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext" class="md-nav__link">
    <span class="md-ellipsis">
      wikitext
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikitext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      WikiMarkup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiMarkup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.parsed_wiki_markup" class="md-nav__link">
    <span class="md-ellipsis">
      parsed_wiki_markup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.wiki_markup" class="md-nav__link">
    <span class="md-ellipsis">
      wiki_markup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.add_template" class="md-nav__link">
    <span class="md-ellipsis">
      add_template
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.extract_template" class="md-nav__link">
    <span class="md-ellipsis">
      extract_template
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.update_template" class="md-nav__link">
    <span class="md-ellipsis">
      update_template
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiSON" class="md-nav__link">
    <span class="md-ellipsis">
      WikiSON
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiSON">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiSON.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiSON.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiSON.set" class="md-nav__link">
    <span class="md-ellipsis">
      set
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiupload" class="md-nav__link">
    <span class="md-ellipsis">
      wikiupload
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser" class="md-nav__link">
    <span class="md-ellipsis">
      wikiuser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikiuser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials" class="md-nav__link">
    <span class="md-ellipsis">
      WikiCredentials
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiCredentials">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials.encrypted" class="md-nav__link">
    <span class="md-ellipsis">
      encrypted
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials.decrypt" class="md-nav__link">
    <span class="md-ellipsis">
      decrypt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials.encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      encrypt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials.get_password" class="md-nav__link">
    <span class="md-ellipsis">
      get_password
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser" class="md-nav__link">
    <span class="md-ellipsis">
      WikiUser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiUser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.ask_password" class="md-nav__link">
    <span class="md-ellipsis">
      ask_password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.getIniPath" class="md-nav__link">
    <span class="md-ellipsis">
      getIniPath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.getInteractiveFields" class="md-nav__link">
    <span class="md-ellipsis">
      getInteractiveFields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.getWikiUrl" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiUrl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.getWikiUsers" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiUsers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.get_wiki_url" class="md-nav__link">
    <span class="md-ellipsis">
      get_wiki_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.iniFilePath" class="md-nav__link">
    <span class="md-ellipsis">
      iniFilePath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.interactiveSave" class="md-nav__link">
    <span class="md-ellipsis">
      interactiveSave
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.ofDict" class="md-nav__link">
    <span class="md-ellipsis">
      ofDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.ofWikiId" class="md-nav__link">
    <span class="md-ellipsis">
      ofWikiId
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.readPropertyFile" class="md-nav__link">
    <span class="md-ellipsis">
      readPropertyFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.save" class="md-nav__link">
    <span class="md-ellipsis">
      save
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUserData" class="md-nav__link">
    <span class="md-ellipsis">
      WikiUserData
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser_cmd" class="md-nav__link">
    <span class="md-ellipsis">
      wikiuser_cmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikiuser_cmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser_cmd.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd" class="md-nav__link">
    <span class="md-ellipsis">
      wikibot3rd
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.crypt" class="md-nav__link">
    <span class="md-ellipsis">
      crypt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="crypt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.crypt.Crypt" class="md-nav__link">
    <span class="md-ellipsis">
      Crypt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Crypt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.crypt.Crypt.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.crypt.Crypt.decrypt" class="md-nav__link">
    <span class="md-ellipsis">
      decrypt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.crypt.Crypt.encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      encrypt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.crypt.Crypt.getCrypt" class="md-nav__link">
    <span class="md-ellipsis">
      getCrypt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action" class="md-nav__link">
    <span class="md-ellipsis">
      lambda_action
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lambda_action">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.Code" class="md-nav__link">
    <span class="md-ellipsis">
      Code
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Code">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.Code.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.Code.execute" class="md-nav__link">
    <span class="md-ellipsis">
      execute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.Code.executeTemplate" class="md-nav__link">
    <span class="md-ellipsis">
      executeTemplate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.LambdaAction" class="md-nav__link">
    <span class="md-ellipsis">
      LambdaAction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LambdaAction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.LambdaAction.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.LambdaAction.execute" class="md-nav__link">
    <span class="md-ellipsis">
      execute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.lambda_action.LambdaAction.unescapeHTML" class="md-nav__link">
    <span class="md-ellipsis">
      unescapeHTML
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.mwTable" class="md-nav__link">
    <span class="md-ellipsis">
      mwTable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mwTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.mwTable.MediaWikiTable" class="md-nav__link">
    <span class="md-ellipsis">
      MediaWikiTable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MediaWikiTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.mwTable.MediaWikiTable.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.mwTable.MediaWikiTable.addHeader" class="md-nav__link">
    <span class="md-ellipsis">
      addHeader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.mwTable.MediaWikiTable.asWikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      asWikiMarkup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory" class="md-nav__link">
    <span class="md-ellipsis">
      pagehistory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="pagehistory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory.PageHistory" class="md-nav__link">
    <span class="md-ellipsis">
      PageHistory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PageHistory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory.PageHistory.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory.PageHistory.exists" class="md-nav__link">
    <span class="md-ellipsis">
      exists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory.PageHistory.getFirstUser" class="md-nav__link">
    <span class="md-ellipsis">
      getFirstUser
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.pagehistory.PageRevision" class="md-nav__link">
    <span class="md-ellipsis">
      PageRevision
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.selector" class="md-nav__link">
    <span class="md-ellipsis">
      selector
    </span>
  </a>
  
    <nav class="md-nav" aria-label="selector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector" class="md-nav__link">
    <span class="md-ellipsis">
      Selector
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Selector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.createWindow" class="md-nav__link">
    <span class="md-ellipsis">
      createWindow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.getUpdatedPages" class="md-nav__link">
    <span class="md-ellipsis">
      getUpdatedPages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.quitSelector" class="md-nav__link">
    <span class="md-ellipsis">
      quitSelector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.select" class="md-nav__link">
    <span class="md-ellipsis">
      select
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.select_all" class="md-nav__link">
    <span class="md-ellipsis">
      select_all
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.updateCheck" class="md-nav__link">
    <span class="md-ellipsis">
      updateCheck
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.selector.Selector.updatePages" class="md-nav__link">
    <span class="md-ellipsis">
      updatePages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.smw" class="md-nav__link">
    <span class="md-ellipsis">
      smw
    </span>
  </a>
  
    <nav class="md-nav" aria-label="smw">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.PrintRequest" class="md-nav__link">
    <span class="md-ellipsis">
      PrintRequest
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PrintRequest">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.PrintRequest.debug" class="md-nav__link">
    <span class="md-ellipsis">
      debug
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.PrintRequest.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.PrintRequest.deserialize" class="md-nav__link">
    <span class="md-ellipsis">
      deserialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.PrintRequest.deserializeSingle" class="md-nav__link">
    <span class="md-ellipsis">
      deserializeSingle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.QueryResultSizeExceedException" class="md-nav__link">
    <span class="md-ellipsis">
      QueryResultSizeExceedException
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryResultSizeExceedException">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.QueryResultSizeExceedException.getResults" class="md-nav__link">
    <span class="md-ellipsis">
      getResults
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW" class="md-nav__link">
    <span class="md-ellipsis">
      SMW
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SMW">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW.deserialize" class="md-nav__link">
    <span class="md-ellipsis">
      deserialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW.fixAsk" class="md-nav__link">
    <span class="md-ellipsis">
      fixAsk
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW.getConcept" class="md-nav__link">
    <span class="md-ellipsis">
      getConcept
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMW.getOuterMostArgumentValueOfQuery" class="md-nav__link">
    <span class="md-ellipsis">
      getOuterMostArgumentValueOfQuery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot" class="md-nav__link">
    <span class="md-ellipsis">
      SMWBot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SMWBot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot.info" class="md-nav__link">
    <span class="md-ellipsis">
      info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot.rawquery" class="md-nav__link">
    <span class="md-ellipsis">
      rawquery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWBot.submit" class="md-nav__link">
    <span class="md-ellipsis">
      submit
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient" class="md-nav__link">
    <span class="md-ellipsis">
      SMWClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SMWClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.ask" class="md-nav__link">
    <span class="md-ellipsis">
      ask
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.askForAllResults" class="md-nav__link">
    <span class="md-ellipsis">
      askForAllResults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.askPartitionQuery" class="md-nav__link">
    <span class="md-ellipsis">
      askPartitionQuery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.getBoundariesOfQuery" class="md-nav__link">
    <span class="md-ellipsis">
      getBoundariesOfQuery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.getTimeStampBoundary" class="md-nav__link">
    <span class="md-ellipsis">
      getTimeStampBoundary
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.info" class="md-nav__link">
    <span class="md-ellipsis">
      info
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SMWClient.rawquery" class="md-nav__link">
    <span class="md-ellipsis">
      rawquery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SplitClause" class="md-nav__link">
    <span class="md-ellipsis">
      SplitClause
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SplitClause">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SplitClause.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SplitClause.deserialize" class="md-nav__link">
    <span class="md-ellipsis">
      deserialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SplitClause.getFirst" class="md-nav__link">
    <span class="md-ellipsis">
      getFirst
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.smw.SplitClause.queryBounds" class="md-nav__link">
    <span class="md-ellipsis">
      queryBounds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.sso" class="md-nav__link">
    <span class="md-ellipsis">
      sso
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sso">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO" class="md-nav__link">
    <span class="md-ellipsis">
      SSO
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.check_credentials" class="md-nav__link">
    <span class="md-ellipsis">
      check_credentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.check_port" class="md-nav__link">
    <span class="md-ellipsis">
      check_port
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.fetch_user_data_from_database" class="md-nav__link">
    <span class="md-ellipsis">
      fetch_user_data_from_database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.get_pool" class="md-nav__link">
    <span class="md-ellipsis">
      get_pool
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.get_user" class="md-nav__link">
    <span class="md-ellipsis">
      get_user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.SSO.verify_password" class="md-nav__link">
    <span class="md-ellipsis">
      verify_password
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.sso.User" class="md-nav__link">
    <span class="md-ellipsis">
      User
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.version.Version" class="md-nav__link">
    <span class="md-ellipsis">
      Version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wiki" class="md-nav__link">
    <span class="md-ellipsis">
      wiki
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wiki">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wiki.Wiki" class="md-nav__link">
    <span class="md-ellipsis">
      Wiki
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Wiki">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wiki.Wiki.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wiki.Wiki.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiaction" class="md-nav__link">
    <span class="md-ellipsis">
      wikiaction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikiaction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiaction.WikiAction" class="md-nav__link">
    <span class="md-ellipsis">
      WikiAction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiAction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiaction.WikiAction.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiaction.WikiAction.getLambdaAction" class="md-nav__link">
    <span class="md-ellipsis">
      getLambdaAction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikibackup" class="md-nav__link">
    <span class="md-ellipsis">
      wikibackup
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot" class="md-nav__link">
    <span class="md-ellipsis">
      wikibot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikibot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot" class="md-nav__link">
    <span class="md-ellipsis">
      WikiBot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiBot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.checkFamily" class="md-nav__link">
    <span class="md-ellipsis">
      checkFamily
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.getHtml" class="md-nav__link">
    <span class="md-ellipsis">
      getHtml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.getPage" class="md-nav__link">
    <span class="md-ellipsis">
      getPage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.getWikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiMarkup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.register_family_file" class="md-nav__link">
    <span class="md-ellipsis">
      register_family_file
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikibot.WikiBot.savePage" class="md-nav__link">
    <span class="md-ellipsis">
      savePage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient" class="md-nav__link">
    <span class="md-ellipsis">
      wikiclient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikiclient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient" class="md-nav__link">
    <span class="md-ellipsis">
      WikiClient
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiClient">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getClients" class="md-nav__link">
    <span class="md-ellipsis">
      getClients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getHtml" class="md-nav__link">
    <span class="md-ellipsis">
      getHtml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getPage" class="md-nav__link">
    <span class="md-ellipsis">
      getPage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getSite" class="md-nav__link">
    <span class="md-ellipsis">
      getSite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getSiteStatistics" class="md-nav__link">
    <span class="md-ellipsis">
      getSiteStatistics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.getWikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiMarkup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_clients" class="md-nav__link">
    <span class="md-ellipsis">
      get_clients
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_html" class="md-nav__link">
    <span class="md-ellipsis">
      get_html
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_page" class="md-nav__link">
    <span class="md-ellipsis">
      get_page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_site" class="md-nav__link">
    <span class="md-ellipsis">
      get_site
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_site_statistics" class="md-nav__link">
    <span class="md-ellipsis">
      get_site_statistics
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.get_wiki_markup" class="md-nav__link">
    <span class="md-ellipsis">
      get_wiki_markup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.login" class="md-nav__link">
    <span class="md-ellipsis">
      login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.needsLogin" class="md-nav__link">
    <span class="md-ellipsis">
      needsLogin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.needs_login" class="md-nav__link">
    <span class="md-ellipsis">
      needs_login
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.ofWikiId" class="md-nav__link">
    <span class="md-ellipsis">
      ofWikiId
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.ofWikiUser" class="md-nav__link">
    <span class="md-ellipsis">
      ofWikiUser
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.of_wiki_id" class="md-nav__link">
    <span class="md-ellipsis">
      of_wiki_id
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.of_wiki_user" class="md-nav__link">
    <span class="md-ellipsis">
      of_wiki_user
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.savePage" class="md-nav__link">
    <span class="md-ellipsis">
      savePage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.save_page" class="md-nav__link">
    <span class="md-ellipsis">
      save_page
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiclient.WikiClient.try_login" class="md-nav__link">
    <span class="md-ellipsis">
      try_login
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiedit" class="md-nav__link">
    <span class="md-ellipsis">
      wikiedit
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikinuke" class="md-nav__link">
    <span class="md-ellipsis">
      wikinuke
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush" class="md-nav__link">
    <span class="md-ellipsis">
      wikipush
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikipush">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush" class="md-nav__link">
    <span class="md-ellipsis">
      WikiPush
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiPush">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.backup" class="md-nav__link">
    <span class="md-ellipsis">
      backup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.backupImages" class="md-nav__link">
    <span class="md-ellipsis">
      backupImages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.convertToCSV" class="md-nav__link">
    <span class="md-ellipsis">
      convertToCSV
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.downloadImage" class="md-nav__link">
    <span class="md-ellipsis">
      downloadImage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.edit" class="md-nav__link">
    <span class="md-ellipsis">
      edit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.edit_page_content" class="md-nav__link">
    <span class="md-ellipsis">
      edit_page_content
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.edit_wikison" class="md-nav__link">
    <span class="md-ellipsis">
      edit_wikison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.ensureDirectoryExists" class="md-nav__link">
    <span class="md-ellipsis">
      ensureDirectoryExists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.ensureParentDirectoryExists" class="md-nav__link">
    <span class="md-ellipsis">
      ensureParentDirectoryExists
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.extract_category_and_mainlabel" class="md-nav__link">
    <span class="md-ellipsis">
      extract_category_and_mainlabel
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.extract_template_records" class="md-nav__link">
    <span class="md-ellipsis">
      extract_template_records
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.formatQueryResult" class="md-nav__link">
    <span class="md-ellipsis">
      formatQueryResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.getDiff" class="md-nav__link">
    <span class="md-ellipsis">
      getDiff
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.getDownloadPath" class="md-nav__link">
    <span class="md-ellipsis">
      getDownloadPath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.getHomePath" class="md-nav__link">
    <span class="md-ellipsis">
      getHomePath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.getModify" class="md-nav__link">
    <span class="md-ellipsis">
      getModify
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.handleAPIWarnings" class="md-nav__link">
    <span class="md-ellipsis">
      handleAPIWarnings
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.handleException" class="md-nav__link">
    <span class="md-ellipsis">
      handleException
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.handleWarning" class="md-nav__link">
    <span class="md-ellipsis">
      handleWarning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.log" class="md-nav__link">
    <span class="md-ellipsis">
      log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.nuke" class="md-nav__link">
    <span class="md-ellipsis">
      nuke
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.push" class="md-nav__link">
    <span class="md-ellipsis">
      push
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.pushImages" class="md-nav__link">
    <span class="md-ellipsis">
      pushImages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.queryPages" class="md-nav__link">
    <span class="md-ellipsis">
      queryPages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.restore" class="md-nav__link">
    <span class="md-ellipsis">
      restore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.show_exception" class="md-nav__link">
    <span class="md-ellipsis">
      show_exception
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.upload" class="md-nav__link">
    <span class="md-ellipsis">
      upload
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.uploadImage" class="md-nav__link">
    <span class="md-ellipsis">
      uploadImage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.WikiPush.work" class="md-nav__link">
    <span class="md-ellipsis">
      work
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikipush.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiquery" class="md-nav__link">
    <span class="md-ellipsis">
      wikiquery
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikirestore" class="md-nav__link">
    <span class="md-ellipsis">
      wikirestore
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext" class="md-nav__link">
    <span class="md-ellipsis">
      wikitext
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikitext">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      WikiMarkup
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiMarkup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.parsed_wiki_markup" class="md-nav__link">
    <span class="md-ellipsis">
      parsed_wiki_markup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.wiki_markup" class="md-nav__link">
    <span class="md-ellipsis">
      wiki_markup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.add_template" class="md-nav__link">
    <span class="md-ellipsis">
      add_template
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.extract_template" class="md-nav__link">
    <span class="md-ellipsis">
      extract_template
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiMarkup.update_template" class="md-nav__link">
    <span class="md-ellipsis">
      update_template
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiSON" class="md-nav__link">
    <span class="md-ellipsis">
      WikiSON
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiSON">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiSON.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiSON.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikitext.WikiSON.set" class="md-nav__link">
    <span class="md-ellipsis">
      set
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiupload" class="md-nav__link">
    <span class="md-ellipsis">
      wikiupload
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser" class="md-nav__link">
    <span class="md-ellipsis">
      wikiuser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikiuser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials" class="md-nav__link">
    <span class="md-ellipsis">
      WikiCredentials
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiCredentials">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials.encrypted" class="md-nav__link">
    <span class="md-ellipsis">
      encrypted
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials.decrypt" class="md-nav__link">
    <span class="md-ellipsis">
      decrypt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials.encrypt" class="md-nav__link">
    <span class="md-ellipsis">
      encrypt
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiCredentials.get_password" class="md-nav__link">
    <span class="md-ellipsis">
      get_password
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser" class="md-nav__link">
    <span class="md-ellipsis">
      WikiUser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="WikiUser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.ask_password" class="md-nav__link">
    <span class="md-ellipsis">
      ask_password
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.getIniPath" class="md-nav__link">
    <span class="md-ellipsis">
      getIniPath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.getInteractiveFields" class="md-nav__link">
    <span class="md-ellipsis">
      getInteractiveFields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.getWikiUrl" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiUrl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.getWikiUsers" class="md-nav__link">
    <span class="md-ellipsis">
      getWikiUsers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.get_wiki_url" class="md-nav__link">
    <span class="md-ellipsis">
      get_wiki_url
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.iniFilePath" class="md-nav__link">
    <span class="md-ellipsis">
      iniFilePath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.interactiveSave" class="md-nav__link">
    <span class="md-ellipsis">
      interactiveSave
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.ofDict" class="md-nav__link">
    <span class="md-ellipsis">
      ofDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.ofWikiId" class="md-nav__link">
    <span class="md-ellipsis">
      ofWikiId
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.readPropertyFile" class="md-nav__link">
    <span class="md-ellipsis">
      readPropertyFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUser.save" class="md-nav__link">
    <span class="md-ellipsis">
      save
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser.WikiUserData" class="md-nav__link">
    <span class="md-ellipsis">
      WikiUserData
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser_cmd" class="md-nav__link">
    <span class="md-ellipsis">
      wikiuser_cmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="wikiuser_cmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wikibot3rd.wikiuser_cmd.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="py-3rdparty-mediawiki-api-documentation">py-3rdparty-mediawiki API Documentation</h1>


<div class="doc doc-object doc-module">



<a id="wikibot3rd"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.crypt" class="doc doc-heading">
            <code>crypt</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 25.03.2020</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.crypt.Crypt" class="doc doc-heading">
            <code>Crypt</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


      <p>Python implementation of PBEWithMD5AndDES
see
https://github.com/binsgit/PBEWithMD5AndDES
and
https://gist.github.com/rohitshampur/da5f79c34260150aafc1</p>
<p>converted to class</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/crypt.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Crypt</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Python implementation of PBEWithMD5AndDES</span>
<span class="sd">    see</span>
<span class="sd">    https://github.com/binsgit/PBEWithMD5AndDES</span>
<span class="sd">    and</span>
<span class="sd">    https://gist.github.com/rohitshampur/da5f79c34260150aafc1</span>

<span class="sd">    converted to class&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cypher</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">salt</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;construct me with the given cypher iterations and salt&quot;&quot;&quot;</span>
        <span class="c1"># avoid annoying</span>
        <span class="c1">#  /opt/local/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/site-packages/Crypto/Cipher/blockalgo.py:141: DeprecationWarning: PY_SSIZE_T_CLEAN will be required for &#39;#&#39; formats</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">DeprecationWarning</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cypher</span> <span class="o">=</span> <span class="n">cypher</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">=</span> <span class="n">iterations</span>
        <span class="k">if</span> <span class="n">salt</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">salt</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">urandom</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">salt</span> <span class="o">=</span> <span class="n">salt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getRandomString</span><span class="p">(</span><span class="n">rlen</span><span class="o">=</span><span class="mi">32</span><span class="p">):</span>
        <span class="c1"># https://docs.python.org/3/library/secrets.html</span>
        <span class="n">alphabet</span> <span class="o">=</span> <span class="n">string</span><span class="o">.</span><span class="n">ascii_letters</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">digits</span>
        <span class="n">rstring</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">secrets</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">alphabet</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rlen</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">rstring</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getRandomCrypt</span><span class="p">(</span><span class="n">cypherLen</span><span class="o">=</span><span class="mi">32</span><span class="p">):</span>
        <span class="n">cypher</span> <span class="o">=</span> <span class="n">Crypt</span><span class="o">.</span><span class="n">getRandomString</span><span class="p">(</span><span class="n">cypherLen</span><span class="p">)</span>
        <span class="n">salt</span> <span class="o">=</span> <span class="n">Crypt</span><span class="o">.</span><span class="n">getRandomString</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
        <span class="n">crypt</span> <span class="o">=</span> <span class="n">Crypt</span><span class="p">(</span><span class="n">cypher</span><span class="p">,</span> <span class="n">salt</span><span class="o">=</span><span class="n">salt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">crypt</span>

    <span class="k">def</span> <span class="nf">getCrypt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get my DES crypt</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hasher</span> <span class="o">=</span> <span class="n">MD5</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
        <span class="n">hasher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cypher</span><span class="p">)</span>
        <span class="n">hasher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">salt</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">hasher</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

        <span class="c1"># iterate over hashes</span>
        <span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span><span class="p">):</span>
            <span class="n">hasher</span> <span class="o">=</span> <span class="n">MD5</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
            <span class="n">hasher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">hasher</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">result</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span>
        <span class="c1"># initialization vector</span>
        <span class="n">iv</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">16</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">DES</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">DES</span><span class="o">.</span><span class="n">MODE_CBC</span><span class="p">,</span> <span class="n">iv</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">encrypt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        encrypt the given message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">msg</span><span class="p">:</span>
            <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;encrypt needs something to encrypt&quot;</span><span class="p">)</span>
        <span class="n">plaintext_to_encrypt</span> <span class="o">=</span> <span class="n">msg</span>
        <span class="c1"># Pad plaintext per RFC 2898 Section 6.1</span>
        <span class="n">padding</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">plaintext_to_encrypt</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span>
        <span class="n">plaintext_to_encrypt</span> <span class="o">+=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">padding</span><span class="p">)</span> <span class="o">*</span> <span class="n">padding</span>
        <span class="n">encoder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCrypt</span><span class="p">()</span>
        <span class="n">encrypted</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="n">plaintext_to_encrypt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
        <span class="n">b64enc</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">encrypted</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">b64enc</span>

    <span class="k">def</span> <span class="nf">decrypt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoded</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        decrypt the given message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">enc</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">encoded</span><span class="p">)</span>
        <span class="n">decoder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCrypt</span><span class="p">()</span>
        <span class="n">decryptedb</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">decrypt</span><span class="p">(</span><span class="n">enc</span><span class="p">)</span>
        <span class="n">decrypted</span> <span class="o">=</span> <span class="n">decryptedb</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">decrypted</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\2</span><span class="s2">,</span><span class="se">\1</span><span class="s2">,</span><span class="se">\3</span><span class="s2">,</span><span class="se">\4</span><span class="s2">,</span><span class="se">\5</span><span class="s2">,</span><span class="se">\6</span><span class="s2">,</span><span class="se">\7</span><span class="s2">,</span><span class="se">\0</span><span class="s2">,</span><span class="se">\b</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.crypt.Crypt.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">cypher</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">salt</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>construct me with the given cypher iterations and salt</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/crypt.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cypher</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">salt</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;construct me with the given cypher iterations and salt&quot;&quot;&quot;</span>
    <span class="c1"># avoid annoying</span>
    <span class="c1">#  /opt/local/Library/Frameworks/Python.framework/Versions/3.8/lib/python3.8/site-packages/Crypto/Cipher/blockalgo.py:141: DeprecationWarning: PY_SSIZE_T_CLEAN will be required for &#39;#&#39; formats</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">DeprecationWarning</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">cypher</span> <span class="o">=</span> <span class="n">cypher</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span> <span class="o">=</span> <span class="n">iterations</span>
    <span class="k">if</span> <span class="n">salt</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">salt</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">urandom</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">salt</span> <span class="o">=</span> <span class="n">salt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.crypt.Crypt.decrypt" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">decrypt</span><span class="p">(</span><span class="n">encoded</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>decrypt the given message</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/crypt.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">decrypt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoded</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    decrypt the given message</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">enc</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">encoded</span><span class="p">)</span>
    <span class="n">decoder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCrypt</span><span class="p">()</span>
    <span class="n">decryptedb</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="n">decrypt</span><span class="p">(</span><span class="n">enc</span><span class="p">)</span>
    <span class="n">decrypted</span> <span class="o">=</span> <span class="n">decryptedb</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">decrypted</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\2</span><span class="s2">,</span><span class="se">\1</span><span class="s2">,</span><span class="se">\3</span><span class="s2">,</span><span class="se">\4</span><span class="s2">,</span><span class="se">\5</span><span class="s2">,</span><span class="se">\6</span><span class="s2">,</span><span class="se">\7</span><span class="s2">,</span><span class="se">\0</span><span class="s2">,</span><span class="se">\b</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.crypt.Crypt.encrypt" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">encrypt</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>encrypt the given message</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/crypt.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">encrypt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    encrypt the given message</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">msg</span><span class="p">:</span>
        <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;encrypt needs something to encrypt&quot;</span><span class="p">)</span>
    <span class="n">plaintext_to_encrypt</span> <span class="o">=</span> <span class="n">msg</span>
    <span class="c1"># Pad plaintext per RFC 2898 Section 6.1</span>
    <span class="n">padding</span> <span class="o">=</span> <span class="mi">8</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">plaintext_to_encrypt</span><span class="p">)</span> <span class="o">%</span> <span class="mi">8</span>
    <span class="n">plaintext_to_encrypt</span> <span class="o">+=</span> <span class="nb">chr</span><span class="p">(</span><span class="n">padding</span><span class="p">)</span> <span class="o">*</span> <span class="n">padding</span>
    <span class="n">encoder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCrypt</span><span class="p">()</span>
    <span class="n">encrypted</span> <span class="o">=</span> <span class="n">encoder</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="n">plaintext_to_encrypt</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))</span>
    <span class="n">b64enc</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">encrypted</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">b64enc</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.crypt.Crypt.getCrypt" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getCrypt</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get my DES crypt</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/crypt.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getCrypt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get my DES crypt</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">hasher</span> <span class="o">=</span> <span class="n">MD5</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
    <span class="n">hasher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cypher</span><span class="p">)</span>
    <span class="n">hasher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">salt</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">hasher</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>

    <span class="c1"># iterate over hashes</span>
    <span class="k">for</span> <span class="n">_i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">iterations</span><span class="p">):</span>
        <span class="n">hasher</span> <span class="o">=</span> <span class="n">MD5</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
        <span class="n">hasher</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">hasher</span><span class="o">.</span><span class="n">digest</span><span class="p">()</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">result</span><span class="p">[:</span><span class="mi">8</span><span class="p">]</span>
    <span class="c1"># initialization vector</span>
    <span class="n">iv</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">8</span><span class="p">:</span><span class="mi">16</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">DES</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">DES</span><span class="o">.</span><span class="n">MODE_CBC</span><span class="p">,</span> <span class="n">iv</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.lambda_action" class="doc doc-heading">
            <code>lambda_action</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 31.01.2021</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.lambda_action.Code" class="doc doc-heading">
            <code>Code</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


      <p>a piece of code</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/lambda_action.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Code</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a piece of code</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lang</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;python&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        construct me from the given text and language</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="o">=</span> <span class="n">lang</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        https://stackoverflow.com/questions/701802/how-do-i-execute-a-string-containing-python-code-in-python</span>
<span class="sd">        https://stackoverflow.com/questions/436198/what-is-an-alternative-to-execfile-in-python-3</span>
<span class="sd">        https://stackoverflow.com/questions/2220699/whats-the-difference-between-eval-exec-and-compile</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="o">==</span> <span class="s2">&quot;jinja&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">executeTemplate</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">exec</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">executeTemplate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Renders the jinja-template with the query results placed in the given context and stores the result as wiki page.</span>
<span class="sd">        The name of the wiki page is either given through the template with set parameters.</span>
<span class="sd">        E.g.:</span>
<span class="sd">            {% set pagetitle = &quot;&quot;%}</span>
<span class="sd">            {% set pagetitle_prefix = &quot;List of &quot;%}</span>
<span class="sd">        If the pagetitle is empty, like in the example, the name variable of the query results is used as pagetitle.</span>
<span class="sd">        The pagetitle_prefix is added in all cases, if not defined a empty string is added.</span>
<span class="sd">        Assumption: self.text is a jinja template</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">getAttribute</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">template</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
            <span class="s2">&quot;\{</span><span class="si">% *s</span><span class="s2">et +&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot; += *[&#39;</span><span class="se">\&quot;</span><span class="s2">](?P&lt;name&gt;.*)[&#39;</span><span class="se">\&quot;</span><span class="s2">] *%\}&quot;</span><span class="p">,</span> <span class="n">template</span>
        <span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
        <span class="n">raw_template</span> <span class="o">=</span> <span class="n">LambdaAction</span><span class="o">.</span><span class="n">unescapeHTML</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">raw_template</span><span class="p">)</span>
        <span class="n">title</span> <span class="o">=</span> <span class="n">getAttribute</span><span class="p">(</span><span class="n">raw_template</span><span class="p">,</span> <span class="s2">&quot;pagetitle&quot;</span><span class="p">)</span>
        <span class="n">pagetitle_prefix</span> <span class="o">=</span> <span class="n">getAttribute</span><span class="p">(</span><span class="n">raw_template</span><span class="p">,</span> <span class="s2">&quot;pagetitle_prefix&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pagetitle_prefix</span><span class="p">:</span>
            <span class="n">pagetitle_prefix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;wikiclient&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">]:</span>
            <span class="n">page_content</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">({</span><span class="s2">&quot;row&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">,</span> <span class="s2">&quot;smw&quot;</span><span class="p">:</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;smw&quot;</span><span class="p">]})</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Can&#39;t save wikipage without a title. Either provide a page title in the &quot;</span>
                        <span class="sa">f</span><span class="s2">&quot;template or provide the name variable for each query result&quot;</span>
                    <span class="p">)</span>
                <span class="n">pagetitle</span> <span class="o">=</span> <span class="n">pagetitle_prefix</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pagetitle</span> <span class="o">=</span> <span class="n">pagetitle_prefix</span> <span class="o">+</span> <span class="n">title</span>
            <span class="n">page</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;wikiclient&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pagetitle</span><span class="p">)</span>
            <span class="c1"># ToDo</span>
            <span class="n">page</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span>
                <span class="n">page_content</span><span class="p">,</span>
                <span class="sa">f</span><span class="s2">&quot;Created with the template [[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">]] by </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2"> through LambdaActions&quot;</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.lambda_action.Code.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;python&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>construct me from the given text and language</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/lambda_action.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lang</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;python&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    construct me from the given text and language</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="o">=</span> <span class="n">lang</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.lambda_action.Code.execute" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="n">context</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>https://stackoverflow.com/questions/701802/how-do-i-execute-a-string-containing-python-code-in-python
https://stackoverflow.com/questions/436198/what-is-an-alternative-to-execfile-in-python-3
https://stackoverflow.com/questions/2220699/whats-the-difference-between-eval-exec-and-compile</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/lambda_action.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    https://stackoverflow.com/questions/701802/how-do-i-execute-a-string-containing-python-code-in-python</span>
<span class="sd">    https://stackoverflow.com/questions/436198/what-is-an-alternative-to-execfile-in-python-3</span>
<span class="sd">    https://stackoverflow.com/questions/2220699/whats-the-difference-between-eval-exec-and-compile</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="o">==</span> <span class="s2">&quot;jinja&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executeTemplate</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">exec</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.lambda_action.Code.executeTemplate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">executeTemplate</span><span class="p">(</span><span class="n">context</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Renders the jinja-template with the query results placed in the given context and stores the result as wiki page.
The name of the wiki page is either given through the template with set parameters.
E.g.:
    {% set pagetitle = ""%}
    {% set pagetitle_prefix = "List of "%}
If the pagetitle is empty, like in the example, the name variable of the query results is used as pagetitle.
The pagetitle_prefix is added in all cases, if not defined a empty string is added.
Assumption: self.text is a jinja template</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/lambda_action.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">executeTemplate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Renders the jinja-template with the query results placed in the given context and stores the result as wiki page.</span>
<span class="sd">    The name of the wiki page is either given through the template with set parameters.</span>
<span class="sd">    E.g.:</span>
<span class="sd">        {% set pagetitle = &quot;&quot;%}</span>
<span class="sd">        {% set pagetitle_prefix = &quot;List of &quot;%}</span>
<span class="sd">    If the pagetitle is empty, like in the example, the name variable of the query results is used as pagetitle.</span>
<span class="sd">    The pagetitle_prefix is added in all cases, if not defined a empty string is added.</span>
<span class="sd">    Assumption: self.text is a jinja template</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">getAttribute</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">template</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span>
        <span class="s2">&quot;\{</span><span class="si">% *s</span><span class="s2">et +&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="s2">&quot; += *[&#39;</span><span class="se">\&quot;</span><span class="s2">](?P&lt;name&gt;.*)[&#39;</span><span class="se">\&quot;</span><span class="s2">] *%\}&quot;</span><span class="p">,</span> <span class="n">template</span>
    <span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
    <span class="n">raw_template</span> <span class="o">=</span> <span class="n">LambdaAction</span><span class="o">.</span><span class="n">unescapeHTML</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">raw_template</span><span class="p">)</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">getAttribute</span><span class="p">(</span><span class="n">raw_template</span><span class="p">,</span> <span class="s2">&quot;pagetitle&quot;</span><span class="p">)</span>
    <span class="n">pagetitle_prefix</span> <span class="o">=</span> <span class="n">getAttribute</span><span class="p">(</span><span class="n">raw_template</span><span class="p">,</span> <span class="s2">&quot;pagetitle_prefix&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">pagetitle_prefix</span><span class="p">:</span>
        <span class="n">pagetitle_prefix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;wikiclient&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">]:</span>
        <span class="n">page_content</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">render</span><span class="p">({</span><span class="s2">&quot;row&quot;</span><span class="p">:</span> <span class="n">row</span><span class="p">,</span> <span class="s2">&quot;smw&quot;</span><span class="p">:</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;smw&quot;</span><span class="p">]})</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Can&#39;t save wikipage without a title. Either provide a page title in the &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;template or provide the name variable for each query result&quot;</span>
                <span class="p">)</span>
            <span class="n">pagetitle</span> <span class="o">=</span> <span class="n">pagetitle_prefix</span> <span class="o">+</span> <span class="n">row</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pagetitle</span> <span class="o">=</span> <span class="n">pagetitle_prefix</span> <span class="o">+</span> <span class="n">title</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;wikiclient&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pagetitle</span><span class="p">)</span>
        <span class="c1"># ToDo</span>
        <span class="n">page</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span>
            <span class="n">page_content</span><span class="p">,</span>
            <span class="sa">f</span><span class="s2">&quot;Created with the template [[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">]] by </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2"> through LambdaActions&quot;</span><span class="p">,</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.lambda_action.LambdaAction" class="doc doc-heading">
            <code>LambdaAction</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


      <p>a lambda action</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/lambda_action.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LambdaAction</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a lambda action</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">code</span>

    <span class="k">def</span> <span class="nf">executeQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">rows</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">lang</span> <span class="o">==</span> <span class="s2">&quot;sql&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;sqlDB&quot;</span> <span class="ow">in</span> <span class="n">context</span><span class="p">:</span>
                <span class="n">db</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;sqlDB&quot;</span><span class="p">]</span>
                <span class="n">rows</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">lang</span> <span class="o">==</span> <span class="s2">&quot;sparql&quot;</span><span class="p">:</span>
            <span class="c1"># ToDo</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">lang</span> <span class="o">==</span> <span class="s2">&quot;smw&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;smw&quot;</span> <span class="ow">in</span> <span class="n">context</span><span class="p">:</span>
                <span class="n">smw</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;smw&quot;</span><span class="p">]</span>
                <span class="n">query</span> <span class="o">=</span> <span class="n">LambdaAction</span><span class="o">.</span><span class="n">unescapeHTML</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
                <span class="n">query_results</span> <span class="o">=</span> <span class="n">smw</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
                <span class="n">rows</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">query_results</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Queries of type </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">lang</span><span class="si">}</span><span class="s2"> are currently not supported by LambdaActions.&quot;</span>
            <span class="p">)</span>
        <span class="n">context</span><span class="p">[</span><span class="s2">&quot;rows&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rows</span>
        <span class="k">return</span> <span class="n">rows</span>

    <span class="k">def</span> <span class="nf">getMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="n">message</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s2">&quot;result&quot;</span> <span class="ow">in</span> <span class="n">context</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">context</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;message&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="n">message</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">message</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        run my query and feed the result into the given code</span>

<span class="sd">        Args:</span>
<span class="sd">            context(dict): a dictionary for the exchange of parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">executeQuery</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">unescapeHTML</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Unescapes received html value and removes html tags.</span>
<span class="sd">        Replaces:</span>
<span class="sd">            &lt;br /&gt; -&gt; &quot;\n&quot;</span>
<span class="sd">            &lt;pre&gt; -&gt; &quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            value(str): html encoded string</span>
<span class="sd">        Returns:</span>
<span class="sd">            Returns the received value but without the html tags and unescaped.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;&lt;pre&gt;&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">unescape</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">5</span><span class="p">:][:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.lambda_action.LambdaAction.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">code</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructor</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/lambda_action.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="n">Query</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">=</span> <span class="n">code</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.lambda_action.LambdaAction.execute" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="n">context</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>run my query and feed the result into the given code</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>context(dict)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a dictionary for the exchange of parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/lambda_action.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    run my query and feed the result into the given code</span>

<span class="sd">    Args:</span>
<span class="sd">        context(dict): a dictionary for the exchange of parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">executeQuery</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.lambda_action.LambdaAction.unescapeHTML" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">unescapeHTML</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <pre><code>    Unescapes received html value and removes html tags.
    Replaces:
        &lt;br /&gt; -&gt; "
</code></pre>
<p>"
            <pre> -&gt; ""
        Args:
            value(str): html encoded string
        Returns:
            Returns the received value but without the html tags and unescaped.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/lambda_action.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">unescapeHTML</span><span class="p">(</span><span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Unescapes received html value and removes html tags.</span>
<span class="sd">    Replaces:</span>
<span class="sd">        &lt;br /&gt; -&gt; &quot;\n&quot;</span>
<span class="sd">        &lt;pre&gt; -&gt; &quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        value(str): html encoded string</span>
<span class="sd">    Returns:</span>
<span class="sd">        Returns the received value but without the html tags and unescaped.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;&lt;pre&gt;&quot;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">html</span><span class="o">.</span><span class="n">unescape</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&lt;br /&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">5</span><span class="p">:][:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.mwTable" class="doc doc-heading">
            <code>mwTable</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2020-08-21</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.mwTable.MediaWikiTable" class="doc doc-heading">
            <code>MediaWikiTable</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


      <p>helper for https://www.mediawiki.org/wiki/Help:Tables</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/mwTable.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MediaWikiTable</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    helper for https://www.mediawiki.org/wiki/Help:Tables</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">wikiTable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">colFormats</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sortable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">withNewLines</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colFormats</span> <span class="o">=</span> <span class="n">colFormats</span>
        <span class="n">cssDelim</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">wikiTable</span><span class="p">:</span>
            <span class="n">cWikiTable</span> <span class="o">=</span> <span class="s2">&quot;wikitable&quot;</span>
            <span class="n">cssDelim</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cWikiTable</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">sortable</span><span class="p">:</span>
            <span class="n">cSortable</span> <span class="o">=</span> <span class="s2">&quot;sortable&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cSortable</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="s1">&#39;{|class=&quot;</span><span class="si">%s%s%s</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cWikiTable</span><span class="p">,</span> <span class="n">cssDelim</span><span class="p">,</span> <span class="n">cSortable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">|}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">withNewLines</span> <span class="o">=</span> <span class="n">withNewLines</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">addHeader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        add the given record as a &quot;sample&quot; header</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">withNewLines</span><span class="p">:</span>
            <span class="n">headerStart</span> <span class="o">=</span> <span class="s2">&quot;|+&quot;</span>
            <span class="n">firstColDelim</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">!&quot;</span>
            <span class="n">colDelim</span> <span class="o">=</span> <span class="n">firstColDelim</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headerStart</span> <span class="o">=</span> <span class="s2">&quot;|+</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">firstColDelim</span> <span class="o">=</span> <span class="s2">&quot;!&quot;</span>
            <span class="n">colDelim</span> <span class="o">=</span> <span class="s2">&quot;!!&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="n">headerStart</span>
        <span class="n">first</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">first</span><span class="p">:</span>
                <span class="n">delim</span> <span class="o">=</span> <span class="n">firstColDelim</span>
                <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">delim</span> <span class="o">=</span> <span class="n">colDelim</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">delim</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">addRow4Dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addHeader</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">withNewLines</span><span class="p">:</span>
            <span class="n">rowStart</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">|-&quot;</span>
            <span class="n">colDelim</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">|&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rowStart</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">|-</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">colDelim</span> <span class="o">=</span> <span class="s2">&quot;||&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">+=</span> <span class="n">rowStart</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colFormats</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">colFormats</span><span class="p">:</span>
                <span class="n">colFormat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colFormats</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">colFormat</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">colFormat</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">colDelim</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fromListOfDicts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listOfDicts</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">listOfDicts</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addRow4Dict</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">asWikiMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert me to MediaWiki markup</span>

<span class="sd">        Returns:</span>
<span class="sd">            string: the MediWiki Markup for this table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">markup</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.mwTable.MediaWikiTable.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">wikiTable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">colFormats</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sortable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">withNewLines</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructor</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/mwTable.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">wikiTable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">colFormats</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sortable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">withNewLines</span><span class="o">=</span><span class="kc">False</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">colFormats</span> <span class="o">=</span> <span class="n">colFormats</span>
    <span class="n">cssDelim</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">wikiTable</span><span class="p">:</span>
        <span class="n">cWikiTable</span> <span class="o">=</span> <span class="s2">&quot;wikitable&quot;</span>
        <span class="n">cssDelim</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cWikiTable</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">sortable</span><span class="p">:</span>
        <span class="n">cSortable</span> <span class="o">=</span> <span class="s2">&quot;sortable&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cSortable</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="s1">&#39;{|class=&quot;</span><span class="si">%s%s%s</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cWikiTable</span><span class="p">,</span> <span class="n">cssDelim</span><span class="p">,</span> <span class="n">cSortable</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">|}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">withNewLines</span> <span class="o">=</span> <span class="n">withNewLines</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.mwTable.MediaWikiTable.addHeader" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">addHeader</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>add the given record as a "sample" header</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/mwTable.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">addHeader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    add the given record as a &quot;sample&quot; header</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">withNewLines</span><span class="p">:</span>
        <span class="n">headerStart</span> <span class="o">=</span> <span class="s2">&quot;|+&quot;</span>
        <span class="n">firstColDelim</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">!&quot;</span>
        <span class="n">colDelim</span> <span class="o">=</span> <span class="n">firstColDelim</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">headerStart</span> <span class="o">=</span> <span class="s2">&quot;|+</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">firstColDelim</span> <span class="o">=</span> <span class="s2">&quot;!&quot;</span>
        <span class="n">colDelim</span> <span class="o">=</span> <span class="s2">&quot;!!&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="n">headerStart</span>
    <span class="n">first</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">first</span><span class="p">:</span>
            <span class="n">delim</span> <span class="o">=</span> <span class="n">firstColDelim</span>
            <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">delim</span> <span class="o">=</span> <span class="n">colDelim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">delim</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.mwTable.MediaWikiTable.asWikiMarkup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">asWikiMarkup</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>convert me to MediaWiki markup</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>string</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the MediWiki Markup for this table</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/mwTable.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">asWikiMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert me to MediaWiki markup</span>

<span class="sd">    Returns:</span>
<span class="sd">        string: the MediWiki Markup for this table</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">markup</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">markup</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.pagehistory" class="doc doc-heading">
            <code>pagehistory</code>


</h2>

    <div class="doc doc-contents ">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.pagehistory.PageHistory" class="doc doc-heading">
            <code>PageHistory</code>


</h3>


    <div class="doc doc-contents ">


      <p>Represents the history of a page</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/pagehistory.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PageHistory</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the history of a page</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wikiId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>

<span class="sd">        Args:</span>
<span class="sd">            pageTitle(str): name of the page</span>
<span class="sd">            wikiId(str): id of the wiki the page is located</span>
<span class="sd">            debug(bool): If True show debug messages</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pageTitle</span> <span class="o">=</span> <span class="n">pageTitle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wikiClient</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">ofWikiId</span><span class="p">(</span><span class="n">wikiId</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiClient</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">revisions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getRevisions</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_getRevisions</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">PageRevision</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the revisions of the page as PageRevision object</span>

<span class="sd">        Returns:</span>
<span class="sd">            List of PageRevisions of the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">revisions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">revisionRecord</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">page</span><span class="o">.</span><span class="n">revisions</span><span class="p">(</span>
            <span class="n">prop</span><span class="o">=</span><span class="s2">&quot;ids|timestamp|user|userid|comment|size&quot;</span>
        <span class="p">):</span>
            <span class="n">revision</span> <span class="o">=</span> <span class="n">PageRevision</span><span class="p">()</span>
            <span class="n">revision</span><span class="o">.</span><span class="n">fromDict</span><span class="p">(</span><span class="n">revisionRecord</span><span class="p">)</span>
            <span class="n">revisions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">revision</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">revisions</span>

    <span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the page exists</span>
<span class="sd">        Assumption: If the page exists than ot exists at least one revision entry</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if the page exists otherwise False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">revisions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">getFirstUser</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">reverse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">limitedUserGroup</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the first user in the revisions</span>

<span class="sd">        Args:</span>
<span class="sd">            reverse(bool): If False start the search at the oldest entry. Otherwise, search from the newest to the oldest revision</span>
<span class="sd">            limitedUserGroup(list): limit the search to the given list. If None all users will be considered.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str username that matches the search criterion</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">revisions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">revisions</span>
        <span class="n">revisions</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s2">&quot;revid&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
        <span class="k">if</span> <span class="n">reverse</span><span class="p">:</span>
            <span class="n">revisions</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">revisions</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">revision</span> <span class="ow">in</span> <span class="n">revisions</span><span class="p">:</span>
            <span class="n">user</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">revision</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">limitedUserGroup</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">user</span>
            <span class="k">elif</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">limitedUserGroup</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">user</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.pagehistory.PageHistory.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">,</span> <span class="n">wikiId</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructor</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pageTitle(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the page</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>wikiId(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>id of the wiki the page is located</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>debug(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True show debug messages</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/pagehistory.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wikiId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>

<span class="sd">    Args:</span>
<span class="sd">        pageTitle(str): name of the page</span>
<span class="sd">        wikiId(str): id of the wiki the page is located</span>
<span class="sd">        debug(bool): If True show debug messages</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pageTitle</span> <span class="o">=</span> <span class="n">pageTitle</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wikiClient</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">ofWikiId</span><span class="p">(</span><span class="n">wikiId</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiClient</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">revisions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getRevisions</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.pagehistory.PageHistory.exists" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">exists</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Checks if the page exists
Assumption: If the page exists than ot exists at least one revision entry</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the page exists otherwise False</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/pagehistory.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">exists</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if the page exists</span>
<span class="sd">    Assumption: If the page exists than ot exists at least one revision entry</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if the page exists otherwise False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">revisions</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.pagehistory.PageHistory.getFirstUser" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getFirstUser</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">limitedUserGroup</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Returns the first user in the revisions</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>reverse(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If False start the search at the oldest entry. Otherwise, search from the newest to the oldest revision</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limitedUserGroup(list)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>limit the search to the given list. If None all users will be considered.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Union">Union</span>[str, None]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str username that matches the search criterion</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/pagehistory.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getFirstUser</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">reverse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">limitedUserGroup</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the first user in the revisions</span>

<span class="sd">    Args:</span>
<span class="sd">        reverse(bool): If False start the search at the oldest entry. Otherwise, search from the newest to the oldest revision</span>
<span class="sd">        limitedUserGroup(list): limit the search to the given list. If None all users will be considered.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str username that matches the search criterion</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">revisions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">revisions</span>
    <span class="n">revisions</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="s2">&quot;revid&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)))</span>
    <span class="k">if</span> <span class="n">reverse</span><span class="p">:</span>
        <span class="n">revisions</span> <span class="o">=</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">revisions</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">revision</span> <span class="ow">in</span> <span class="n">revisions</span><span class="p">:</span>
        <span class="n">user</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">revision</span><span class="p">,</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">limitedUserGroup</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">user</span>
        <span class="k">elif</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">limitedUserGroup</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">user</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.pagehistory.PageRevision" class="doc doc-heading">
            <code>PageRevision</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="lodstorage.jsonable.JSONAble">JSONAble</span></code></p>


      <p>Represents the metadata of a mediawiki page revision</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/pagehistory.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PageRevision</span><span class="p">(</span><span class="n">JSONAble</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the metadata of a mediawiki page revision</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getSamples</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;revid&quot;</span><span class="p">:</span> <span class="mi">7056</span><span class="p">,</span>
                <span class="s2">&quot;parentid&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span>
                <span class="s2">&quot;anon&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="s2">&quot;userid&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2008-10-14T21:23:09Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">6905</span><span class="p">,</span>
                <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;Event created&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;revid&quot;</span><span class="p">:</span> <span class="mi">8195</span><span class="p">,</span>
                <span class="s2">&quot;parentid&quot;</span><span class="p">:</span> <span class="mi">8194</span><span class="p">,</span>
                <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;Wf&quot;</span><span class="p">,</span>
                <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="s2">&quot;2021-11-11T12:50:31Z&quot;</span><span class="p">,</span>
                <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">910</span><span class="p">,</span>
                <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">samples</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">props</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()])</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="n">props</span><span class="si">}</span><span class="s2">)&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.selector" class="doc doc-heading">
            <code>selector</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2020-12-20</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.selector.Selector" class="doc doc-heading">
            <code>Selector</code>


</h3>


    <div class="doc doc-contents ">


      <p>selector class</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/selector.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Selector</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    selector class</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="n">items</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">var</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkvar</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">IntVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Select None&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quitProgram</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">createWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         create the Window for the selection list</span>
<span class="sd">         Args:</span>
<span class="sd">            root(tk.App Object): tk.App opened object</span>
<span class="sd">            action(str): Type of Action</span>
<span class="sd">            title(str): Title of Window</span>
<span class="sd">            description(str): Description of Task to do</span>
<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>

        <span class="c1"># Title</span>
        <span class="n">rowCounter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>  <span class="c1"># set window title to given title string</span>
        <span class="n">root</span><span class="o">.</span><span class="n">resizable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># set so the window can be resized by user</span>

        <span class="c1"># finding optimal window size</span>
        <span class="n">items_by_len</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>
        <span class="n">longest_string</span> <span class="o">=</span> <span class="n">items_by_len</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># Setting Message to description string</span>
        <span class="n">desc</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">description</span><span class="p">)</span>
        <span class="n">desc</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Configure&gt;&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">desc</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">10</span><span class="p">))</span>
        <span class="n">desc</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>

        <span class="c1"># Frame creation for Listbox</span>
        <span class="n">frameList</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

        <span class="n">items</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
        <span class="n">items</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
        <span class="n">listbox</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Listbox</span><span class="p">(</span>
            <span class="n">frameList</span><span class="p">,</span>
            <span class="n">listvariable</span><span class="o">=</span><span class="n">items</span><span class="p">,</span>
            <span class="n">selectmode</span><span class="o">=</span><span class="s2">&quot;multiple&quot;</span><span class="p">,</span>
            <span class="n">width</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">longest_string</span><span class="p">)</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">listbox</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">listbox</span><span class="o">.</span><span class="n">select_set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>

        <span class="c1"># Frame creation for select all/none checkbox</span>
        <span class="n">frameSelect</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
        <span class="n">frameSelect</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>
        <span class="n">frameList</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># label and checkbutton creation</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frameSelect</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="p">)</span>
        <span class="n">check</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Checkbutton</span><span class="p">(</span>
            <span class="n">frameSelect</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">checkvar</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_all</span><span class="p">(</span><span class="n">listbox</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">check</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;sw&quot;</span><span class="p">)</span>
        <span class="n">label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;sw&quot;</span><span class="p">)</span>

        <span class="c1"># Scrollbar binding and creation</span>
        <span class="n">scrollbar</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scrollbar</span><span class="p">(</span><span class="n">frameList</span><span class="p">)</span>
        <span class="n">scrollbar</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>
        <span class="n">listbox</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">yscrollcommand</span><span class="o">=</span><span class="n">scrollbar</span><span class="o">.</span><span class="n">set</span><span class="p">)</span>
        <span class="n">scrollbar</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="n">listbox</span><span class="o">.</span><span class="n">yview</span><span class="p">)</span>
        <span class="n">listbox</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;&lt;ListboxSelect&gt;&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">updateCheck</span><span class="p">)</span>

        <span class="c1"># Frame for Action and Quit Buttons</span>
        <span class="n">frameControl</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
        <span class="n">frameControl</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>

        <span class="c1"># Action and Quit button creation</span>
        <span class="n">actionBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">frameControl</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
            <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">updatePages</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">listbox</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">actionBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;sw&quot;</span><span class="p">)</span>
        <span class="n">quitBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">frameControl</span><span class="p">,</span>
            <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Quit&quot;</span><span class="p">,</span>
            <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
            <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
            <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">quitSelector</span><span class="p">(</span><span class="n">root</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">quitBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;se&quot;</span><span class="p">)</span>

        <span class="c1"># To destroy window and exit program if cross button is pressed</span>
        <span class="n">root</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">quitSelector</span><span class="p">(</span><span class="n">root</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">updateCheck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Helper function to change state of select all checkbox</span>
<span class="sd">        Returns:</span>
<span class="sd">            event(Tk event Object): All registered events on Tkinter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">curselection</span><span class="p">())</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">items</span>
        <span class="p">):</span>  <span class="c1"># check if any item is deselected</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Select All&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">checkvar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">curselection</span><span class="p">())</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Select None&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">checkvar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">select_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listbox</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Button helper function to select all list items</span>
<span class="sd">        Returns:</span>
<span class="sd">            listbox(Tk Listbox Object): listbox to update to all items</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkvar</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="n">listbox</span><span class="o">.</span><span class="n">select_set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Select None&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">listbox</span><span class="o">.</span><span class="n">select_clear</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Select All&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">updatePages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">listbox</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update function to remove unselected items from list</span>
<span class="sd">        Args:</span>
<span class="sd">            root(tk.App Object): tk.App opened object</span>
<span class="sd">            listbox(TK listbox Object): listbox to update</span>
<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">listbox</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">listbox</span><span class="o">.</span><span class="n">curselection</span><span class="p">()</span>
        <span class="p">]</span>  <span class="c1"># Remove unselected items from list</span>
        <span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">quitSelector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Quit the python program when Quit Button is pressed.</span>
<span class="sd">        Args:</span>
<span class="sd">            root(tk.App Object): tk.App opened object</span>
<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="s2">&quot;Q&quot;</span>

    <span class="k">def</span> <span class="nf">getUpdatedPages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Getter function for the class variable items</span>
<span class="sd">        Returns:</span>
<span class="sd">            items(list): List of pages selected in GUI by user</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="n">selectionList</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;Select&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Selection&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a GUI in which the user can select a subset of the provided selectionList.</span>
<span class="sd">        The user can quit the selection resulting in the return of an empty list.</span>
<span class="sd">        :param selectionList:</span>
<span class="sd">        :param action: name of the action the selection performs. Default is select</span>
<span class="sd">        :param title: title of the created window</span>
<span class="sd">        :param description: Instructions for the user (consequence of the selection)</span>
<span class="sd">        :return: user selected subset of the given selectionList</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>

        <span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
        <span class="n">GUI</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">selectionList</span><span class="p">)</span>  <span class="c1"># Tkinter Object creation</span>
        <span class="n">GUI</span><span class="o">.</span><span class="n">createWindow</span><span class="p">(</span>
            <span class="n">root</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span>
        <span class="p">)</span>  <span class="c1"># create Window with given parameters</span>
        <span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>  <span class="c1"># Run GUI loop</span>
        <span class="n">selectionList</span> <span class="o">=</span> <span class="n">GUI</span><span class="o">.</span><span class="n">getUpdatedPages</span><span class="p">()</span>  <span class="c1"># Get selected items</span>
        <span class="k">return</span> <span class="n">selectionList</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.selector.Selector.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">items</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructor</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/selector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">items</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="n">items</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">var</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">checkvar</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">IntVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Select None&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">quitProgram</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.selector.Selector.createWindow" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">createWindow</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>create the Window for the selection list
 Args:
    root(tk.App Object): tk.App opened object
    action(str): Type of Action
    title(str): Title of Window
    description(str): Description of Task to do
Returns:
    None</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/selector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">createWindow</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     create the Window for the selection list</span>
<span class="sd">     Args:</span>
<span class="sd">        root(tk.App Object): tk.App opened object</span>
<span class="sd">        action(str): Type of Action</span>
<span class="sd">        title(str): Title of Window</span>
<span class="sd">        description(str): Description of Task to do</span>
<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>

    <span class="c1"># Title</span>
    <span class="n">rowCounter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>  <span class="c1"># set window title to given title string</span>
    <span class="n">root</span><span class="o">.</span><span class="n">resizable</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1"># set so the window can be resized by user</span>

    <span class="c1"># finding optimal window size</span>
    <span class="n">items_by_len</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>
    <span class="n">longest_string</span> <span class="o">=</span> <span class="n">items_by_len</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="c1"># Setting Message to description string</span>
    <span class="n">desc</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">description</span><span class="p">)</span>
    <span class="n">desc</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Configure&gt;&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">desc</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">e</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="mi">10</span><span class="p">))</span>
    <span class="n">desc</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>

    <span class="c1"># Frame creation for Listbox</span>
    <span class="n">frameList</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>

    <span class="n">items</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="n">items</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">)</span>
    <span class="n">listbox</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Listbox</span><span class="p">(</span>
        <span class="n">frameList</span><span class="p">,</span>
        <span class="n">listvariable</span><span class="o">=</span><span class="n">items</span><span class="p">,</span>
        <span class="n">selectmode</span><span class="o">=</span><span class="s2">&quot;multiple&quot;</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">longest_string</span><span class="p">)</span> <span class="o">+</span> <span class="mi">5</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">listbox</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">listbox</span><span class="o">.</span><span class="n">select_set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>

    <span class="c1"># Frame creation for select all/none checkbox</span>
    <span class="n">frameSelect</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="n">frameSelect</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">TOP</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>
    <span class="n">frameList</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># label and checkbutton creation</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">frameSelect</span><span class="p">,</span> <span class="n">textvariable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="p">)</span>
    <span class="n">check</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Checkbutton</span><span class="p">(</span>
        <span class="n">frameSelect</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">checkvar</span><span class="p">,</span>
        <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_all</span><span class="p">(</span><span class="n">listbox</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">check</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;sw&quot;</span><span class="p">)</span>
    <span class="n">label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;sw&quot;</span><span class="p">)</span>

    <span class="c1"># Scrollbar binding and creation</span>
    <span class="n">scrollbar</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Scrollbar</span><span class="p">(</span><span class="n">frameList</span><span class="p">)</span>
    <span class="n">scrollbar</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTH</span><span class="p">)</span>
    <span class="n">listbox</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">yscrollcommand</span><span class="o">=</span><span class="n">scrollbar</span><span class="o">.</span><span class="n">set</span><span class="p">)</span>
    <span class="n">scrollbar</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="n">listbox</span><span class="o">.</span><span class="n">yview</span><span class="p">)</span>
    <span class="n">listbox</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;&lt;ListboxSelect&gt;&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">updateCheck</span><span class="p">)</span>

    <span class="c1"># Frame for Action and Quit Buttons</span>
    <span class="n">frameControl</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="n">frameControl</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">BOTTOM</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">X</span><span class="p">)</span>

    <span class="c1"># Action and Quit button creation</span>
    <span class="n">actionBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">frameControl</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="n">action</span><span class="p">,</span>
        <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span>
        <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">updatePages</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">listbox</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">actionBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;sw&quot;</span><span class="p">)</span>
    <span class="n">quitBtn</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">frameControl</span><span class="p">,</span>
        <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Quit&quot;</span><span class="p">,</span>
        <span class="n">bg</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span>
        <span class="n">fg</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">command</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">quitSelector</span><span class="p">(</span><span class="n">root</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">quitBtn</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tk</span><span class="o">.</span><span class="n">RIGHT</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;se&quot;</span><span class="p">)</span>

    <span class="c1"># To destroy window and exit program if cross button is pressed</span>
    <span class="n">root</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">quitSelector</span><span class="p">(</span><span class="n">root</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.selector.Selector.getUpdatedPages" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getUpdatedPages</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Getter function for the class variable items
Returns:
    items(list): List of pages selected in GUI by user</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/selector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getUpdatedPages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Getter function for the class variable items</span>
<span class="sd">    Returns:</span>
<span class="sd">        items(list): List of pages selected in GUI by user</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">items</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.selector.Selector.quitSelector" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">quitSelector</span><span class="p">(</span><span class="n">root</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Quit the python program when Quit Button is pressed.
Args:
    root(tk.App Object): tk.App opened object
Returns:
    None</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/selector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">quitSelector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Quit the python program when Quit Button is pressed.</span>
<span class="sd">    Args:</span>
<span class="sd">        root(tk.App Object): tk.App opened object</span>
<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="s2">&quot;Q&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.selector.Selector.select" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">select</span><span class="p">(</span><span class="n">selectionList</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;Select&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Selection&#39;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Creates a GUI in which the user can select a subset of the provided selectionList.
The user can quit the selection resulting in the return of an empty list.
:param selectionList:
:param action: name of the action the selection performs. Default is select
:param title: title of the created window
:param description: Instructions for the user (consequence of the selection)
:return: user selected subset of the given selectionList</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/selector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="n">selectionList</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;Select&quot;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Selection&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a GUI in which the user can select a subset of the provided selectionList.</span>
<span class="sd">    The user can quit the selection resulting in the return of an empty list.</span>
<span class="sd">    :param selectionList:</span>
<span class="sd">    :param action: name of the action the selection performs. Default is select</span>
<span class="sd">    :param title: title of the created window</span>
<span class="sd">    :param description: Instructions for the user (consequence of the selection)</span>
<span class="sd">    :return: user selected subset of the given selectionList</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>

    <span class="n">root</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
    <span class="n">GUI</span> <span class="o">=</span> <span class="n">Selector</span><span class="p">(</span><span class="n">selectionList</span><span class="p">)</span>  <span class="c1"># Tkinter Object creation</span>
    <span class="n">GUI</span><span class="o">.</span><span class="n">createWindow</span><span class="p">(</span>
        <span class="n">root</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span>
    <span class="p">)</span>  <span class="c1"># create Window with given parameters</span>
    <span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>  <span class="c1"># Run GUI loop</span>
    <span class="n">selectionList</span> <span class="o">=</span> <span class="n">GUI</span><span class="o">.</span><span class="n">getUpdatedPages</span><span class="p">()</span>  <span class="c1"># Get selected items</span>
    <span class="k">return</span> <span class="n">selectionList</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.selector.Selector.select_all" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">select_all</span><span class="p">(</span><span class="n">listbox</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Button helper function to select all list items
Returns:
    listbox(Tk Listbox Object): listbox to update to all items</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/selector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">select_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listbox</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Button helper function to select all list items</span>
<span class="sd">    Returns:</span>
<span class="sd">        listbox(Tk Listbox Object): listbox to update to all items</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkvar</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
        <span class="n">listbox</span><span class="o">.</span><span class="n">select_set</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Select None&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">listbox</span><span class="o">.</span><span class="n">select_clear</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tk</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Select All&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.selector.Selector.updateCheck" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">updateCheck</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Helper function to change state of select all checkbox
Returns:
    event(Tk event Object): All registered events on Tkinter</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/selector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">updateCheck</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Helper function to change state of select all checkbox</span>
<span class="sd">    Returns:</span>
<span class="sd">        event(Tk event Object): All registered events on Tkinter</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">curselection</span><span class="p">())</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">items</span>
    <span class="p">):</span>  <span class="c1"># check if any item is deselected</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Select All&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkvar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">curselection</span><span class="p">())</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">items</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label_test</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Select None&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkvar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.selector.Selector.updatePages" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">updatePages</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">listbox</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Update function to remove unselected items from list
Args:
    root(tk.App Object): tk.App opened object
    listbox(TK listbox Object): listbox to update
Returns:
    None</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/selector.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">updatePages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">root</span><span class="p">,</span> <span class="n">listbox</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Update function to remove unselected items from list</span>
<span class="sd">    Args:</span>
<span class="sd">        root(tk.App Object): tk.App opened object</span>
<span class="sd">        listbox(TK listbox Object): listbox to update</span>
<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">items</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">listbox</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span> <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">listbox</span><span class="o">.</span><span class="n">curselection</span><span class="p">()</span>
    <span class="p">]</span>  <span class="c1"># Remove unselected items from list</span>
    <span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.smw" class="doc doc-heading">
            <code>smw</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2020-05-29</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.smw.PrintRequest" class="doc doc-heading">
            <code>PrintRequest</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


              <details class="quote">
                <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PrintRequest</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">debug</span> <span class="o">=</span> <span class="kc">False</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    construct the given print request</span>
<span class="sd">    see https://www.semantic-mediawiki.org/wiki/Serialization_(JSON)</span>
<span class="sd">    :ivar smw: SMW context for this printrequest</span>
<span class="sd">    :ivar label: the label of the printrequest</span>
<span class="sd">    :ivar key:</span>
<span class="sd">    :ivar redi:</span>
<span class="sd">    :ivar typeid:</span>
<span class="sd">    :ivar mode:</span>
<span class="sd">    :ivar format:</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">smw</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        construct me from the given record</span>
<span class="sd">        Args:</span>
<span class="sd">            smw(SMW): the SemanticMediaWiki context of this PrintRequest</span>
<span class="sd">            record(dict): the dict derived from the printrequest json serialization</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">smw</span> <span class="o">=</span> <span class="n">smw</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">PrintRequest</span><span class="o">.</span><span class="n">debug</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">redi</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;redi&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;typeid&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">&quot;mode&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s2">&quot;format&quot;</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;format&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">deserializeSingle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;deserialize a single value</span>
<span class="sd">        Args:</span>
<span class="sd">            value(object): the value to be deserialized according to the typeid</span>

<span class="sd">        Returns:</span>
<span class="sd">            the deserialized value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># FIXME complete list of types according to</span>
        <span class="c1"># https://www.semantic-mediawiki.org/wiki/Help:API:ask</span>
        <span class="c1"># Page https://www.semantic-mediawiki.org/wiki/Help:API:ask/Page</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_wpg&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;fulltext&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">unquote</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">pass</span>
        <span class="c1"># Text https://www.semantic-mediawiki.org/wiki/Help:API:ask/Text</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_txt&quot;</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_qty&quot;</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_num&quot;</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_dat&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;timestamp&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">ts</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">])</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># timezone aware</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
                    <span class="c1"># naive - for compatibility</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
                    <span class="c1">#  print (date.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;))</span>
                <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning timestamp </span><span class="si">%d</span><span class="s2"> is invalid: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ve</span><span class="p">)))</span>
                    <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># ignore faulty values</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: timestamp missing for value&quot;</span><span class="p">)</span>
                <span class="k">pass</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_eid&quot;</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;deserialize the given result record</span>
<span class="sd">        Args:</span>
<span class="sd">            result(dict): a single result record dict from the deserialiation of the ask query</span>
<span class="sd">        Returns:</span>
<span class="sd">            object: a single deserialized value according to my typeid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">po</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;printouts&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="ow">in</span> <span class="n">po</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">po</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">valueList</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">valueItem</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">valueList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deserializeSingle</span><span class="p">(</span><span class="n">valueItem</span><span class="p">))</span>
            <span class="c1"># handle lists</span>
            <span class="c1"># empty lists =&gt; None</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">valueList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="c1"># lists with one value -&gt; return the item (this unfortunately removes the list property of the value)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">valueList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">valueList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="c1"># only if there is a &quot;real&quot; list return it</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">valueList</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserializeSingle</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">PrintRequest</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">value</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;PrintRequest(label=&#39;</span><span class="si">%s</span><span class="s2">&#39; key=&#39;</span><span class="si">%s</span><span class="s2">&#39; redi=&#39;</span><span class="si">%s</span><span class="s2">&#39; typeid=&#39;</span><span class="si">%s</span><span class="s2">&#39; mode=</span><span class="si">%d</span><span class="s2"> format=&#39;</span><span class="si">%s</span><span class="s2">&#39;)&quot;</span>
            <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">redi</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">text</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="wikibot3rd.smw.PrintRequest.debug" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">debug</span> <span class="o">=</span> <span class="n">PrintRequest</span><span class="o">.</span><span class="n">debug</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>construct the given print request
see https://www.semantic-mediawiki.org/wiki/Serialization_(JSON)
:ivar smw: SMW context for this printrequest
:ivar label: the label of the printrequest
:ivar key:
:ivar redi:
:ivar typeid:
:ivar mode:
:ivar format:</p>
    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.PrintRequest.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">smw</span><span class="p">,</span> <span class="n">record</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>construct me from the given record
Args:
    smw(SMW): the SemanticMediaWiki context of this PrintRequest
    record(dict): the dict derived from the printrequest json serialization</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">smw</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    construct me from the given record</span>
<span class="sd">    Args:</span>
<span class="sd">        smw(SMW): the SemanticMediaWiki context of this PrintRequest</span>
<span class="sd">        record(dict): the dict derived from the printrequest json serialization</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">smw</span> <span class="o">=</span> <span class="n">smw</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">PrintRequest</span><span class="o">.</span><span class="n">debug</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;key&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">redi</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;redi&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;typeid&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="s2">&quot;mode&quot;</span><span class="p">])</span>
    <span class="k">if</span> <span class="s2">&quot;format&quot;</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="s2">&quot;format&quot;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.PrintRequest.deserialize" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deserialize</span><span class="p">(</span><span class="n">result</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>deserialize the given result record
Args:
    result(dict): a single result record dict from the deserialiation of the ask query
Returns:
    object: a single deserialized value according to my typeid</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;deserialize the given result record</span>
<span class="sd">    Args:</span>
<span class="sd">        result(dict): a single result record dict from the deserialiation of the ask query</span>
<span class="sd">    Returns:</span>
<span class="sd">        object: a single deserialized value according to my typeid</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">po</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;printouts&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="ow">in</span> <span class="n">po</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">po</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">valueList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">valueItem</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="n">valueList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deserializeSingle</span><span class="p">(</span><span class="n">valueItem</span><span class="p">))</span>
        <span class="c1"># handle lists</span>
        <span class="c1"># empty lists =&gt; None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">valueList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># lists with one value -&gt; return the item (this unfortunately removes the list property of the value)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">valueList</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">valueList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># only if there is a &quot;real&quot; list return it</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">valueList</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserializeSingle</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">PrintRequest</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)=&#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.PrintRequest.deserializeSingle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deserializeSingle</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>deserialize a single value
Args:
    value(object): the value to be deserialized according to the typeid</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the deserialized value</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">deserializeSingle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;deserialize a single value</span>
<span class="sd">    Args:</span>
<span class="sd">        value(object): the value to be deserialized according to the typeid</span>

<span class="sd">    Returns:</span>
<span class="sd">        the deserialized value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># FIXME complete list of types according to</span>
    <span class="c1"># https://www.semantic-mediawiki.org/wiki/Help:API:ask</span>
    <span class="c1"># Page https://www.semantic-mediawiki.org/wiki/Help:API:ask/Page</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_wpg&quot;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;fulltext&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">unquote</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">pass</span>
    <span class="c1"># Text https://www.semantic-mediawiki.org/wiki/Help:API:ask/Text</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_txt&quot;</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_qty&quot;</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_num&quot;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_dat&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="s2">&quot;timestamp&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="n">ts</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">])</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># timezone aware</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span>
                <span class="c1"># naive - for compatibility</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
                <span class="c1">#  print (date.strftime(&#39;%Y-%m-%d %H:%M:%S&#39;))</span>
            <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning timestamp </span><span class="si">%d</span><span class="s2"> is invalid: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ve</span><span class="p">)))</span>
                <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># ignore faulty values</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Warning: timestamp missing for value&quot;</span><span class="p">)</span>
            <span class="k">pass</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeid</span> <span class="o">==</span> <span class="s2">&quot;_eid&quot;</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.smw.QueryResultSizeExceedException" class="doc doc-heading">
            <code>QueryResultSizeExceedException</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>BaseException</code></p>


      <p>Raised if the results of a query can not completely be queried due to SMW result limits.</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">QueryResultSizeExceedException</span><span class="p">(</span><span class="ne">BaseException</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Raised if the results of a query can not completely be queried due to SMW result limits.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">result</span><span class="o">=</span><span class="p">[],</span>
        <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Query can not completely be queried due to SMW result limits.&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">getResults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the queried results before the exception was raised&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.QueryResultSizeExceedException.getResults" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getResults</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Returns the queried results before the exception was raised</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getResults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the queried results before the exception was raised&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.smw.SMW" class="doc doc-heading">
            <code>SMW</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


      <p>Semantic MediaWiki Access e.g. for ask API
see
* https://www.semantic-mediawiki.org/wiki/Help:API
* https://www.semantic-mediawiki.org/wiki/Serialization_(JSON)
* https://www.semantic-mediawiki.org/wiki/Help:API:askargs</p>
<p>adapted from Java SimpleGraph Module
https://github.com/BITPlan/com.bitplan.simplegraph/blob/master/simplegraph-smw/src/main/java/com/bitplan/simplegraph/smw/SmwSystem.java
:ivar site: the pywikibot site to use for requests
:ivar prefix: the path prefix for this site e.g. /wiki/</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SMW</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Semantic MediaWiki Access e.g. for ask API</span>
<span class="sd">    see</span>
<span class="sd">    * https://www.semantic-mediawiki.org/wiki/Help:API</span>
<span class="sd">    * https://www.semantic-mediawiki.org/wiki/Serialization_(JSON)</span>
<span class="sd">    * https://www.semantic-mediawiki.org/wiki/Help:API:askargs</span>

<span class="sd">    adapted from Java SimpleGraph Module</span>
<span class="sd">    https://github.com/BITPlan/com.bitplan.simplegraph/blob/master/simplegraph-smw/src/main/java/com/bitplan/simplegraph/smw/SmwSystem.java</span>
<span class="sd">    :ivar site: the pywikibot site to use for requests</span>
<span class="sd">    :ivar prefix: the path prefix for this site e.g. /wiki/</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        Args:</span>
<span class="sd">            site: the site to use (optional)</span>
<span class="sd">            showProgess(bool): if progress should be shown</span>
<span class="sd">            queryDivision(int): Defines the number of subintervals the query is divided into (must be greater equal 1)</span>
<span class="sd">            debug(bool): if debugging should be activated - default: False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">site</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span> <span class="o">=</span> <span class="n">showProgress</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queryDivision</span> <span class="o">=</span> <span class="n">queryDivision</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">splitClause</span> <span class="o">=</span> <span class="n">SplitClause</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>

    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rawresult</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;deserialize the given rawresult according to</span>
<span class="sd">        https://www.semantic-mediawiki.org/wiki/Serialization_(JSON)</span>

<span class="sd">        Args:</span>
<span class="sd">            rawresult(dict): contains printrequests and results which need to be merged</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: query mainlabel (usually pageTitle) mapped to the corresponding dict of printrequests with label</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resultDict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">rawresult</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">resultDict</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;query&quot;</span> <span class="ow">in</span> <span class="n">rawresult</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;invalid query result - &#39;query&#39; missing&quot;</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">rawresult</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;printrequests&quot;</span> <span class="ow">in</span> <span class="n">query</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;invalid query result - &#39;printrequests&#39; missing&quot;</span><span class="p">)</span>
        <span class="n">printrequests</span> <span class="o">=</span> <span class="n">query</span><span class="p">[</span><span class="s2">&quot;printrequests&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;results&quot;</span> <span class="ow">in</span> <span class="n">query</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;invalid query result - &#39;results&#39; missing&quot;</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">query</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">]</span>
        <span class="n">prdict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">printrequests</span><span class="p">:</span>
            <span class="n">pr</span> <span class="o">=</span> <span class="n">PrintRequest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">)</span>
            <span class="n">prdict</span><span class="p">[</span><span class="n">pr</span><span class="o">.</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">pr</span>

        <span class="k">if</span> <span class="n">results</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">record</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="n">recordDict</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">prdict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">pr</span> <span class="o">=</span> <span class="n">prdict</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
                    <span class="n">recordDict</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
                <span class="n">resultDict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">recordDict</span>
        <span class="k">return</span> <span class="n">resultDict</span>

    <span class="k">def</span> <span class="nf">fixAsk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ask</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        fix an ask String to be usable for the API</span>
<span class="sd">        Args:</span>
<span class="sd">            ask: - a &quot;normal&quot; ask query</span>

<span class="sd">        Returns:</span>
<span class="sd">             the fixed asked query</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># ^\\s*\\{\\{</span>
        <span class="c1"># remove {{ with surrounding white space at beginning</span>
        <span class="n">fixedAsk</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^\s*\{\{&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">ask</span><span class="p">)</span>
        <span class="c1"># remove #ask:</span>
        <span class="n">fixedAsk</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;#ask:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">fixedAsk</span><span class="p">)</span>
        <span class="c1"># remove }} with surrounding white space at end</span>
        <span class="n">fixedAsk</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\}\}\s*$&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">fixedAsk</span><span class="p">)</span>
        <span class="c1"># split by lines (with side effect to remove newlines)</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">fixedAsk</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\n&quot;</span><span class="p">)</span>
        <span class="n">fixedAsk</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
            <span class="c1">#  remove whitespace around part</span>
            <span class="n">part</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="c1"># remove whitespace around pipe sign</span>
            <span class="n">part</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s*\|\s*&quot;</span><span class="p">,</span> <span class="s2">&quot;|&quot;</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
            <span class="c1"># remove whitespace around assignment =</span>
            <span class="n">part</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s*=\s*&quot;</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
            <span class="c1"># remove whitespace in query parts</span>
            <span class="n">part</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\]\s*\[&quot;</span><span class="p">,</span> <span class="s2">&quot;][&quot;</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
            <span class="n">fixedAsk</span> <span class="o">=</span> <span class="n">fixedAsk</span> <span class="o">+</span> <span class="n">part</span>
        <span class="k">return</span> <span class="n">fixedAsk</span>

    <span class="k">def</span> <span class="nf">getConcept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ask</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;get the concept from the given ask query&quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\[\[Concept:(.+?)\]\]&quot;</span><span class="p">,</span> <span class="n">ask</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">groups</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="n">argumentRegex</span> <span class="o">=</span> <span class="nb">staticmethod</span><span class="p">(</span><span class="k">lambda</span> <span class="n">arg</span><span class="p">:</span> <span class="sa">r</span><span class="s2">&quot;\| *&quot;</span> <span class="o">+</span> <span class="n">arg</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot; *= *\d+(?=\s|\||$)&quot;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getOuterMostArgumentValueOfQuery</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts the integer value of the given argument from the given query</span>
<span class="sd">        Args:</span>
<span class="sd">            argument(string): Argument that should be extracted</span>
<span class="sd">            query(string): smw query where the given argument is assumed</span>

<span class="sd">        Returns:</span>
<span class="sd">            Returns integer value of the given argument in the given query.</span>
<span class="sd">            If the argument occurs multiple times the last one is returned.</span>
<span class="sd">            If it does not occur return None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">argument</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">query</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">SMW</span><span class="o">.</span><span class="n">argumentRegex</span><span class="p">(</span><span class="n">argument</span><span class="p">),</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;[0-9]+&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">group</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMW.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructor
Args:
    site: the site to use (optional)
    showProgess(bool): if progress should be shown
    queryDivision(int): Defines the number of subintervals the query is divided into (must be greater equal 1)
    debug(bool): if debugging should be activated - default: False</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    Args:</span>
<span class="sd">        site: the site to use (optional)</span>
<span class="sd">        showProgess(bool): if progress should be shown</span>
<span class="sd">        queryDivision(int): Defines the number of subintervals the query is divided into (must be greater equal 1)</span>
<span class="sd">        debug(bool): if debugging should be activated - default: False</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">site</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span> <span class="o">=</span> <span class="n">showProgress</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">queryDivision</span> <span class="o">=</span> <span class="n">queryDivision</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">splitClause</span> <span class="o">=</span> <span class="n">SplitClause</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMW.deserialize" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deserialize</span><span class="p">(</span><span class="n">rawresult</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>deserialize the given rawresult according to
https://www.semantic-mediawiki.org/wiki/Serialization_(JSON)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>rawresult(dict)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>contains printrequests and results which need to be merged</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>query mainlabel (usually pageTitle) mapped to the corresponding dict of printrequests with label</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rawresult</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;deserialize the given rawresult according to</span>
<span class="sd">    https://www.semantic-mediawiki.org/wiki/Serialization_(JSON)</span>

<span class="sd">    Args:</span>
<span class="sd">        rawresult(dict): contains printrequests and results which need to be merged</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: query mainlabel (usually pageTitle) mapped to the corresponding dict of printrequests with label</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resultDict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">rawresult</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">resultDict</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;query&quot;</span> <span class="ow">in</span> <span class="n">rawresult</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;invalid query result - &#39;query&#39; missing&quot;</span><span class="p">)</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">rawresult</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;printrequests&quot;</span> <span class="ow">in</span> <span class="n">query</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;invalid query result - &#39;printrequests&#39; missing&quot;</span><span class="p">)</span>
    <span class="n">printrequests</span> <span class="o">=</span> <span class="n">query</span><span class="p">[</span><span class="s2">&quot;printrequests&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;results&quot;</span> <span class="ow">in</span> <span class="n">query</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;invalid query result - &#39;results&#39; missing&quot;</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">query</span><span class="p">[</span><span class="s2">&quot;results&quot;</span><span class="p">]</span>
    <span class="n">prdict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">printrequests</span><span class="p">:</span>
        <span class="n">pr</span> <span class="o">=</span> <span class="n">PrintRequest</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">)</span>
        <span class="n">prdict</span><span class="p">[</span><span class="n">pr</span><span class="o">.</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">pr</span>

    <span class="k">if</span> <span class="n">results</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">record</span> <span class="o">=</span> <span class="n">results</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="n">recordDict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">prdict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">pr</span> <span class="o">=</span> <span class="n">prdict</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
                <span class="n">recordDict</span><span class="p">[</span><span class="n">label</span><span class="p">]</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
            <span class="n">resultDict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">recordDict</span>
    <span class="k">return</span> <span class="n">resultDict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMW.fixAsk" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fixAsk</span><span class="p">(</span><span class="n">ask</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>fix an ask String to be usable for the API
Args:
    ask: - a "normal" ask query</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the fixed asked query</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fixAsk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ask</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    fix an ask String to be usable for the API</span>
<span class="sd">    Args:</span>
<span class="sd">        ask: - a &quot;normal&quot; ask query</span>

<span class="sd">    Returns:</span>
<span class="sd">         the fixed asked query</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># ^\\s*\\{\\{</span>
    <span class="c1"># remove {{ with surrounding white space at beginning</span>
    <span class="n">fixedAsk</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;^\s*\{\{&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">ask</span><span class="p">)</span>
    <span class="c1"># remove #ask:</span>
    <span class="n">fixedAsk</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;#ask:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">fixedAsk</span><span class="p">)</span>
    <span class="c1"># remove }} with surrounding white space at end</span>
    <span class="n">fixedAsk</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\}\}\s*$&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">fixedAsk</span><span class="p">)</span>
    <span class="c1"># split by lines (with side effect to remove newlines)</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="n">fixedAsk</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\n&quot;</span><span class="p">)</span>
    <span class="n">fixedAsk</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">:</span>
        <span class="c1">#  remove whitespace around part</span>
        <span class="n">part</span> <span class="o">=</span> <span class="n">part</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="c1"># remove whitespace around pipe sign</span>
        <span class="n">part</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s*\|\s*&quot;</span><span class="p">,</span> <span class="s2">&quot;|&quot;</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
        <span class="c1"># remove whitespace around assignment =</span>
        <span class="n">part</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\s*=\s*&quot;</span><span class="p">,</span> <span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
        <span class="c1"># remove whitespace in query parts</span>
        <span class="n">part</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\]\s*\[&quot;</span><span class="p">,</span> <span class="s2">&quot;][&quot;</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
        <span class="n">fixedAsk</span> <span class="o">=</span> <span class="n">fixedAsk</span> <span class="o">+</span> <span class="n">part</span>
    <span class="k">return</span> <span class="n">fixedAsk</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMW.getConcept" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getConcept</span><span class="p">(</span><span class="n">ask</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the concept from the given ask query</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getConcept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ask</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;get the concept from the given ask query&quot;&quot;&quot;</span>
    <span class="n">m</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\[\[Concept:(.+?)\]\]&quot;</span><span class="p">,</span> <span class="n">ask</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">m</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">groups</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMW.getOuterMostArgumentValueOfQuery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getOuterMostArgumentValueOfQuery</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Extracts the integer value of the given argument from the given query
Args:
    argument(string): Argument that should be extracted
    query(string): smw query where the given argument is assumed</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Returns integer value of the given argument in the given query.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the argument occurs multiple times the last one is returned.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If it does not occur return None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getOuterMostArgumentValueOfQuery</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the integer value of the given argument from the given query</span>
<span class="sd">    Args:</span>
<span class="sd">        argument(string): Argument that should be extracted</span>
<span class="sd">        query(string): smw query where the given argument is assumed</span>

<span class="sd">    Returns:</span>
<span class="sd">        Returns integer value of the given argument in the given query.</span>
<span class="sd">        If the argument occurs multiple times the last one is returned.</span>
<span class="sd">        If it does not occur return None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">argument</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">query</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">SMW</span><span class="o">.</span><span class="n">argumentRegex</span><span class="p">(</span><span class="n">argument</span><span class="p">),</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s2">&quot;[0-9]+&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">group</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.smw.SMWBot" class="doc doc-heading">
            <code>SMWBot</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wikibot3rd.smw.SMW" href="#wikibot3rd.smw.SMW">SMW</a></code></p>


      <p>Semantic MediaWiki access using pywikibot library</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SMWBot</span><span class="p">(</span><span class="n">SMW</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Semantic MediaWiki access using pywikibot library</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor</span>

<span class="sd">        Args:</span>
<span class="sd">            site:</span>
<span class="sd">            prefix(str): the prefix to use</span>
<span class="sd">            showProgress(bool): show progress if true</span>
<span class="sd">            debug(bool): set debugging mode if true</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SMWBot</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">site</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="n">showProgress</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span>
        <span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">submit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;submit the request with the given parameters</span>
<span class="sd">        Args:</span>
<span class="sd">            parameters(list): the parameters to use for the SMW API request</span>
<span class="sd">        Returns:</span>
<span class="sd">            dict: the submit result</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;Request&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">pywikibot.data.api</span> <span class="kn">import</span> <span class="n">Request</span>

        <span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">pywikibot</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">TimeoutError</span> <span class="k">as</span> <span class="n">_toe</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;submit for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="si">}</span><span class="s2"> failed due to pywikibot TimeoutError&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;see https://www.semantic-mediawiki.org/wiki/Help:API:smwinfo&quot;&quot;&quot;</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;smwinfo&quot;</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">rawquery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ask</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">         send a query see https://www.semantic-mediawiki.org/wiki/Help:Inline_queries#Parser_function_.23ask</span>

<span class="sd">        Args:</span>
<span class="sd">            ask(str): the SMW ASK query as it would be used in MediaWiki markup</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># allow usage of original Wiki ask content - strip all non needed parts</span>
        <span class="n">fixedAsk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixAsk</span><span class="p">(</span><span class="n">ask</span><span class="p">)</span>
        <span class="c1"># set parameters for request</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;ask&quot;</span><span class="p">,</span> <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">fixedAsk</span><span class="p">}</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ask</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        send a query and deserialize it</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rawresult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawquery</span><span class="p">(</span><span class="n">ask</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">rawresult</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWBot.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>constructor</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>site</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>prefix(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the prefix to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>showProgress(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>show progress if true</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>debug(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>set debugging mode if true</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor</span>

<span class="sd">    Args:</span>
<span class="sd">        site:</span>
<span class="sd">        prefix(str): the prefix to use</span>
<span class="sd">        showProgress(bool): show progress if true</span>
<span class="sd">        debug(bool): set debugging mode if true</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">SMWBot</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">site</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="n">showProgress</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span>
    <span class="p">)</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWBot.info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">info</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>see https://www.semantic-mediawiki.org/wiki/Help:API:smwinfo</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;see https://www.semantic-mediawiki.org/wiki/Help:API:smwinfo&quot;&quot;&quot;</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;smwinfo&quot;</span><span class="p">}</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWBot.query" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">query</span><span class="p">(</span><span class="n">ask</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>send a query and deserialize it</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ask</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    send a query and deserialize it</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rawresult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawquery</span><span class="p">(</span><span class="n">ask</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">rawresult</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWBot.rawquery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rawquery</span><span class="p">(</span><span class="n">ask</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>send a query see https://www.semantic-mediawiki.org/wiki/Help:Inline_queries#Parser_function_.23ask</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>ask(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SMW ASK query as it would be used in MediaWiki markup</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">rawquery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ask</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     send a query see https://www.semantic-mediawiki.org/wiki/Help:Inline_queries#Parser_function_.23ask</span>

<span class="sd">    Args:</span>
<span class="sd">        ask(str): the SMW ASK query as it would be used in MediaWiki markup</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># allow usage of original Wiki ask content - strip all non needed parts</span>
    <span class="n">fixedAsk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixAsk</span><span class="p">(</span><span class="n">ask</span><span class="p">)</span>
    <span class="c1"># set parameters for request</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;ask&quot;</span><span class="p">,</span> <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">fixedAsk</span><span class="p">}</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWBot.submit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">submit</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>submit the request with the given parameters
Args:
    parameters(list): the parameters to use for the SMW API request
Returns:
    dict: the submit result</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">submit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;submit the request with the given parameters</span>
<span class="sd">    Args:</span>
<span class="sd">        parameters(list): the parameters to use for the SMW API request</span>
<span class="sd">    Returns:</span>
<span class="sd">        dict: the submit result</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;Request&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">pywikibot.data.api</span> <span class="kn">import</span> <span class="n">Request</span>

    <span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span><span class="n">site</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="p">,</span> <span class="n">parameters</span><span class="o">=</span><span class="n">parameters</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">submit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">pywikibot</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">TimeoutError</span> <span class="k">as</span> <span class="n">_toe</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;submit for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="si">}</span><span class="s2"> failed due to pywikibot TimeoutError&quot;</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.smw.SMWClient" class="doc doc-heading">
            <code>SMWClient</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wikibot3rd.smw.SMW" href="#wikibot3rd.smw.SMW">SMW</a></code></p>


      <p>Semantic MediaWiki access using mw client library</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SMWClient</span><span class="p">(</span><span class="n">SMW</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Semantic MediaWiki access using mw client library</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">site</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SMWClient</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">site</span><span class="p">,</span>
            <span class="n">prefix</span><span class="p">,</span>
            <span class="n">showProgress</span><span class="o">=</span><span class="n">showProgress</span><span class="p">,</span>
            <span class="n">queryDivision</span><span class="o">=</span><span class="n">queryDivision</span><span class="p">,</span>
            <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;see https://www.semantic-mediawiki.org/wiki/Help:API:smwinfo&quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">raw_api</span><span class="p">(</span><span class="s2">&quot;smwinfo&quot;</span><span class="p">,</span> <span class="n">http_method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">handle_api_result</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>  <span class="c1"># raises APIError on error</span>

        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span> <span class="nf">ask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ask a query against Semantic MediaWiki.</span>

<span class="sd">        API doc: https://semantic-mediawiki.org/wiki/Ask_API</span>

<span class="sd">        The query is devided into multiple subqueries if the results of the query exeed the defined threshold.</span>
<span class="sd">        If this happens the query is executed multiple times to retrieve all results without passing the threshold.</span>


<span class="sd">        Args:</span>
<span class="sd">            query(str): SMW ask query to be executed</span>
<span class="sd">            title(str): title of query (optional)</span>
<span class="sd">            limit(int): the maximum number of results to be returned -</span>
<span class="sd">                please note that SMW configuration will also limit results on the server side</span>

<span class="sd">        Returns:</span>
<span class="sd">            Generator for retrieving all search results, with each answer as a dictionary.</span>
<span class="sd">            If the query is invalid, an APIError is raised. A valid query with zero</span>
<span class="sd">            results will not raise any error.</span>

<span class="sd">        Examples:</span>

<span class="sd">            &gt;&gt;&gt; query = &quot;[[Category:my cat]]|[[Has name::a name]]|?Has property&quot;</span>
<span class="sd">            &gt;&gt;&gt; for answer in site.ask(query):</span>
<span class="sd">            &gt;&gt;&gt;     for title, data in answer.items()</span>
<span class="sd">            &gt;&gt;&gt;         print(title)</span>
<span class="sd">            &gt;&gt;&gt;         print(data)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># kwargs = {}</span>
        <span class="c1"># if title is None:</span>
        <span class="c1">#    kwargs[&#39;title&#39;] = title</span>

        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># if limit is not defined (via cmd-line), check if defined in query</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="n">SMW</span><span class="o">.</span><span class="n">getOuterMostArgumentValueOfQuery</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryDivision</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">askForAllResults</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">QueryResultSizeExceedException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="n">results</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getResults</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">askPartitionQuery</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">askPartitionQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Splits the query into multiple subqueries by determining the &#39;modification date&#39; interval in which all results</span>
<span class="sd">        lie. This interval is then divided into subintervals. The number of subintervals is defined by the user via</span>
<span class="sd">        commandline. The results of all subqueries are then returned.</span>
<span class="sd">        Args:</span>
<span class="sd">            query(string): the SMW inline query to be send via api</span>
<span class="sd">            limit(string): limit of the query</span>
<span class="sd">        Returns:</span>
<span class="sd">            All results of the given query.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getBoundariesOfQuery</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">results</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Start: </span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">, End: </span><span class="si">{</span><span class="n">end</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">numIntervals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryDivision</span>
        <span class="n">calcIntervalBound</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">start</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">n</span> <span class="o">*</span> <span class="n">lenSubinterval</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
            <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span>
        <span class="p">)</span>
        <span class="n">calcLimit</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">limit</span><span class="p">,</span> <span class="n">numRes</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">limit</span> <span class="o">-</span> <span class="n">numResults</span>
        <span class="n">done</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">numResults</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">done</span><span class="p">:</span>
            <span class="n">lenSubinterval</span> <span class="o">=</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span> <span class="o">/</span> <span class="n">numIntervals</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numIntervals</span><span class="p">):</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query </span><span class="si">{</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">numIntervals</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
                <span class="n">tempLowerBound</span> <span class="o">=</span> <span class="n">calcIntervalBound</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
                <span class="n">tempUpperBound</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">calcIntervalBound</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">numIntervals</span><span class="p">)</span> <span class="k">else</span> <span class="n">end</span>
                <span class="p">)</span>
                <span class="n">queryBounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitClause</span><span class="o">.</span><span class="n">queryBounds</span><span class="p">(</span>
                    <span class="n">tempLowerBound</span><span class="p">,</span> <span class="n">tempUpperBound</span>
                <span class="p">)</span>
                <span class="n">queryParam</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">|</span><span class="si">{</span><span class="n">queryBounds</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">tempRes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">askForAllResults</span><span class="p">(</span>
                        <span class="n">queryParam</span><span class="p">,</span> <span class="n">calcLimit</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">numResults</span><span class="p">)</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">tempRes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">tempRes</span><span class="p">:</span>
                            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
                            <span class="n">query_field</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">query_field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">meta_field</span> <span class="o">=</span> <span class="n">query_field</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">meta_field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">numResults</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">meta_field</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;count&quot;</span><span class="p">))</span>
                <span class="k">except</span> <span class="n">QueryResultSizeExceedException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="c1"># Too many results for current subinterval n -&gt; print error and return the results upto this point</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">getResults</span><span class="p">():</span>
                        <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">getResults</span><span class="p">():</span>
                            <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
                    <span class="n">numResults</span> <span class="o">=</span> <span class="mi">0</span>
                    <span class="k">break</span>
                <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">limit</span> <span class="o">&lt;=</span> <span class="n">numResults</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Defined limit of </span><span class="si">{</span><span class="n">limit</span><span class="si">}</span><span class="s2"> reached - ending querying&quot;</span><span class="p">)</span>
                    <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="k">break</span>
            <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">results</span>

    <span class="k">def</span> <span class="nf">getTimeStampBoundary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queryparam</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query according to a DATE e.g. MODIFICATION_DATE in the given order</span>

<span class="sd">        Args:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">queryparamBoundary</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">queryparam</span><span class="si">}</span><span class="s2">|order=</span><span class="si">{</span><span class="n">order</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">resultsBoundary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">raw_api</span><span class="p">(</span>
            <span class="s2">&quot;ask&quot;</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">queryparamBoundary</span><span class="p">,</span> <span class="n">http_method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">handle_api_result</span><span class="p">(</span><span class="n">resultsBoundary</span><span class="p">)</span>
        <span class="n">deserializedResult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">resultsBoundary</span><span class="p">)</span>

        <span class="n">deserializedValues</span> <span class="o">=</span> <span class="n">deserializedResult</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitClause</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">deserializedValues</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">date</span>

    <span class="k">def</span> <span class="nf">getBoundariesOfQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves the time interval, lower and upper bound, based on the modification date in which the results of the</span>
<span class="sd">        given query lie.</span>
<span class="sd">        Args:</span>
<span class="sd">            query(string): the SMW inline query to be send via api</span>
<span class="sd">        Returns:</span>
<span class="sd">            (Datetime, Datetime): Returns the time interval (based on modification date) in which all results of the</span>
<span class="sd">            query lie potentially the start end end might be None if an error occured or the input is invalid</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitClause</span><span class="o">.</span><span class="n">getFirst</span><span class="p">()</span>
        <span class="n">queryparam</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">|</span><span class="si">{</span><span class="n">first</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTimeStampBoundary</span><span class="p">(</span><span class="n">queryparam</span><span class="p">,</span> <span class="s2">&quot;asc&quot;</span><span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTimeStampBoundary</span><span class="p">(</span><span class="n">queryparam</span><span class="p">,</span> <span class="s2">&quot;desc&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">askForAllResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{}):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes the query until all results are received of the given limit is reached.</span>
<span class="sd">        If the SMW results limit is reached before all results are retrieved the QueryResultSizeExceedException is raised.</span>
<span class="sd">        Args:</span>
<span class="sd">            query(string): the SMW inline query to be send via api</span>
<span class="sd">            limit(int): limit for the query results, None (default) for all results</span>
<span class="sd">            kwargs:</span>
<span class="sd">        Returns:</span>
<span class="sd">            query results</span>
<span class="sd">        Raises:</span>
<span class="sd">            QueryResultSizeExceedException: Raised if not all results can be retrieved</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endShowProgress</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">showProgress</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="p">(</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span> <span class="o">%</span> <span class="mi">80</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">showProgress</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">done</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">done</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">:</span>
                <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">count</span> <span class="o">%</span> <span class="mi">80</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">sep</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">queryParam</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{query}</span><span class="s2">|offset=</span><span class="si">{offset}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">queryParam</span> <span class="o">+=</span> <span class="s2">&quot;|limit=</span><span class="si">{limit}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
            <span class="c1"># print(f&quot;QueryPram: {queryParam}&quot;)   #debug purposes</span>
            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">raw_api</span><span class="p">(</span>
                <span class="s2">&quot;ask&quot;</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">queryParam</span><span class="p">,</span> <span class="n">http_method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">handle_api_result</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>  <span class="c1"># raises APIError on error</span>
            <span class="n">continueOffset</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;query-continue-offset&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">continueOffset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">continueOffset</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
                    <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="p">(</span>
                    <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="ow">and</span> <span class="ow">not</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">)</span>
                <span class="p">)</span> <span class="ow">or</span> <span class="n">continueOffset</span> <span class="o">&lt;</span> <span class="n">offset</span><span class="p">:</span>
                    <span class="c1"># contine-offset is set but result is empty</span>
                    <span class="n">endShowProgress</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
                    <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
                    <span class="k">raise</span> <span class="n">QueryResultSizeExceedException</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="n">res</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">continueOffset</span> <span class="o">&lt;</span> <span class="n">offset</span><span class="p">:</span>
                    <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">offset</span> <span class="o">=</span> <span class="n">continueOffset</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="n">endShowProgress</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">rawquery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">askQuery</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        run the given askQuery and return the raw result</span>

<span class="sd">        Args:</span>
<span class="sd">            askQuery(string): the SMW inline query to be send via api</span>
<span class="sd">            title(string): the title (if any)</span>
<span class="sd">            limit(int): the maximum number of records to be retrieved (if any)</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: the raw query result as returned by the ask API</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fixedAsk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixAsk</span><span class="p">(</span><span class="n">askQuery</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">singleResult</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="n">fixedAsk</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">limit</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">result</span> <span class="o">=</span> <span class="n">singleResult</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">singleResults</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="s2">&quot;query&quot;</span> <span class="ow">in</span> <span class="n">singleResult</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s2">&quot;results&quot;</span> <span class="ow">in</span> <span class="n">singleResult</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]:</span>
                        <span class="n">singleResults</span> <span class="o">=</span> <span class="n">singleResult</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;results&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">singleResults</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s2">&quot;query&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s2">&quot;results&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]:</span>
                            <span class="n">results</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;results&quot;</span><span class="p">]</span>
                            <span class="n">results</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">singleResults</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">result</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;results&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">singleResults</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;results&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">singleResults</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">askQuery</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        run query and return list of Dicts</span>

<span class="sd">        Args:</span>
<span class="sd">            askQuery(string): the SMW inline query to be send via api</span>
<span class="sd">            title(string): the title (if any)</span>
<span class="sd">            limit(int): the maximum number of records to be retrieved (if any)</span>

<span class="sd">        Return:</span>
<span class="sd">            dict: mainlabel as key and value is a dict of the associated property values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rawresult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawquery</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
        <span class="n">resultDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">rawresult</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resultDict</span>

    <span class="k">def</span> <span class="nf">updateProgress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">:</span>
            <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">count</span> <span class="o">%</span> <span class="mi">80</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">sep</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWClient.ask" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ask</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Ask a query against Semantic MediaWiki.</p>
<p>API doc: https://semantic-mediawiki.org/wiki/Ask_API</p>
<p>The query is devided into multiple subqueries if the results of the query exeed the defined threshold.
If this happens the query is executed multiple times to retrieve all results without passing the threshold.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>query(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SMW ask query to be executed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>title(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>title of query (optional)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limit(int)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the maximum number of results to be returned -
please note that SMW configuration will also limit results on the server side</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Generator for retrieving all search results, with each answer as a dictionary.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the query is invalid, an APIError is raised. A valid query with zero</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>results will not raise any error.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Examples:</p>
<pre><code>&gt;&gt;&gt; query = "[[Category:my cat]]|[[Has name::a name]]|?Has property"
&gt;&gt;&gt; for answer in site.ask(query):
&gt;&gt;&gt;     for title, data in answer.items()
&gt;&gt;&gt;         print(title)
&gt;&gt;&gt;         print(data)
</code></pre>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">ask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ask a query against Semantic MediaWiki.</span>

<span class="sd">    API doc: https://semantic-mediawiki.org/wiki/Ask_API</span>

<span class="sd">    The query is devided into multiple subqueries if the results of the query exeed the defined threshold.</span>
<span class="sd">    If this happens the query is executed multiple times to retrieve all results without passing the threshold.</span>


<span class="sd">    Args:</span>
<span class="sd">        query(str): SMW ask query to be executed</span>
<span class="sd">        title(str): title of query (optional)</span>
<span class="sd">        limit(int): the maximum number of results to be returned -</span>
<span class="sd">            please note that SMW configuration will also limit results on the server side</span>

<span class="sd">    Returns:</span>
<span class="sd">        Generator for retrieving all search results, with each answer as a dictionary.</span>
<span class="sd">        If the query is invalid, an APIError is raised. A valid query with zero</span>
<span class="sd">        results will not raise any error.</span>

<span class="sd">    Examples:</span>

<span class="sd">        &gt;&gt;&gt; query = &quot;[[Category:my cat]]|[[Has name::a name]]|?Has property&quot;</span>
<span class="sd">        &gt;&gt;&gt; for answer in site.ask(query):</span>
<span class="sd">        &gt;&gt;&gt;     for title, data in answer.items()</span>
<span class="sd">        &gt;&gt;&gt;         print(title)</span>
<span class="sd">        &gt;&gt;&gt;         print(data)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># kwargs = {}</span>
    <span class="c1"># if title is None:</span>
    <span class="c1">#    kwargs[&#39;title&#39;] = title</span>

    <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># if limit is not defined (via cmd-line), check if defined in query</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="n">SMW</span><span class="o">.</span><span class="n">getOuterMostArgumentValueOfQuery</span><span class="p">(</span><span class="s2">&quot;limit&quot;</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryDivision</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">askForAllResults</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">QueryResultSizeExceedException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
            <span class="n">results</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">getResults</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">askPartitionQuery</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">res</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWClient.askForAllResults" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">askForAllResults</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{})</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Executes the query until all results are received of the given limit is reached.
If the SMW results limit is reached before all results are retrieved the QueryResultSizeExceedException is raised.
Args:
    query(string): the SMW inline query to be send via api
    limit(int): limit for the query results, None (default) for all results
    kwargs:
Returns:
    query results
Raises:
    QueryResultSizeExceedException: Raised if not all results can be retrieved</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">askForAllResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{}):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes the query until all results are received of the given limit is reached.</span>
<span class="sd">    If the SMW results limit is reached before all results are retrieved the QueryResultSizeExceedException is raised.</span>
<span class="sd">    Args:</span>
<span class="sd">        query(string): the SMW inline query to be send via api</span>
<span class="sd">        limit(int): limit for the query results, None (default) for all results</span>
<span class="sd">        kwargs:</span>
<span class="sd">    Returns:</span>
<span class="sd">        query results</span>
<span class="sd">    Raises:</span>
<span class="sd">        QueryResultSizeExceedException: Raised if not all results can be retrieved</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endShowProgress</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">showProgress</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="p">(</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">c</span> <span class="o">%</span> <span class="mi">80</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">if</span> <span class="n">showProgress</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="p">)</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">done</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">done</span><span class="p">:</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">:</span>
            <span class="n">sep</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">count</span> <span class="o">%</span> <span class="mi">80</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">sep</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">queryParam</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{query}</span><span class="s2">|offset=</span><span class="si">{offset}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">queryParam</span> <span class="o">+=</span> <span class="s2">&quot;|limit=</span><span class="si">{limit}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
        <span class="c1"># print(f&quot;QueryPram: {queryParam}&quot;)   #debug purposes</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">raw_api</span><span class="p">(</span>
            <span class="s2">&quot;ask&quot;</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">queryParam</span><span class="p">,</span> <span class="n">http_method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">handle_api_result</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>  <span class="c1"># raises APIError on error</span>
        <span class="n">continueOffset</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;query-continue-offset&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">continueOffset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">continueOffset</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
                <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="p">(</span>
                <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">results</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;results&quot;</span><span class="p">)</span>
            <span class="p">)</span> <span class="ow">or</span> <span class="n">continueOffset</span> <span class="o">&lt;</span> <span class="n">offset</span><span class="p">:</span>
                <span class="c1"># contine-offset is set but result is empty</span>
                <span class="n">endShowProgress</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
                <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
                <span class="k">raise</span> <span class="n">QueryResultSizeExceedException</span><span class="p">(</span><span class="n">result</span><span class="o">=</span><span class="n">res</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">continueOffset</span> <span class="o">&lt;</span> <span class="n">offset</span><span class="p">:</span>
                <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">continueOffset</span>
        <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
    <span class="n">endShowProgress</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">res</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWClient.askPartitionQuery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">askPartitionQuery</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Splits the query into multiple subqueries by determining the 'modification date' interval in which all results
lie. This interval is then divided into subintervals. The number of subintervals is defined by the user via
commandline. The results of all subqueries are then returned.
Args:
    query(string): the SMW inline query to be send via api
    limit(string): limit of the query
Returns:
    All results of the given query.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">askPartitionQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Splits the query into multiple subqueries by determining the &#39;modification date&#39; interval in which all results</span>
<span class="sd">    lie. This interval is then divided into subintervals. The number of subintervals is defined by the user via</span>
<span class="sd">    commandline. The results of all subqueries are then returned.</span>
<span class="sd">    Args:</span>
<span class="sd">        query(string): the SMW inline query to be send via api</span>
<span class="sd">        limit(string): limit of the query</span>
<span class="sd">    Returns:</span>
<span class="sd">        All results of the given query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getBoundariesOfQuery</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">start</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">end</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">results</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Start: </span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s2">, End: </span><span class="si">{</span><span class="n">end</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">numIntervals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryDivision</span>
    <span class="n">calcIntervalBound</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">start</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="p">(</span><span class="n">start</span> <span class="o">+</span> <span class="n">n</span> <span class="o">*</span> <span class="n">lenSubinterval</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
        <span class="n">microsecond</span><span class="o">=</span><span class="mi">0</span>
    <span class="p">)</span>
    <span class="n">calcLimit</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">limit</span><span class="p">,</span> <span class="n">numRes</span><span class="p">:</span> <span class="kc">None</span> <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">limit</span> <span class="o">-</span> <span class="n">numResults</span>
    <span class="n">done</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">numResults</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">done</span><span class="p">:</span>
        <span class="n">lenSubinterval</span> <span class="o">=</span> <span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">)</span> <span class="o">/</span> <span class="n">numIntervals</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numIntervals</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Query </span><span class="si">{</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">numIntervals</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
            <span class="n">tempLowerBound</span> <span class="o">=</span> <span class="n">calcIntervalBound</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
            <span class="n">tempUpperBound</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">calcIntervalBound</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">numIntervals</span><span class="p">)</span> <span class="k">else</span> <span class="n">end</span>
            <span class="p">)</span>
            <span class="n">queryBounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitClause</span><span class="o">.</span><span class="n">queryBounds</span><span class="p">(</span>
                <span class="n">tempLowerBound</span><span class="p">,</span> <span class="n">tempUpperBound</span>
            <span class="p">)</span>
            <span class="n">queryParam</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">|</span><span class="si">{</span><span class="n">queryBounds</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">tempRes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">askForAllResults</span><span class="p">(</span>
                    <span class="n">queryParam</span><span class="p">,</span> <span class="n">calcLimit</span><span class="p">(</span><span class="n">limit</span><span class="p">,</span> <span class="n">numResults</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">tempRes</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">tempRes</span><span class="p">:</span>
                        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
                        <span class="n">query_field</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;query&quot;</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">query_field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">meta_field</span> <span class="o">=</span> <span class="n">query_field</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">meta_field</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">numResults</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">meta_field</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;count&quot;</span><span class="p">))</span>
            <span class="k">except</span> <span class="n">QueryResultSizeExceedException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="c1"># Too many results for current subinterval n -&gt; print error and return the results upto this point</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">getResults</span><span class="p">():</span>
                    <span class="k">for</span> <span class="n">res</span> <span class="ow">in</span> <span class="n">e</span><span class="o">.</span><span class="n">getResults</span><span class="p">():</span>
                        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
                <span class="n">numResults</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="k">break</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">limit</span> <span class="o">&lt;=</span> <span class="n">numResults</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showProgress</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Defined limit of </span><span class="si">{</span><span class="n">limit</span><span class="si">}</span><span class="s2"> reached - ending querying&quot;</span><span class="p">)</span>
                <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
        <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWClient.getBoundariesOfQuery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getBoundariesOfQuery</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Retrieves the time interval, lower and upper bound, based on the modification date in which the results of the
given query lie.
Args:
    query(string): the SMW inline query to be send via api
Returns:
    (Datetime, Datetime): Returns the time interval (based on modification date) in which all results of the
    query lie potentially the start end end might be None if an error occured or the input is invalid</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getBoundariesOfQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves the time interval, lower and upper bound, based on the modification date in which the results of the</span>
<span class="sd">    given query lie.</span>
<span class="sd">    Args:</span>
<span class="sd">        query(string): the SMW inline query to be send via api</span>
<span class="sd">    Returns:</span>
<span class="sd">        (Datetime, Datetime): Returns the time interval (based on modification date) in which all results of the</span>
<span class="sd">        query lie potentially the start end end might be None if an error occured or the input is invalid</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">first</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitClause</span><span class="o">.</span><span class="n">getFirst</span><span class="p">()</span>
    <span class="n">queryparam</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">|</span><span class="si">{</span><span class="n">first</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">start</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTimeStampBoundary</span><span class="p">(</span><span class="n">queryparam</span><span class="p">,</span> <span class="s2">&quot;asc&quot;</span><span class="p">)</span>
    <span class="n">end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTimeStampBoundary</span><span class="p">(</span><span class="n">queryparam</span><span class="p">,</span> <span class="s2">&quot;desc&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWClient.getTimeStampBoundary" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getTimeStampBoundary</span><span class="p">(</span><span class="n">queryparam</span><span class="p">,</span> <span class="n">order</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>query according to a DATE e.g. MODIFICATION_DATE in the given order</p>
<p>Args:</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getTimeStampBoundary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queryparam</span><span class="p">,</span> <span class="n">order</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    query according to a DATE e.g. MODIFICATION_DATE in the given order</span>

<span class="sd">    Args:</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">queryparamBoundary</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">queryparam</span><span class="si">}</span><span class="s2">|order=</span><span class="si">{</span><span class="n">order</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">resultsBoundary</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">raw_api</span><span class="p">(</span>
        <span class="s2">&quot;ask&quot;</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">queryparamBoundary</span><span class="p">,</span> <span class="n">http_method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">handle_api_result</span><span class="p">(</span><span class="n">resultsBoundary</span><span class="p">)</span>
    <span class="n">deserializedResult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">resultsBoundary</span><span class="p">)</span>

    <span class="n">deserializedValues</span> <span class="o">=</span> <span class="n">deserializedResult</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
    <span class="n">date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">splitClause</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">deserializedValues</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">date</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWClient.info" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">info</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>see https://www.semantic-mediawiki.org/wiki/Help:API:smwinfo</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;see https://www.semantic-mediawiki.org/wiki/Help:API:smwinfo&quot;&quot;&quot;</span>
    <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">raw_api</span><span class="p">(</span><span class="s2">&quot;smwinfo&quot;</span><span class="p">,</span> <span class="n">http_method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">handle_api_result</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>  <span class="c1"># raises APIError on error</span>

    <span class="k">return</span> <span class="n">results</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWClient.query" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">query</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>run query and return list of Dicts</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>askQuery(string)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SMW inline query to be send via api</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>title(string)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the title (if any)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limit(int)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the maximum number of records to be retrieved (if any)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="return" open>
  <summary>Return</summary>
  <p>dict: mainlabel as key and value is a dict of the associated property values</p>
</details>
            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">askQuery</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    run query and return list of Dicts</span>

<span class="sd">    Args:</span>
<span class="sd">        askQuery(string): the SMW inline query to be send via api</span>
<span class="sd">        title(string): the title (if any)</span>
<span class="sd">        limit(int): the maximum number of records to be retrieved (if any)</span>

<span class="sd">    Return:</span>
<span class="sd">        dict: mainlabel as key and value is a dict of the associated property values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rawresult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawquery</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
    <span class="n">resultDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">rawresult</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resultDict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SMWClient.rawquery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rawquery</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>run the given askQuery and return the raw result</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>askQuery(string)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SMW inline query to be send via api</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>title(string)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the title (if any)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limit(int)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the maximum number of records to be retrieved (if any)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the raw query result as returned by the ask API</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">rawquery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">askQuery</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    run the given askQuery and return the raw result</span>

<span class="sd">    Args:</span>
<span class="sd">        askQuery(string): the SMW inline query to be send via api</span>
<span class="sd">        title(string): the title (if any)</span>
<span class="sd">        limit(int): the maximum number of records to be retrieved (if any)</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: the raw query result as returned by the ask API</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fixedAsk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixAsk</span><span class="p">(</span><span class="n">askQuery</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">singleResult</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask</span><span class="p">(</span><span class="n">fixedAsk</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">limit</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">singleResult</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">singleResults</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="s2">&quot;query&quot;</span> <span class="ow">in</span> <span class="n">singleResult</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;results&quot;</span> <span class="ow">in</span> <span class="n">singleResult</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]:</span>
                    <span class="n">singleResults</span> <span class="o">=</span> <span class="n">singleResult</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;results&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">singleResults</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;query&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s2">&quot;results&quot;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]:</span>
                        <span class="n">results</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;results&quot;</span><span class="p">]</span>
                        <span class="n">results</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">singleResults</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;results&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">singleResults</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">result</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                    <span class="n">result</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;results&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">singleResults</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.smw.SplitClause" class="doc doc-heading">
            <code>SplitClause</code>


</h3>


    <div class="doc doc-contents ">


      <p>Query parameter to be used for splitting e.g. Modification date, Creation Date, could be potentially
any parameter that is ordered and countable
Currently we assume a parameter of type Date and use Modification date by default</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SplitClause</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Query parameter to be used for splitting e.g. Modification date, Creation Date, could be potentially</span>
<span class="sd">    any parameter that is ordered and countable</span>
<span class="sd">    Currently we assume a parameter of type Date and use Modification date by default</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Modification date&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;mdate&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        construct me</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>

    <span class="k">def</span> <span class="nf">queryBounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lowerBound</span><span class="p">,</span> <span class="n">upperBound</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the query bounds</span>
<span class="sd">        e.g. [[Modification date::&gt;=2021-01-01T12:00</span>

<span class="sd">        Args:</span>
<span class="sd">            lowerBound(datetime): start of the time interval</span>
<span class="sd">            upperBound(datetime): end of the time interval</span>

<span class="sd">        Returns:</span>
<span class="sd">            Returns the SMW ask part for the boundary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:: &gt;=</span><span class="si">{</span><span class="n">lowerBound</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span><span class="si">}</span><span class="s2">]]|[[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:: &lt;=</span><span class="si">{</span><span class="n">upperBound</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span><span class="si">}</span><span class="s2">]]&quot;</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">getFirst</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the first element</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;?</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">|sort=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">|limit=1&quot;</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        deserialize my query result</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># dict: {</span>
        <span class="c1">#    &#39;Property:Foaf:knows&#39;: {</span>
        <span class="c1">#       &#39;&#39;: &#39;Property:Foaf:knows&#39;,</span>
        <span class="c1">#       &#39;Modification date&#39;: datetime.datetime(2020, 11, 28, 17, 40, 36)</span>
        <span class="c1">#    }</span>
        <span class="c1"># }</span>
        <span class="n">date</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">vlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vlist</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">innerValue</span> <span class="o">=</span> <span class="n">vlist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="ow">in</span> <span class="n">innerValue</span><span class="p">:</span>
                <span class="n">date</span> <span class="o">=</span> <span class="n">innerValue</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">date</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SplitClause.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Modification date&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;mdate&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>construct me</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Modification date&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;mdate&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    construct me</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SplitClause.deserialize" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">deserialize</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>deserialize my query result</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    deserialize my query result</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># dict: {</span>
    <span class="c1">#    &#39;Property:Foaf:knows&#39;: {</span>
    <span class="c1">#       &#39;&#39;: &#39;Property:Foaf:knows&#39;,</span>
    <span class="c1">#       &#39;Modification date&#39;: datetime.datetime(2020, 11, 28, 17, 40, 36)</span>
    <span class="c1">#    }</span>
    <span class="c1"># }</span>
    <span class="n">date</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">vlist</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vlist</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">innerValue</span> <span class="o">=</span> <span class="n">vlist</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="ow">in</span> <span class="n">innerValue</span><span class="p">:</span>
            <span class="n">date</span> <span class="o">=</span> <span class="n">innerValue</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">date</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SplitClause.getFirst" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getFirst</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the first element</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getFirst</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the first element</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;?</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="si">}</span><span class="s2">|sort=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">|limit=1&quot;</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.smw.SplitClause.queryBounds" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">queryBounds</span><span class="p">(</span><span class="n">lowerBound</span><span class="p">,</span> <span class="n">upperBound</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the query bounds
e.g. [[Modification date::&gt;=2021-01-01T12:00</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>lowerBound(datetime)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>start of the time interval</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>upperBound(datetime)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>end of the time interval</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Returns the SMW ask part for the boundary</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/smw.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">queryBounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lowerBound</span><span class="p">,</span> <span class="n">upperBound</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the query bounds</span>
<span class="sd">    e.g. [[Modification date::&gt;=2021-01-01T12:00</span>

<span class="sd">    Args:</span>
<span class="sd">        lowerBound(datetime): start of the time interval</span>
<span class="sd">        upperBound(datetime): end of the time interval</span>

<span class="sd">    Returns:</span>
<span class="sd">        Returns the SMW ask part for the boundary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:: &gt;=</span><span class="si">{</span><span class="n">lowerBound</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span><span class="si">}</span><span class="s2">]]|[[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">:: &lt;=</span><span class="si">{</span><span class="n">upperBound</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span><span class="si">}</span><span class="s2">]]&quot;</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.sso" class="doc doc-heading">
            <code>sso</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2024-01-22</p>
<p>@author: wf</p>
<p>with ChatGPT-4 prompting</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.sso.SSO" class="doc doc-heading">
            <code>SSO</code>


</h3>


    <div class="doc doc-contents ">


      <p>A class to implement MediaWiki single sign-on support.</p>
<p>This class provides functionality to connect to a MediaWiki database,
verify user credentials, and handle database connections with pooling.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="wikibot3rd.sso.SSO.host">host</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The host of the MediaWiki database.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="wikibot3rd.sso.SSO.database">database</span></code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the MediaWiki database.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="wikibot3rd.sso.SSO.sql_port">sql_port</span></code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SQL port for the database connection.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="wikibot3rd.sso.SSO.db_username">db_username</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The database username.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="wikibot3rd.sso.SSO.db_password">db_password</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The database password.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="wikibot3rd.sso.SSO.with_pool">with_pool</span></code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag to determine if connection pooling is used.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="wikibot3rd.sso.SSO.timeout">timeout</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout for checking SQL port availability.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="wikibot3rd.sso.SSO.debug">debug</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag to enable debug mode.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/sso.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SSO</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to implement MediaWiki single sign-on support.</span>

<span class="sd">    This class provides functionality to connect to a MediaWiki database,</span>
<span class="sd">    verify user credentials, and handle database connections with pooling.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        host (str): The host of the MediaWiki database.</span>
<span class="sd">        database (str): The name of the MediaWiki database.</span>
<span class="sd">        sql_port (int): The SQL port for the database connection.</span>
<span class="sd">        db_username (Optional[str]): The database username.</span>
<span class="sd">        db_password (Optional[str]): The database password.</span>
<span class="sd">        with_pool (bool): Flag to determine if connection pooling is used.</span>
<span class="sd">        timeout (float): The timeout for checking SQL port availability.</span>
<span class="sd">        debug (Optional[bool]): Flag to enable debug mode.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">database</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">sql_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3306</span><span class="p">,</span>
        <span class="n">db_username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">db_password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">with_pool</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
        <span class="n">debug</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs all the necessary attributes for the SSO object.</span>

<span class="sd">        Args:</span>
<span class="sd">            host (str): The host of the MediaWiki database.</span>
<span class="sd">            database (str): The name of the MediaWiki database.</span>
<span class="sd">            sql_port (int): The SQL port for the database connection.</span>
<span class="sd">            db_username (Optional[str]): The database username.</span>
<span class="sd">            db_password (Optional[str]): The database password.</span>
<span class="sd">            with_pool (bool): Flag to determine if connection pooling is used.</span>
<span class="sd">            timeout (float): The timeout for checking SQL port availability.</span>
<span class="sd">            debug (Optional[bool]): Flag to enable debug mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">database</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sql_port</span> <span class="o">=</span> <span class="n">sql_port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db_username</span> <span class="o">=</span> <span class="n">db_username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db_password</span> <span class="o">=</span> <span class="n">db_password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pool</span><span class="p">()</span> <span class="k">if</span> <span class="n">with_pool</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">get_pool</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pooling</span><span class="o">.</span><span class="n">MySQLConnectionPool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Creates a connection pool for the database.</span>

<span class="sd">        Returns:</span>
<span class="sd">            MySQLConnectionPool: A pool of database connections.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pool_config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;pool_name&quot;</span><span class="p">:</span> <span class="s2">&quot;mypool&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pool_size&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
            <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_username</span><span class="p">,</span>
            <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_password</span><span class="p">,</span>
            <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">,</span>
            <span class="s2">&quot;raise_on_warnings&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">pooling</span><span class="o">.</span><span class="n">MySQLConnectionPool</span><span class="p">(</span><span class="o">**</span><span class="n">pool_config</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">check_port</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the specified SQL port is accessible on the configured host.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the port is accessible, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">create_connection</span><span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sql_port</span><span class="p">),</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>
            <span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connection to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2"> port </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sql_port</span><span class="si">}</span><span class="s2"> failed: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">verify_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hash_value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verifies a password against a stored hash value.</span>

<span class="sd">        Args:</span>
<span class="sd">            password (str): The password to verify.</span>
<span class="sd">            hash_value (str): The stored hash value to compare against.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the password matches the hash value, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">hash_value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">7</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid hash format&quot;</span><span class="p">)</span>

        <span class="p">(</span>
            <span class="n">_</span><span class="p">,</span>
            <span class="n">pbkdf2_indicator</span><span class="p">,</span>
            <span class="n">hash_algorithm</span><span class="p">,</span>
            <span class="n">iterations</span><span class="p">,</span>
            <span class="n">_</span><span class="p">,</span>
            <span class="n">salt</span><span class="p">,</span>
            <span class="n">hashed_password</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">=</span> <span class="n">parts</span>

        <span class="k">if</span> <span class="n">pbkdf2_indicator</span> <span class="o">!=</span> <span class="s2">&quot;pbkdf2&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;verify_password expects pbkdf2 hashes&quot;</span><span class="p">)</span>

        <span class="n">iterations</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">fix_base64_padding</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">string</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="o">%</span> <span class="mi">4</span><span class="p">)</span>

        <span class="n">salt</span> <span class="o">=</span> <span class="n">fix_base64_padding</span><span class="p">(</span><span class="n">salt</span><span class="p">)</span>
        <span class="n">hashed_password</span> <span class="o">=</span> <span class="n">fix_base64_padding</span><span class="p">(</span><span class="n">hashed_password</span><span class="p">)</span>

        <span class="n">salt</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">salt</span><span class="p">)</span>
        <span class="n">hashed_password</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">hashed_password</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">hash_algorithm</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">algorithms_available</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported hash algorithm: </span><span class="si">{</span><span class="n">hash_algorithm</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">new_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">pbkdf2_hmac</span><span class="p">(</span>
            <span class="n">hash_algorithm</span><span class="p">,</span> <span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span> <span class="n">salt</span><span class="p">,</span> <span class="n">iterations</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">new_hash</span> <span class="o">==</span> <span class="n">hashed_password</span>

    <span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">User</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve details of a user by username.</span>
<span class="sd">        Returns a User object if found, otherwise None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mw_username</span> <span class="o">=</span> <span class="n">username</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="n">username</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">user_record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_user_data_from_database</span><span class="p">(</span><span class="n">mw_username</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user_record</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">User</span><span class="p">(</span>
                <span class="nb">id</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">],</span>
                <span class="n">name</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_name&quot;</span><span class="p">],</span>
                <span class="n">real_name</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_real_name&quot;</span><span class="p">],</span>
                <span class="n">password</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_password&quot;</span><span class="p">],</span>
                <span class="n">email</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_email&quot;</span><span class="p">],</span>
                <span class="n">touched</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_touched&quot;</span><span class="p">],</span>
                <span class="n">editcount</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_editcount&quot;</span><span class="p">],</span>
                <span class="n">is_admin</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;is_sysop&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">sql_query</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">dictionary</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql_query</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">record</span>

    <span class="k">def</span> <span class="nf">fetch_user_data_from_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mw_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetch user data from the database.</span>

<span class="sd">        Args:</span>
<span class="sd">            mw_username(str): the Mediawiki username</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user_record</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">connection</span> <span class="o">=</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span>
                <span class="k">else</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                    <span class="n">host</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
                    <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db_username</span><span class="p">,</span>
                    <span class="n">password</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db_password</span><span class="p">,</span>
                    <span class="n">database</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="c1"># JOIN query: Fetch user data and sysop status</span>
            <span class="n">sql_query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            SELECT u.*, </span>
<span class="s2">                   COUNT(ug.ug_group) AS is_sysop</span>
<span class="s2">            FROM `user` u</span>
<span class="s2">            LEFT JOIN `user_groups` ug ON u.user_id = ug.ug_user AND ug.ug_group = &#39;sysop&#39;</span>
<span class="s2">            WHERE u.user_name = </span><span class="si">%s</span>
<span class="s2">            GROUP BY u.user_id</span>
<span class="s2">            &quot;&quot;&quot;</span>
            <span class="n">user_record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">sql_query</span><span class="p">,</span> <span class="p">(</span><span class="n">mw_username</span><span class="p">,))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database error: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">connection</span> <span class="ow">and</span> <span class="n">connection</span><span class="o">.</span><span class="n">is_connected</span><span class="p">():</span>
                <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">user_record</span>

    <span class="k">def</span> <span class="nf">check_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks the validity of MediaWiki username and password.</span>

<span class="sd">        Args:</span>
<span class="sd">            username (str): The MediaWiki username.</span>
<span class="sd">            password (str): The password to verify.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the credentials are valid, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
            <span class="n">stored_hash</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">password</span>
            <span class="n">is_valid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">verify_password</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">stored_hash</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Username </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2"> not found in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">is_valid</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.sso.SSO.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">database</span><span class="p">,</span> <span class="n">sql_port</span><span class="o">=</span><span class="mi">3306</span><span class="p">,</span> <span class="n">db_username</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">db_password</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_pool</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructs all the necessary attributes for the SSO object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>host</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The host of the MediaWiki database.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>database</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the MediaWiki database.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>sql_port</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SQL port for the database connection.</p>
              </div>
            </td>
            <td>
                  <code>3306</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>db_username</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The database username.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>db_password</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The database password.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>with_pool</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag to determine if connection pooling is used.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>timeout</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The timeout for checking SQL port availability.</p>
              </div>
            </td>
            <td>
                  <code>3</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>debug</code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[bool]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag to enable debug mode.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/sso.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">database</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">sql_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3306</span><span class="p">,</span>
    <span class="n">db_username</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">db_password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">with_pool</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
    <span class="n">debug</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructs all the necessary attributes for the SSO object.</span>

<span class="sd">    Args:</span>
<span class="sd">        host (str): The host of the MediaWiki database.</span>
<span class="sd">        database (str): The name of the MediaWiki database.</span>
<span class="sd">        sql_port (int): The SQL port for the database connection.</span>
<span class="sd">        db_username (Optional[str]): The database username.</span>
<span class="sd">        db_password (Optional[str]): The database password.</span>
<span class="sd">        with_pool (bool): Flag to determine if connection pooling is used.</span>
<span class="sd">        timeout (float): The timeout for checking SQL port availability.</span>
<span class="sd">        debug (Optional[bool]): Flag to enable debug mode.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">database</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sql_port</span> <span class="o">=</span> <span class="n">sql_port</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">timeout</span> <span class="o">=</span> <span class="n">timeout</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">db_username</span> <span class="o">=</span> <span class="n">db_username</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">db_password</span> <span class="o">=</span> <span class="n">db_password</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_pool</span><span class="p">()</span> <span class="k">if</span> <span class="n">with_pool</span> <span class="k">else</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.sso.SSO.check_credentials" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_credentials</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Checks the validity of MediaWiki username and password.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>username</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The MediaWiki username.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>password</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The password to verify.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the credentials are valid, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/sso.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_credentials</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks the validity of MediaWiki username and password.</span>

<span class="sd">    Args:</span>
<span class="sd">        username (str): The MediaWiki username.</span>
<span class="sd">        password (str): The password to verify.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the credentials are valid, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">is_valid</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_user</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">user</span><span class="p">:</span>
        <span class="n">stored_hash</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">password</span>
        <span class="n">is_valid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">verify_password</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">stored_hash</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Username </span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s2"> not found in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">is_valid</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.sso.SSO.check_port" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">check_port</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Checks if the specified SQL port is accessible on the configured host.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the port is accessible, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/sso.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">check_port</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks if the specified SQL port is accessible on the configured host.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the port is accessible, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">socket</span><span class="o">.</span><span class="n">create_connection</span><span class="p">(</span>
            <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sql_port</span><span class="p">),</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span>
        <span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
    <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Connection to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2"> port </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sql_port</span><span class="si">}</span><span class="s2"> failed: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.sso.SSO.fetch_user_data_from_database" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fetch_user_data_from_database</span><span class="p">(</span><span class="n">mw_username</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Fetch user data from the database.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>mw_username(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the Mediawiki username</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/sso.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fetch_user_data_from_database</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mw_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetch user data from the database.</span>

<span class="sd">    Args:</span>
<span class="sd">        mw_username(str): the Mediawiki username</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user_record</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">connection</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pool</span>
            <span class="k">else</span> <span class="n">mysql</span><span class="o">.</span><span class="n">connector</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="n">host</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
                <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db_username</span><span class="p">,</span>
                <span class="n">password</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">db_password</span><span class="p">,</span>
                <span class="n">database</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="c1"># JOIN query: Fetch user data and sysop status</span>
        <span class="n">sql_query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        SELECT u.*, </span>
<span class="s2">               COUNT(ug.ug_group) AS is_sysop</span>
<span class="s2">        FROM `user` u</span>
<span class="s2">        LEFT JOIN `user_groups` ug ON u.user_id = ug.ug_user AND ug.ug_group = &#39;sysop&#39;</span>
<span class="s2">        WHERE u.user_name = </span><span class="si">%s</span>
<span class="s2">        GROUP BY u.user_id</span>
<span class="s2">        &quot;&quot;&quot;</span>
        <span class="n">user_record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">sql_query</span><span class="p">,</span> <span class="p">(</span><span class="n">mw_username</span><span class="p">,))</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Database error: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">connection</span> <span class="ow">and</span> <span class="n">connection</span><span class="o">.</span><span class="n">is_connected</span><span class="p">():</span>
            <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">user_record</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.sso.SSO.get_pool" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_pool</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Creates a connection pool for the database.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>MySQLConnectionPool</code></td>            <td>
                  <code><span title="mysql.connector.pooling.MySQLConnectionPool">MySQLConnectionPool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A pool of database connections.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/sso.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_pool</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pooling</span><span class="o">.</span><span class="n">MySQLConnectionPool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Creates a connection pool for the database.</span>

<span class="sd">    Returns:</span>
<span class="sd">        MySQLConnectionPool: A pool of database connections.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pool_config</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;pool_name&quot;</span><span class="p">:</span> <span class="s2">&quot;mypool&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pool_size&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_username</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">db_password</span><span class="p">,</span>
        <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">,</span>
        <span class="s2">&quot;raise_on_warnings&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">pooling</span><span class="o">.</span><span class="n">MySQLConnectionPool</span><span class="p">(</span><span class="o">**</span><span class="n">pool_config</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.sso.SSO.get_user" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_user</span><span class="p">(</span><span class="n">username</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Retrieve details of a user by username.
Returns a User object if found, otherwise None.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/sso.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">User</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieve details of a user by username.</span>
<span class="sd">    Returns a User object if found, otherwise None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mw_username</span> <span class="o">=</span> <span class="n">username</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="n">username</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="n">user_record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_user_data_from_database</span><span class="p">(</span><span class="n">mw_username</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">user_record</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">User</span><span class="p">(</span>
            <span class="nb">id</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_id&quot;</span><span class="p">],</span>
            <span class="n">name</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_name&quot;</span><span class="p">],</span>
            <span class="n">real_name</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_real_name&quot;</span><span class="p">],</span>
            <span class="n">password</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_password&quot;</span><span class="p">],</span>
            <span class="n">email</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_email&quot;</span><span class="p">],</span>
            <span class="n">touched</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_touched&quot;</span><span class="p">],</span>
            <span class="n">editcount</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;user_editcount&quot;</span><span class="p">],</span>
            <span class="n">is_admin</span><span class="o">=</span><span class="n">user_record</span><span class="p">[</span><span class="s2">&quot;is_sysop&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.sso.SSO.verify_password" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">verify_password</span><span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">hash_value</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Verifies a password against a stored hash value.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>password</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The password to verify.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>hash_value</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The stored hash value to compare against.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the password matches the hash value, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/sso.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">verify_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">hash_value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Verifies a password against a stored hash value.</span>

<span class="sd">    Args:</span>
<span class="sd">        password (str): The password to verify.</span>
<span class="sd">        hash_value (str): The stored hash value to compare against.</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the password matches the hash value, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">parts</span> <span class="o">=</span> <span class="n">hash_value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parts</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">7</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid hash format&quot;</span><span class="p">)</span>

    <span class="p">(</span>
        <span class="n">_</span><span class="p">,</span>
        <span class="n">pbkdf2_indicator</span><span class="p">,</span>
        <span class="n">hash_algorithm</span><span class="p">,</span>
        <span class="n">iterations</span><span class="p">,</span>
        <span class="n">_</span><span class="p">,</span>
        <span class="n">salt</span><span class="p">,</span>
        <span class="n">hashed_password</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">=</span> <span class="n">parts</span>

    <span class="k">if</span> <span class="n">pbkdf2_indicator</span> <span class="o">!=</span> <span class="s2">&quot;pbkdf2&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;verify_password expects pbkdf2 hashes&quot;</span><span class="p">)</span>

    <span class="n">iterations</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">iterations</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fix_base64_padding</span><span class="p">(</span><span class="n">string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">string</span> <span class="o">+</span> <span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="o">%</span> <span class="mi">4</span><span class="p">)</span>

    <span class="n">salt</span> <span class="o">=</span> <span class="n">fix_base64_padding</span><span class="p">(</span><span class="n">salt</span><span class="p">)</span>
    <span class="n">hashed_password</span> <span class="o">=</span> <span class="n">fix_base64_padding</span><span class="p">(</span><span class="n">hashed_password</span><span class="p">)</span>

    <span class="n">salt</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">salt</span><span class="p">)</span>
    <span class="n">hashed_password</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">hashed_password</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">hash_algorithm</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">algorithms_available</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported hash algorithm: </span><span class="si">{</span><span class="n">hash_algorithm</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">new_hash</span> <span class="o">=</span> <span class="n">hashlib</span><span class="o">.</span><span class="n">pbkdf2_hmac</span><span class="p">(</span>
        <span class="n">hash_algorithm</span><span class="p">,</span> <span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">),</span> <span class="n">salt</span><span class="p">,</span> <span class="n">iterations</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">new_hash</span> <span class="o">==</span> <span class="n">hashed_password</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.sso.User" class="doc doc-heading">
            <code>User</code>


</h3>


    <div class="doc doc-contents ">


      <p>Mediawiki user details</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/sso.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">User</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mediawiki user details</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">id</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">real_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">password</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># hashed password</span>
    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">touched</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">editcount</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">is_admin</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Safely convert binary fields to strings if they are not already</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">touched</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">touched</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">touched</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.version" class="doc doc-heading">
            <code>version</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2022-03-24</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.version.Version" class="doc doc-heading">
            <code>Version</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


      <p>Version handling for py-3rdparty-mediawiki</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/version.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Version</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Version handling for py-3rdparty-mediawiki</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;py-3rdparty-mediawiki&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">wikibot3rd</span><span class="o">.</span><span class="n">__version__</span>
    <span class="n">date</span> <span class="o">=</span> <span class="s2">&quot;2020-10-31&quot;</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="s2">&quot;2024-11-08&quot;</span>

    <span class="n">authors</span> <span class="o">=</span> <span class="s2">&quot;Wolfgang Fahl, Tim Holzheim&quot;</span>

    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Wrapper for mwclient with improvements for 3rd party wikis&quot;</span>

    <span class="n">cm_url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/WolfgangFahl/py-3rdparty-mediawiki&quot;</span>
    <span class="n">chat_url</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/WolfgangFahl/py-3rdparty-mediawiki/discussions&quot;</span>
    <span class="n">doc_url</span> <span class="o">=</span> <span class="s2">&quot;https://wiki.bitplan.com/index.php/Py-3rdparty-mediawiki&quot;</span>

    <span class="n">license</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;Copyright 2020-2024 contributors. All rights reserved.</span>
<span class="s2">  Licensed under the Apache License 2.0</span>
<span class="s2">  http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="s2">  Distributed on an &quot;AS IS&quot; basis without warranties</span>
<span class="s2">  or conditions of any kind, either express or implied.&quot;&quot;&quot;</span>
    <span class="n">longDescription</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> version </span><span class="si">{</span><span class="n">version</span><span class="si">}</span>
<span class="si">{</span><span class="n">description</span><span class="si">}</span>
<span class="s2">  Created by </span><span class="si">{</span><span class="n">authors</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="n">date</span><span class="si">}</span><span class="s2"> last updated </span><span class="si">{</span><span class="n">updated</span><span class="si">}</span><span class="s2">&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wiki" class="doc doc-heading">
            <code>wiki</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2020-11-05</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.wiki.Wiki" class="doc doc-heading">
            <code>Wiki</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


      <p>common interface for WikiBot and WikiClient</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/wiki.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Wiki</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    common interface for WikiBot and WikiClient</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">smw_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>

<span class="sd">        Args:</span>
<span class="sd">            wikiUser(WikiUser): the wiki user to initialize me for</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span> <span class="o">=</span> <span class="n">wikiUser</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_smw_enabled</span> <span class="o">=</span> <span class="n">smw_enabled</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return a string representation of myself</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span>
        <span class="n">botType</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%20s</span><span class="s2">(</span><span class="si">%10s</span><span class="s2">): </span><span class="si">%15s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wu</span><span class="o">.</span><span class="n">wikiId</span><span class="p">,</span> <span class="n">botType</span><span class="p">,</span> <span class="n">wu</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">wu</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">text</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wiki.Wiki.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">wikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">smw_enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructor</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>wikiUser(WikiUser)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the wiki user to initialize me for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wiki.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">smw_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>

<span class="sd">    Args:</span>
<span class="sd">        wikiUser(WikiUser): the wiki user to initialize me for</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span> <span class="o">=</span> <span class="n">wikiUser</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">is_smw_enabled</span> <span class="o">=</span> <span class="n">smw_enabled</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wiki.Wiki.__str__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__str__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>return a string representation of myself</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wiki.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    return a string representation of myself</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span>
    <span class="n">botType</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%20s</span><span class="s2">(</span><span class="si">%10s</span><span class="s2">): </span><span class="si">%15s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">wu</span><span class="o">.</span><span class="n">wikiId</span><span class="p">,</span> <span class="n">botType</span><span class="p">,</span> <span class="n">wu</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">wu</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">text</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikiaction" class="doc doc-heading">
            <code>wikiaction</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2021-02-02</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.wikiaction.WikiAction" class="doc doc-heading">
            <code>WikiAction</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


      <p>perform an action on the given semantic media wiki</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/wikiaction.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">WikiAction</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    perform an action on the given semantic media wiki</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">smw</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">smw</span> <span class="o">=</span> <span class="n">smw</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sourceCodeResult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSourceCodes</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">getSourceCodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ask</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;{{#ask: [[Concept:Sourcecode]]</span>
<span class="s2">|mainlabel=Sourcecode</span>
<span class="s2">| ?Sourcecode id = id</span>
<span class="s2">| ?Sourcecode lang = lang</span>
<span class="s2">| ?Sourcecode text = text</span>
<span class="s2">| ?Sourcecode author = author</span>
<span class="s2">| ?Sourcecode since = since</span>
<span class="s2">| ?Sourcecode url = url</span>
<span class="s2">}}&quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">smw</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">ask</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">getLambdaAction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">queryName</span><span class="p">,</span> <span class="n">actionName</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get an action from the result with the given query and actionName</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;lambdaAction with query: </span><span class="si">%s</span><span class="s2"> and action: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">queryName</span><span class="p">,</span> <span class="n">actionName</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">qCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sourceCodeResult</span><span class="p">[</span><span class="n">queryName</span><span class="p">]</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">qCode</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">query</span><span class="o">=</span><span class="n">qCode</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">],</span> <span class="n">lang</span><span class="o">=</span><span class="n">qCode</span><span class="p">[</span><span class="s2">&quot;lang&quot;</span><span class="p">])</span>
        <span class="n">sCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sourceCodeResult</span><span class="p">[</span><span class="n">actionName</span><span class="p">]</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">Code</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">sCode</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">text</span><span class="o">=</span><span class="n">sCode</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">],</span> <span class="n">lang</span><span class="o">=</span><span class="n">sCode</span><span class="p">[</span><span class="s2">&quot;lang&quot;</span><span class="p">])</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">LambdaAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">action</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiaction.WikiAction.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">smw</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructor</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiaction.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">smw</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">smw</span> <span class="o">=</span> <span class="n">smw</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sourceCodeResult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getSourceCodes</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiaction.WikiAction.getLambdaAction" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getLambdaAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">queryName</span><span class="p">,</span> <span class="n">actionName</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get an action from the result with the given query and actionName</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiaction.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getLambdaAction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">queryName</span><span class="p">,</span> <span class="n">actionName</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get an action from the result with the given query and actionName</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;lambdaAction with query: </span><span class="si">%s</span><span class="s2"> and action: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">queryName</span><span class="p">,</span> <span class="n">actionName</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="n">qCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sourceCodeResult</span><span class="p">[</span><span class="n">queryName</span><span class="p">]</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">qCode</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">query</span><span class="o">=</span><span class="n">qCode</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">],</span> <span class="n">lang</span><span class="o">=</span><span class="n">qCode</span><span class="p">[</span><span class="s2">&quot;lang&quot;</span><span class="p">])</span>
    <span class="n">sCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sourceCodeResult</span><span class="p">[</span><span class="n">actionName</span><span class="p">]</span>
    <span class="n">code</span> <span class="o">=</span> <span class="n">Code</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">sCode</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="n">text</span><span class="o">=</span><span class="n">sCode</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">],</span> <span class="n">lang</span><span class="o">=</span><span class="n">sCode</span><span class="p">[</span><span class="s2">&quot;lang&quot;</span><span class="p">])</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">LambdaAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="n">code</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">action</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikibackup" class="doc doc-heading">
            <code>wikibackup</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2020-12-05</p>
<p>@author: wf</p>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikibot" class="doc doc-heading">
            <code>wikibot</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2020-03-24</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.wikibot.WikiBot" class="doc doc-heading">
            <code>WikiBot</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wikibot3rd.wiki.Wiki" href="#wikibot3rd.wiki.Wiki">Wiki</a></code></p>


      <p>WikiBot</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/wikibot.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">WikiBot</span><span class="p">(</span><span class="n">Wiki</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    WikiBot</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getBots</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">valueExpr</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">bots</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">wikiUsers</span> <span class="o">=</span> <span class="n">WikiUser</span><span class="o">.</span><span class="n">getWikiUsers</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">wikiUser</span> <span class="ow">in</span> <span class="n">wikiUsers</span><span class="p">:</span>
            <span class="n">selected</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">wikiUser</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
                <span class="n">found</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">valueExpr</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                <span class="n">selected</span> <span class="o">=</span> <span class="n">found</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">selected</span><span class="p">:</span>
                <span class="n">wikibot</span> <span class="o">=</span> <span class="n">WikiBot</span><span class="p">(</span><span class="n">wikiUser</span><span class="p">)</span>
                <span class="n">bots</span><span class="p">[</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">wikiId</span><span class="p">]</span> <span class="o">=</span> <span class="n">wikibot</span>
                <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">bots</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
                    <span class="k">break</span>
        <span class="k">return</span> <span class="n">bots</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">ofWikiId</span><span class="p">(</span><span class="n">wikiId</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="n">wikiUser</span> <span class="o">=</span> <span class="n">WikiUser</span><span class="o">.</span><span class="n">ofWikiId</span><span class="p">(</span><span class="n">wikiId</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">)</span>
        <span class="n">wikibot</span> <span class="o">=</span> <span class="n">WikiBot</span><span class="p">(</span><span class="n">wikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wikibot</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">ofWikiUser</span><span class="p">(</span><span class="n">wikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="n">wikibot</span> <span class="o">=</span> <span class="n">WikiBot</span><span class="p">(</span><span class="n">wikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wikibot</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">wikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">withLogin</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">maxRetries</span><span class="o">=</span><span class="mi">2</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>

<span class="sd">        Args:</span>
<span class="sd">            wikiUser(WikiUser): the wiki user to initialize me for</span>
<span class="sd">            debug(bool): True if debug mode should be on</span>
<span class="sd">            withLogin(bool): True if init should automatically login</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pywikibot</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">max_retries</span> <span class="o">=</span> <span class="n">maxRetries</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">WikiBot</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">wikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">family</span> <span class="o">=</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">wikiId</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">:&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;url is missing for </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">wikiId</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">scriptPath</span> <span class="o">=</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">scriptPath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">version</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scheme</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">scheme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">netloc</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">netloc</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;netloc for family </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">netloc</span><span class="si">}</span><span class="s2"> derived from url </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">scriptPath</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">scriptPath</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkFamily</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">withLogin</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">register_family_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">familyName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">famfile</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        register the family file</span>

<span class="sd">        Args:</span>
<span class="sd">            family(str): the familyName to register</span>
<span class="sd">            famfile(str): the path to the family file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># deprecated code</span>
        <span class="c1"># config2.register_family_file(familyName, famfile)</span>
        <span class="n">pywikibot</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">family_files</span><span class="p">[</span><span class="n">familyName</span><span class="p">]</span> <span class="o">=</span> <span class="n">famfile</span>

    <span class="k">def</span> <span class="nf">checkFamily</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        check if a valid family file exists and if not create it</span>

<span class="sd">        watch out for https://stackoverflow.com/questions/76612838/how-to-work-with-custom-wikibase-using-pywikibot</span>
<span class="sd">        8.2 changes that might break old family files</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">iniFile</span> <span class="o">=</span> <span class="n">WikiUser</span><span class="o">.</span><span class="n">iniFilePath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">wikiId</span><span class="p">)</span>
        <span class="n">famfile</span> <span class="o">=</span> <span class="n">iniFile</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.ini&quot;</span><span class="p">,</span> <span class="s2">&quot;.py&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">isfile</span><span class="p">(</span><span class="n">famfile</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;creating family file </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">famfile</span><span class="p">)</span>
            <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;# -*- coding: utf-8  -*-</span>
<span class="s2">from pywikibot import family</span>

<span class="s2">class Family(family.Family):</span>
<span class="s2">    name = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span>
<span class="s2">    langs = {</span>
<span class="s2">        &#39;en&#39;: &#39;</span><span class="si">%s</span><span class="s2">&#39;,</span>
<span class="s2">    }</span>
<span class="s2">    def scriptpath(self, code):</span>
<span class="s2">       return &#39;</span><span class="si">%s</span><span class="s2">&#39;</span>

<span class="s2">    def isPublic(self):</span>
<span class="s2">        return </span><span class="si">%s</span>

<span class="s2">    def version(self, code):</span>
<span class="s2">        return &quot;</span><span class="si">%s</span><span class="s2">&quot;  # The MediaWiki version used. Very important in most cases. (contrary to documentation)</span>

<span class="s2">    def protocol(self, code):</span>
<span class="s2">       return &#39;</span><span class="si">%s</span><span class="s2">&#39;</span>

<span class="s2">    def ignore_certificate_error(self, code):</span>
<span class="s2">       return True</span>
<span class="s2">&quot;&quot;&quot;</span>
            <span class="n">mw_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;mediawiki &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">ispublic</span> <span class="o">=</span> <span class="s2">&quot;False&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;True&quot;</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">template</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">netloc</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scriptPath</span><span class="p">,</span>
                <span class="n">ispublic</span><span class="p">,</span>
                <span class="n">mw_version</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scheme</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">famfile</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">py_file</span><span class="p">:</span>
                <span class="n">py_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_family_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="p">,</span> <span class="n">famfile</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span><span class="p">:</span>
            <span class="n">pywikibot</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">usernames</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="p">][</span><span class="s2">&quot;en&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span>
        <span class="c1"># config2.authenticate[self.netloc] = (self.user,self.getPassword())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">pywikibot</span><span class="o">.</span><span class="n">Site</span><span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span><span class="p">:</span>
            <span class="c1"># needs patch as outlined in https://phabricator.wikimedia.org/T248471</span>
            <span class="c1"># self.site.login(password=self.wikiUser.getPassword())</span>
            <span class="n">lm</span> <span class="o">=</span> <span class="n">pywikibot</span><span class="o">.</span><span class="n">login</span><span class="o">.</span><span class="n">ClientLoginManager</span><span class="p">(</span>
                <span class="n">password</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">getPassword</span><span class="p">(),</span>
                <span class="n">site</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="p">,</span>
                <span class="n">user</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">lm</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;wikiUser is not set&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getWikiMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the wiki markup code (text) for the given page Title</span>

<span class="sd">        Args:</span>
<span class="sd">            pageTitle(str): the title of the page to retrieve</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the wiki markup code for the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">text</span>
        <span class="k">return</span> <span class="n">markup</span>

    <span class="k">def</span> <span class="nf">getHtml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the HTML code for the given page Title</span>

<span class="sd">        Args:</span>
<span class="sd">            pageTitle(str): the title of the page to retrieve</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the rendered HTML code for the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_parsed_page</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">html</span>

    <span class="k">def</span> <span class="nf">getPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;get the page with the given title</span>
<span class="sd">        Args:</span>
<span class="sd">            pageTitle(str): the title of the page to retrieve</span>
<span class="sd">        Returns:</span>
<span class="sd">            Page: the wikibot3rd page for the given pageTitle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">pywikibot</span><span class="o">.</span><span class="n">Page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">page</span>

    <span class="k">def</span> <span class="nf">savePage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">,</span> <span class="n">pageContent</span><span class="p">,</span> <span class="n">pageSummary</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;save a page with the given pageTitle, pageContent and pageSummary&quot;&quot;&quot;</span>
        <span class="n">newPage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
        <span class="n">newPage</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">pageContent</span>
        <span class="n">newPage</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">pageSummary</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikibot.WikiBot.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">wikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">withLogin</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">maxRetries</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructor</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>wikiUser(WikiUser)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the wiki user to initialize me for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>debug(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if debug mode should be on</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>withLogin(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if init should automatically login</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikibot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">wikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">withLogin</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">maxRetries</span><span class="o">=</span><span class="mi">2</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>

<span class="sd">    Args:</span>
<span class="sd">        wikiUser(WikiUser): the wiki user to initialize me for</span>
<span class="sd">        debug(bool): True if debug mode should be on</span>
<span class="sd">        withLogin(bool): True if init should automatically login</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pywikibot</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">max_retries</span> <span class="o">=</span> <span class="n">maxRetries</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">WikiBot</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">wikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">family</span> <span class="o">=</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">wikiId</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">:&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;url is missing for </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">wikiId</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">scriptPath</span> <span class="o">=</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">scriptPath</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">version</span>
    <span class="n">o</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scheme</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">scheme</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">netloc</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">netloc</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;netloc for family </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="si">}</span><span class="s2"> is </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">netloc</span><span class="si">}</span><span class="s2"> derived from url </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scriptPath</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">scriptPath</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">checkFamily</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">withLogin</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">login</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikibot.WikiBot.checkFamily" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">checkFamily</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>check if a valid family file exists and if not create it</p>
<p>watch out for https://stackoverflow.com/questions/76612838/how-to-work-with-custom-wikibase-using-pywikibot
8.2 changes that might break old family files</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikibot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">checkFamily</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        check if a valid family file exists and if not create it</span>

<span class="sd">        watch out for https://stackoverflow.com/questions/76612838/how-to-work-with-custom-wikibase-using-pywikibot</span>
<span class="sd">        8.2 changes that might break old family files</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">iniFile</span> <span class="o">=</span> <span class="n">WikiUser</span><span class="o">.</span><span class="n">iniFilePath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">wikiId</span><span class="p">)</span>
        <span class="n">famfile</span> <span class="o">=</span> <span class="n">iniFile</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.ini&quot;</span><span class="p">,</span> <span class="s2">&quot;.py&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">isfile</span><span class="p">(</span><span class="n">famfile</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;creating family file </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">famfile</span><span class="p">)</span>
            <span class="n">template</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;# -*- coding: utf-8  -*-</span>
<span class="s2">from pywikibot import family</span>

<span class="s2">class Family(family.Family):</span>
<span class="s2">    name = &#39;</span><span class="si">%s</span><span class="s2">&#39;</span>
<span class="s2">    langs = {</span>
<span class="s2">        &#39;en&#39;: &#39;</span><span class="si">%s</span><span class="s2">&#39;,</span>
<span class="s2">    }</span>
<span class="s2">    def scriptpath(self, code):</span>
<span class="s2">       return &#39;</span><span class="si">%s</span><span class="s2">&#39;</span>

<span class="s2">    def isPublic(self):</span>
<span class="s2">        return </span><span class="si">%s</span>

<span class="s2">    def version(self, code):</span>
<span class="s2">        return &quot;</span><span class="si">%s</span><span class="s2">&quot;  # The MediaWiki version used. Very important in most cases. (contrary to documentation)</span>

<span class="s2">    def protocol(self, code):</span>
<span class="s2">       return &#39;</span><span class="si">%s</span><span class="s2">&#39;</span>

<span class="s2">    def ignore_certificate_error(self, code):</span>
<span class="s2">       return True</span>
<span class="s2">&quot;&quot;&quot;</span>
            <span class="n">mw_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">version</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;mediawiki &quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">ispublic</span> <span class="o">=</span> <span class="s2">&quot;False&quot;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="s2">&quot;True&quot;</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">template</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">netloc</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scriptPath</span><span class="p">,</span>
                <span class="n">ispublic</span><span class="p">,</span>
                <span class="n">mw_version</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scheme</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">famfile</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">py_file</span><span class="p">:</span>
                <span class="n">py_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_family_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="p">,</span> <span class="n">famfile</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span><span class="p">:</span>
            <span class="n">pywikibot</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">usernames</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="p">][</span><span class="s2">&quot;en&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span>
        <span class="c1"># config2.authenticate[self.netloc] = (self.user,self.getPassword())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">pywikibot</span><span class="o">.</span><span class="n">Site</span><span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">family</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikibot.WikiBot.getHtml" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getHtml</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the HTML code for the given page Title</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pageTitle(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the title of the page to retrieve</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the rendered HTML code for the page</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikibot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getHtml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the HTML code for the given page Title</span>

<span class="sd">    Args:</span>
<span class="sd">        pageTitle(str): the title of the page to retrieve</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the rendered HTML code for the page</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
    <span class="n">html</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">get_parsed_page</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">html</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikibot.WikiBot.getPage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the page with the given title
Args:
    pageTitle(str): the title of the page to retrieve
Returns:
    Page: the wikibot3rd page for the given pageTitle</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikibot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;get the page with the given title</span>
<span class="sd">    Args:</span>
<span class="sd">        pageTitle(str): the title of the page to retrieve</span>
<span class="sd">    Returns:</span>
<span class="sd">        Page: the wikibot3rd page for the given pageTitle</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">page</span> <span class="o">=</span> <span class="n">pywikibot</span><span class="o">.</span><span class="n">Page</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">page</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikibot.WikiBot.getWikiMarkup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getWikiMarkup</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the wiki markup code (text) for the given page Title</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pageTitle(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the title of the page to retrieve</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the wiki markup code for the page</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikibot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getWikiMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the wiki markup code (text) for the given page Title</span>

<span class="sd">    Args:</span>
<span class="sd">        pageTitle(str): the title of the page to retrieve</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the wiki markup code for the page</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
    <span class="n">markup</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">text</span>
    <span class="k">return</span> <span class="n">markup</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikibot.WikiBot.register_family_file" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">register_family_file</span><span class="p">(</span><span class="n">familyName</span><span class="p">,</span> <span class="n">famfile</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>register the family file</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>family(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the familyName to register</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>famfile(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path to the family file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikibot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">register_family_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">familyName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">famfile</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    register the family file</span>

<span class="sd">    Args:</span>
<span class="sd">        family(str): the familyName to register</span>
<span class="sd">        famfile(str): the path to the family file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># deprecated code</span>
    <span class="c1"># config2.register_family_file(familyName, famfile)</span>
    <span class="n">pywikibot</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">family_files</span><span class="p">[</span><span class="n">familyName</span><span class="p">]</span> <span class="o">=</span> <span class="n">famfile</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikibot.WikiBot.savePage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">savePage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">,</span> <span class="n">pageContent</span><span class="p">,</span> <span class="n">pageSummary</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>save a page with the given pageTitle, pageContent and pageSummary</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikibot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">savePage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">,</span> <span class="n">pageContent</span><span class="p">,</span> <span class="n">pageSummary</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;save a page with the given pageTitle, pageContent and pageSummary&quot;&quot;&quot;</span>
    <span class="n">newPage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
    <span class="n">newPage</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">pageContent</span>
    <span class="n">newPage</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">pageSummary</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikiclient" class="doc doc-heading">
            <code>wikiclient</code>


</h2>

    <div class="doc doc-contents ">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.wikiclient.WikiClient" class="doc doc-heading">
            <code>WikiClient</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wikibot3rd.wiki.Wiki" href="#wikibot3rd.wiki.Wiki">Wiki</a></code></p>


      <p>Access MediaWiki via mwclient library.</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">WikiClient</span><span class="p">(</span><span class="n">Wiki</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Access MediaWiki via mwclient library.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">wiki_user</span><span class="p">:</span> <span class="n">WikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">smw_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the WikiClient with a WikiUser and an optional debug mode.</span>

<span class="sd">        Args:</span>
<span class="sd">            wiki_user: A WikiUser instance containing login credentials.</span>
<span class="sd">            debug: A flag to enable debug mode.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">WikiClient</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
            <span class="n">wiki_user</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span> <span class="n">smw_enabled</span><span class="o">=</span><span class="n">smw_enabled</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wiki_user</span><span class="p">:</span> <span class="n">WikiUser</span> <span class="o">=</span> <span class="n">wiki_user</span>
        <span class="c1"># compatibility</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wiki_user</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Site</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_logged_in</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">get_site</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Site</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the Site object for the MediaWiki site.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The Site object representing the MediaWiki site.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">o</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wiki_user</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
            <span class="n">scheme</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">scheme</span>
            <span class="n">host</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">netloc</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wiki_user</span><span class="o">.</span><span class="n">scriptPath</span>
            <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">/&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">Site</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="n">scheme</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span>

    <span class="k">def</span> <span class="nf">getSite</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Site</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_site instead.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">needs_login</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if login is required for the wiki.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if login is required, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">login_needed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">site</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">site</span><span class="o">.</span><span class="n">initialized</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">site_init</span><span class="p">()</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="s2">&quot;site&quot;</span><span class="p">,</span> <span class="s2">&quot;writeapi&quot;</span><span class="p">):</span>
                    <span class="n">login_needed</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">site</span><span class="o">.</span><span class="n">writeapi</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">login_needed</span> <span class="o">=</span> <span class="ow">not</span> <span class="s2">&quot;writeapi&quot;</span> <span class="ow">in</span> <span class="n">site</span><span class="o">.</span><span class="n">site</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;readapidenied&quot;</span> <span class="ow">in</span> <span class="n">ex</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
                    <span class="n">login_needed</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">pass</span>

        <span class="k">return</span> <span class="n">login_needed</span>

    <span class="k">def</span> <span class="nf">needsLogin</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated: Use needs_login instead.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">needs_login</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">try_login</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Attempt to log in to the MediaWiki site.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Exception: None if login is successful, Exception otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wiki_user</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">wu</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">wu</span><span class="o">.</span><span class="n">get_password</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_logged_in</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_is_logged_in</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">return</span> <span class="n">ex</span>

    <span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Attempt to log in to the MediaWiki site.</span>

<span class="sd">        Returns:</span>
<span class="sd">            True if login is successful, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">try_login</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ex</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Login failed: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">success</span> <span class="o">=</span> <span class="n">ex</span> <span class="ow">is</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">success</span>

    <span class="k">def</span> <span class="nf">get_wiki_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the wiki markup for a given page title.</span>

<span class="sd">        Args:</span>
<span class="sd">            page_title: The title of the page to retrieve the markup for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The wiki markup of the specified page.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">markup</span>

    <span class="k">def</span> <span class="nf">getWikiMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_wiki_markup instead.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_wiki_markup</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the HTML content for a given page title.</span>

<span class="sd">        Args:</span>
<span class="sd">            page_title: The title of the page to retrieve the HTML for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The HTML content of the specified page.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">api</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span><span class="o">.</span><span class="n">api</span><span class="p">(</span><span class="s2">&quot;parse&quot;</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="n">page_title</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;parse&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">api</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not retrieve HTML for page </span><span class="si">{</span><span class="n">page_title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">html</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">api</span><span class="p">[</span><span class="s2">&quot;parse&quot;</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">][</span><span class="s2">&quot;*&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">html</span>

    <span class="k">def</span> <span class="nf">getHtml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_html instead.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_html</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the page object for a given title.</span>

<span class="sd">        Args:</span>
<span class="sd">            page_title: The title of the page to retrieve.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The page object for the specified title.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">page_title</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">page</span>

    <span class="k">def</span> <span class="nf">getPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_page instead.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">page_content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">page_summary</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Save a page with given title and content.</span>

<span class="sd">        Args:</span>
<span class="sd">            page_title: The title of the page.</span>
<span class="sd">            page_content: The new content of the page.</span>
<span class="sd">            page_summary: A summary of the changes made.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span>
        <span class="n">new_page</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">page_content</span><span class="p">,</span> <span class="n">page_summary</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">savePage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pageContent</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pageSummary</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated: Use save_page instead.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_page</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">,</span> <span class="n">pageContent</span><span class="p">,</span> <span class="n">pageSummary</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_site_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetch site statistics using the MediaWiki API.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary containing the site statistics.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span>
            <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="s2">&quot;siteinfo&quot;</span><span class="p">,</span>
            <span class="s2">&quot;siprop&quot;</span><span class="p">:</span> <span class="s2">&quot;statistics&quot;</span><span class="p">,</span>
            <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">site</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">api</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
        <span class="n">statistics</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;statistics&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">statistics</span>

    <span class="k">def</span> <span class="nf">getSiteStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_site_statistics instead.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site_statistics</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get_clients</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a dictionary of WikiClient instances for all WikiUsers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, WikiClient]: A dictionary with wiki user IDs as keys and WikiClient instances as values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">clients</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">WikiClient</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">wiki_user</span> <span class="ow">in</span> <span class="n">WikiUser</span><span class="o">.</span><span class="n">getWikiUsers</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">wiki_client</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">)</span>
            <span class="n">clients</span><span class="p">[</span><span class="n">wiki_user</span><span class="o">.</span><span class="n">wikiId</span><span class="p">]</span> <span class="o">=</span> <span class="n">wiki_client</span>
        <span class="k">return</span> <span class="n">clients</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getClients</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_clients instead.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">get_clients</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">of_wiki_id</span><span class="p">(</span>
        <span class="n">wiki_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a WikiClient instance for a specific wiki ID.</span>

<span class="sd">        Args:</span>
<span class="sd">            wiki_id: The ID of the wiki to create a client for.</span>
<span class="sd">            lenient: Whether to be lenient in case of errors.</span>
<span class="sd">            debug: Whether to enable debug output.</span>

<span class="sd">        Returns:</span>
<span class="sd">            WikiClient: A WikiClient instance for the given wiki ID.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wiki_user</span> <span class="o">=</span> <span class="n">WikiUser</span><span class="o">.</span><span class="n">ofWikiId</span><span class="p">(</span><span class="n">wiki_id</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">)</span>
        <span class="n">wikibot</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="n">wikibot</span><span class="o">.</span><span class="n">is_smw_enabled</span> <span class="o">=</span> <span class="n">wiki_user</span><span class="o">.</span><span class="n">is_smw</span>
        <span class="k">return</span> <span class="n">wikibot</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">ofWikiId</span><span class="p">(</span>
        <span class="n">wiki_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated: Use of_wiki_id instead.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">of_wiki_id</span><span class="p">(</span><span class="n">wiki_id</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">of_wiki_user</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">:</span> <span class="n">WikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a WikiClient instance from a WikiUser object.</span>

<span class="sd">        Args:</span>
<span class="sd">            wiki_user: A WikiUser instance to create a WikiClient for.</span>

<span class="sd">        Returns:</span>
<span class="sd">            WikiClient: A WikiClient instance for the given WikiUser.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wikibot</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="n">wikibot</span><span class="o">.</span><span class="n">is_smw_enabled</span> <span class="o">=</span> <span class="n">wiki_user</span><span class="o">.</span><span class="n">is_smw</span>
        <span class="k">return</span> <span class="n">wikibot</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">ofWikiUser</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">:</span> <span class="n">WikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Deprecated: Use of_wiki_user instead.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">of_wiki_user</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">smw_enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Initialize the WikiClient with a WikiUser and an optional debug mode.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>wiki_user</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="wikibot3rd.wikiuser.WikiUser" href="#wikibot3rd.wikiuser.WikiUser">WikiUser</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A WikiUser instance containing login credentials.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>debug</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A flag to enable debug mode.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">wiki_user</span><span class="p">:</span> <span class="n">WikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">smw_enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the WikiClient with a WikiUser and an optional debug mode.</span>

<span class="sd">    Args:</span>
<span class="sd">        wiki_user: A WikiUser instance containing login credentials.</span>
<span class="sd">        debug: A flag to enable debug mode.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">(</span><span class="n">WikiClient</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span>
        <span class="n">wiki_user</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">,</span> <span class="n">smw_enabled</span><span class="o">=</span><span class="n">smw_enabled</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wiki_user</span><span class="p">:</span> <span class="n">WikiUser</span> <span class="o">=</span> <span class="n">wiki_user</span>
    <span class="c1"># compatibility</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wikiUser</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wiki_user</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Site</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_is_logged_in</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.getClients" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getClients</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Deprecated: Use get_clients instead.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getClients</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_clients instead.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">get_clients</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.getHtml" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getHtml</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Deprecated: Use get_html instead.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getHtml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_html instead.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_html</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.getPage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Deprecated: Use get_page instead.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getPage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_page instead.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.getSite" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getSite</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Deprecated: Use get_site instead.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getSite</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Site</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_site instead.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.getSiteStatistics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getSiteStatistics</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Deprecated: Use get_site_statistics instead.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getSiteStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_site_statistics instead.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site_statistics</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.getWikiMarkup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getWikiMarkup</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Deprecated: Use get_wiki_markup instead.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getWikiMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deprecated: Use get_wiki_markup instead.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_wiki_markup</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.get_clients" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_clients</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Get a dictionary of WikiClient instances for all WikiUsers.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <a class="autorefs autorefs-internal" title="wikibot3rd.wikiclient.WikiClient" href="#wikibot3rd.wikiclient.WikiClient">WikiClient</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[str, WikiClient]: A dictionary with wiki user IDs as keys and WikiClient instances as values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get_clients</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a dictionary of WikiClient instances for all WikiUsers.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, WikiClient]: A dictionary with wiki user IDs as keys and WikiClient instances as values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">clients</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">WikiClient</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">wiki_user</span> <span class="ow">in</span> <span class="n">WikiUser</span><span class="o">.</span><span class="n">getWikiUsers</span><span class="p">()</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">wiki_client</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">)</span>
        <span class="n">clients</span><span class="p">[</span><span class="n">wiki_user</span><span class="o">.</span><span class="n">wikiId</span><span class="p">]</span> <span class="o">=</span> <span class="n">wiki_client</span>
    <span class="k">return</span> <span class="n">clients</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.get_html" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_html</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Get the HTML content for a given page title.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>page_title</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the page to retrieve the HTML for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The HTML content of the specified page.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the HTML content for a given page title.</span>

<span class="sd">    Args:</span>
<span class="sd">        page_title: The title of the page to retrieve the HTML for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The HTML content of the specified page.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">api</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span><span class="o">.</span><span class="n">api</span><span class="p">(</span><span class="s2">&quot;parse&quot;</span><span class="p">,</span> <span class="n">page</span><span class="o">=</span><span class="n">page_title</span><span class="p">)</span>
    <span class="k">if</span> <span class="s2">&quot;parse&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">api</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not retrieve HTML for page </span><span class="si">{</span><span class="n">page_title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">html</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">api</span><span class="p">[</span><span class="s2">&quot;parse&quot;</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">][</span><span class="s2">&quot;*&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">html</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.get_page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_page</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Get the page object for a given title.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>page_title</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the page to retrieve.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The page object for the specified title.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the page object for a given title.</span>

<span class="sd">    Args:</span>
<span class="sd">        page_title: The title of the page to retrieve.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The page object for the specified title.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">page_title</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">page</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.get_site" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_site</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Get the Site object for the MediaWiki site.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="mwclient.Site">Site</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Site object representing the MediaWiki site.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_site</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Site</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the Site object for the MediaWiki site.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The Site object representing the MediaWiki site.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">o</span> <span class="o">=</span> <span class="n">urlparse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wiki_user</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
        <span class="n">scheme</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">scheme</span>
        <span class="n">host</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">netloc</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">wiki_user</span><span class="o">.</span><span class="n">scriptPath</span>
        <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">/&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">site</span> <span class="o">=</span> <span class="n">Site</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="n">scheme</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">site</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.get_site_statistics" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_site_statistics</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Fetch site statistics using the MediaWiki API.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary containing the site statistics.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_site_statistics</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetch site statistics using the MediaWiki API.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary containing the site statistics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;action&quot;</span><span class="p">:</span> <span class="s2">&quot;query&quot;</span><span class="p">,</span>
        <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="s2">&quot;siteinfo&quot;</span><span class="p">,</span>
        <span class="s2">&quot;siprop&quot;</span><span class="p">:</span> <span class="s2">&quot;statistics&quot;</span><span class="p">,</span>
        <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">site</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">api</span><span class="p">(</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>
    <span class="n">statistics</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">][</span><span class="s2">&quot;statistics&quot;</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">statistics</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.get_wiki_markup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_wiki_markup</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Get the wiki markup for a given page title.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>page_title</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the page to retrieve the markup for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The wiki markup of the specified page.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_wiki_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the wiki markup for a given page title.</span>

<span class="sd">    Args:</span>
<span class="sd">        page_title: The title of the page to retrieve the markup for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The wiki markup of the specified page.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span>
    <span class="n">markup</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">markup</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.login" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">login</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Attempt to log in to the MediaWiki site.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if login is successful, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">login</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attempt to log in to the MediaWiki site.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if login is successful, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">try_login</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ex</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Login failed: </span><span class="si">{</span><span class="n">ex</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">success</span> <span class="o">=</span> <span class="n">ex</span> <span class="ow">is</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">success</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.needsLogin" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">needsLogin</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Deprecated: Use needs_login instead.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">needsLogin</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deprecated: Use needs_login instead.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">needs_login</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.needs_login" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">needs_login</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Check if login is required for the wiki.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if login is required, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">needs_login</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if login is required for the wiki.</span>

<span class="sd">    Returns:</span>
<span class="sd">        True if login is required, False otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">login_needed</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">site</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">site</span><span class="o">.</span><span class="n">initialized</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">site_init</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="s2">&quot;site&quot;</span><span class="p">,</span> <span class="s2">&quot;writeapi&quot;</span><span class="p">):</span>
                <span class="n">login_needed</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">site</span><span class="o">.</span><span class="n">writeapi</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">login_needed</span> <span class="o">=</span> <span class="ow">not</span> <span class="s2">&quot;writeapi&quot;</span> <span class="ow">in</span> <span class="n">site</span><span class="o">.</span><span class="n">site</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="s2">&quot;args&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;readapidenied&quot;</span> <span class="ow">in</span> <span class="n">ex</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
                <span class="n">login_needed</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">pass</span>

    <span class="k">return</span> <span class="n">login_needed</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.ofWikiId" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ofWikiId</span><span class="p">(</span><span class="n">wiki_id</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Deprecated: Use of_wiki_id instead.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">ofWikiId</span><span class="p">(</span>
    <span class="n">wiki_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deprecated: Use of_wiki_id instead.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">of_wiki_id</span><span class="p">(</span><span class="n">wiki_id</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.ofWikiUser" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ofWikiUser</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Deprecated: Use of_wiki_user instead.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">ofWikiUser</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">:</span> <span class="n">WikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deprecated: Use of_wiki_user instead.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">of_wiki_user</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.of_wiki_id" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">of_wiki_id</span><span class="p">(</span><span class="n">wiki_id</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Create a WikiClient instance for a specific wiki ID.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>wiki_id</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ID of the wiki to create a client for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>lenient</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to be lenient in case of errors.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>debug</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to enable debug output.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>WikiClient</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="wikibot3rd.wikiclient.WikiClient" href="#wikibot3rd.wikiclient.WikiClient">WikiClient</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A WikiClient instance for the given wiki ID.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">of_wiki_id</span><span class="p">(</span>
    <span class="n">wiki_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a WikiClient instance for a specific wiki ID.</span>

<span class="sd">    Args:</span>
<span class="sd">        wiki_id: The ID of the wiki to create a client for.</span>
<span class="sd">        lenient: Whether to be lenient in case of errors.</span>
<span class="sd">        debug: Whether to enable debug output.</span>

<span class="sd">    Returns:</span>
<span class="sd">        WikiClient: A WikiClient instance for the given wiki ID.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wiki_user</span> <span class="o">=</span> <span class="n">WikiUser</span><span class="o">.</span><span class="n">ofWikiId</span><span class="p">(</span><span class="n">wiki_id</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">)</span>
    <span class="n">wikibot</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
    <span class="n">wikibot</span><span class="o">.</span><span class="n">is_smw_enabled</span> <span class="o">=</span> <span class="n">wiki_user</span><span class="o">.</span><span class="n">is_smw</span>
    <span class="k">return</span> <span class="n">wikibot</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.of_wiki_user" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">of_wiki_user</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Create a WikiClient instance from a WikiUser object.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>wiki_user</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="wikibot3rd.wikiuser.WikiUser" href="#wikibot3rd.wikiuser.WikiUser">WikiUser</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A WikiUser instance to create a WikiClient for.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>WikiClient</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="wikibot3rd.wikiclient.WikiClient" href="#wikibot3rd.wikiclient.WikiClient">WikiClient</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A WikiClient instance for the given WikiUser.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">of_wiki_user</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">:</span> <span class="n">WikiUser</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WikiClient&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a WikiClient instance from a WikiUser object.</span>

<span class="sd">    Args:</span>
<span class="sd">        wiki_user: A WikiUser instance to create a WikiClient for.</span>

<span class="sd">    Returns:</span>
<span class="sd">        WikiClient: A WikiClient instance for the given WikiUser.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wikibot</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="p">(</span><span class="n">wiki_user</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
    <span class="n">wikibot</span><span class="o">.</span><span class="n">is_smw_enabled</span> <span class="o">=</span> <span class="n">wiki_user</span><span class="o">.</span><span class="n">is_smw</span>
    <span class="k">return</span> <span class="n">wikibot</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.savePage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">savePage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">,</span> <span class="n">pageContent</span><span class="p">,</span> <span class="n">pageSummary</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Deprecated: Use save_page instead.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">savePage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pageContent</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pageSummary</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Deprecated: Use save_page instead.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_page</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">,</span> <span class="n">pageContent</span><span class="p">,</span> <span class="n">pageSummary</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.save_page" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save_page</span><span class="p">(</span><span class="n">page_title</span><span class="p">,</span> <span class="n">page_content</span><span class="p">,</span> <span class="n">page_summary</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Save a page with given title and content.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>page_title</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The title of the page.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>page_content</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The new content of the page.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>page_summary</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A summary of the changes made.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save_page</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">page_content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">page_summary</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Save a page with given title and content.</span>

<span class="sd">    Args:</span>
<span class="sd">        page_title: The title of the page.</span>
<span class="sd">        page_content: The new content of the page.</span>
<span class="sd">        page_summary: A summary of the changes made.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">new_page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_page</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span>
    <span class="n">new_page</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">page_content</span><span class="p">,</span> <span class="n">page_summary</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiclient.WikiClient.try_login" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">try_login</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Attempt to log in to the MediaWiki site.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Exception</code></td>            <td>
                  <code>Exception</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>None if login is successful, Exception otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiclient.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">try_login</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Attempt to log in to the MediaWiki site.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Exception: None if login is successful, Exception otherwise.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wiki_user</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span><span class="o">.</span><span class="n">login</span><span class="p">(</span><span class="n">username</span><span class="o">=</span><span class="n">wu</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="n">wu</span><span class="o">.</span><span class="n">get_password</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_logged_in</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_is_logged_in</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">ex</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikiedit" class="doc doc-heading">
            <code>wikiedit</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2020-11-12</p>
<p>@author: wf</p>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikinuke" class="doc doc-heading">
            <code>wikinuke</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2020-11-12</p>
<p>@author: wf</p>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikipush" class="doc doc-heading">
            <code>wikipush</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2020-10-29
  @author:     wf
  @copyright:  Wolfgang Fahl. All rights reserved.</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.wikipush.WikiPush" class="doc doc-heading">
            <code>WikiPush</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code>object</code></p>


      <p>Push pages from one MediaWiki to another</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span>
<span class="normal">896</span>
<span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">WikiPush</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Push pages from one MediaWiki to another</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">differ</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">fromWikiId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">toWikiId</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">login</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>

<span class="sd">        Args:</span>
<span class="sd">            fromWikiId(str): the id of the wiki to push from (source)</span>
<span class="sd">            toWikiID(str): the id of the wiki to push to (target)</span>
<span class="sd">            login(bool): if True login to source wiki</span>
<span class="sd">            verbose(bool): if True print info messages</span>
<span class="sd">            debug(bool): if True show debugging messages</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span> <span class="o">=</span> <span class="n">fromWikiId</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">ofWikiId</span><span class="p">(</span><span class="n">fromWikiId</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span> <span class="o">=</span> <span class="n">toWikiId</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">ofWikiId</span><span class="p">(</span><span class="n">toWikiId</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">login</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span><span class="o">.</span><span class="n">login</span><span class="p">():</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;can&#39;t login to source Wiki </span><span class="si">{</span><span class="n">fromWikiId</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">ex</span> <span class="o">=</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">raise</span> <span class="p">(</span><span class="n">ex</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">login</span><span class="p">():</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;can&#39;t login to target Wiki </span><span class="si">{</span><span class="n">toWikiId</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">ex</span> <span class="o">=</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">raise</span> <span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        show the given message if verbose is on</span>

<span class="sd">        Args:</span>
<span class="sd">            msg(str): the message to display</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">extract_template_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageRecords</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract template records from the given pageRecords using batch page retrieval.</span>

<span class="sd">        Args:</span>
<span class="sd">            pageRecords (dict): Dictionary with page titles as keys</span>
<span class="sd">            template (str): Name of the template to extract (e.g., &quot;Infobox officeholder&quot;)</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[dict]: List of template records, where each record is a dictionary</span>
<span class="sd">                       containing the template parameters. Returns None for pages</span>
<span class="sd">                       where the template is not found.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; pageRecords = {&quot;John Adams&quot;: {}, &quot;Thomas Jefferson&quot;: {}}</span>
<span class="sd">            &gt;&gt;&gt; records = extract_template_records(pageRecords, &quot;Infobox officeholder&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dod</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">page_titles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pageRecords</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="c1"># Get multiple pages at once</span>
        <span class="n">site</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span>
        <span class="c1"># Process each page</span>
        <span class="k">for</span> <span class="n">page_title</span> <span class="ow">in</span> <span class="n">page_titles</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">page</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">page_title</span><span class="p">]</span>
                <span class="n">markup</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">wiki_markup</span> <span class="o">=</span> <span class="n">WikiMarkup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">markup</span><span class="p">)</span>
                <span class="n">records</span> <span class="o">=</span> <span class="n">wiki_markup</span><span class="o">.</span><span class="n">extract_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">record</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">records</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">record</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">page_title</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">page_title</span>
                        <span class="n">dod</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">record</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ </span><span class="si">{</span><span class="n">page_title</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="n">dod</span>

    <span class="k">def</span> <span class="nf">formatQueryResult</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">askQuery</span><span class="p">,</span>
        <span class="n">wiki</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">outputFormat</span><span class="o">=</span><span class="s2">&quot;lod&quot;</span><span class="p">,</span>
        <span class="n">entityName</span><span class="o">=</span><span class="s2">&quot;data&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        format the query result for the given askQuery.</span>
<span class="sd">        Args:</span>
<span class="sd">            askQuery(string): Semantic Media Wiki in line query https://www.semantic-mediawiki.org/wiki/Help:Inline_queries</span>
<span class="sd">            wiki(wikibot3rd): the wiki to query - use fromWiki if not specified</span>
<span class="sd">            limit(int): the limit for the query (optional)</span>
<span class="sd">            showProgress(bool): true if progress of the query retrieval should be indicated (default: one dot per 50 records ...)</span>
<span class="sd">            queryDivision(int): Defines the number of subintervals the query is divided into (must be greater equal 1)</span>
<span class="sd">            outputFormat(str): output format of the query results - default format is lod</span>
<span class="sd">            entityName(str): the name of the entity</span>
<span class="sd">            title(str): the title of the query (if any)</span>
<span class="sd">        Returns:</span>
<span class="sd">            Query results in the requested outputFormat as string.</span>
<span class="sd">            If the requested outputFormat is not supported None is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pageRecords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryPages</span><span class="p">(</span>
            <span class="n">askQuery</span><span class="p">,</span> <span class="n">wiki</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">showProgress</span><span class="p">,</span> <span class="n">queryDivision</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">template</span><span class="p">:</span>
            <span class="n">pageRecords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_template_records</span><span class="p">(</span>
                <span class="n">pageRecords</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">template</span>
            <span class="p">)</span>
            <span class="k">pass</span>
        <span class="n">outputFormat</span> <span class="o">=</span> <span class="n">outputFormat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s2">&quot;csv&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">convertToCSV</span><span class="p">(</span><span class="n">pageRecords</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
            <span class="n">res_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="n">entityName</span><span class="p">:</span> <span class="n">res</span><span class="p">},</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">res_json</span>
        <span class="k">elif</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s2">&quot;lod&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">pageRecord</span> <span class="k">for</span> <span class="n">pageRecord</span> <span class="ow">in</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">title</span> <span class="o">=</span> <span class="n">entityName</span>
            <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">entityName</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
            <span class="n">qlod</span> <span class="o">=</span> <span class="p">[</span><span class="n">pageRecord</span> <span class="k">for</span> <span class="n">pageRecord</span> <span class="ow">in</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">documentQueryResult</span><span class="p">(</span>
                <span class="n">qlod</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="n">outputFormat</span><span class="p">,</span> <span class="n">withSourceCode</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
            <span class="k">return</span> <span class="n">doc</span>
            <span class="c1"># if self.debug:</span>
            <span class="c1">#    print(f&quot;Format {outputFormat} is not supported.&quot;)</span>

    <span class="k">def</span> <span class="nf">convertToCSV</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageRecords</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the given pageRecords into a str in csv format</span>
<span class="sd">        ToDO: Currently does not support escaping of the separator and escaping of quotes</span>
<span class="sd">        Args:</span>
<span class="sd">            pageRecords: dict of dicts containing the printouts</span>
<span class="sd">            separator(char):</span>
<span class="sd">        Returns: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">printedHeaders</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">pageRecord</span> <span class="ow">in</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">printedHeaders</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">pageRecord</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">res</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">res</span><span class="si">}{</span><span class="n">key</span><span class="si">}{</span><span class="n">separator</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">res</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">res</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">printedHeaders</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">printouts</span> <span class="ow">in</span> <span class="n">pageRecord</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="n">res</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">res</span><span class="si">}{</span><span class="n">printouts</span><span class="si">}{</span><span class="n">separator</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">res</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">res</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># remove last separator and end line</span>
        <span class="k">return</span> <span class="n">res</span>

    <span class="k">def</span> <span class="nf">queryPages</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">askQuery</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wiki</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query the given wiki for pagerecords matching the given askQuery</span>

<span class="sd">        Args:</span>
<span class="sd">            askQuery (str): Semantic Media Wiki in line query https://www.semantic-mediawiki.org/wiki/Help:Inline_queries</span>
<span class="sd">            wiki (wikibot3rd): the wiki to query - use fromWiki if not specified</span>
<span class="sd">            limit (int): the limit for the query (optional)</span>
<span class="sd">            showProgress (bool): true if progress of the query retrieval should be indicated (default: one dot per 50 records ...)</span>
<span class="sd">            queryDivision (int): Defines the number of subintervals the query is divided into (must be greater equal 1)</span>
<span class="sd">        Returns:</span>
<span class="sd">            list: a list of pageRecords matching the given askQuery</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">wiki</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">wiki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span>
        <span class="c1"># no wiki no pages e.g. if wikirestore is used without a -s option</span>
        <span class="k">if</span> <span class="n">wiki</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pageRecords</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="n">wiki</span><span class="o">.</span><span class="n">is_smw_enabled</span><span class="p">:</span>
            <span class="n">smwClient</span> <span class="o">=</span> <span class="n">SMWClient</span><span class="p">(</span>
                <span class="n">wiki</span><span class="o">.</span><span class="n">getSite</span><span class="p">(),</span>
                <span class="n">showProgress</span><span class="o">=</span><span class="n">showProgress</span><span class="p">,</span>
                <span class="n">queryDivision</span><span class="o">=</span><span class="n">queryDivision</span><span class="p">,</span>
                <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">pageRecords</span> <span class="o">=</span> <span class="n">smwClient</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pageRecords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_via_mw_api</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">wiki</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pageRecords</span>

    <span class="k">def</span> <span class="nf">extract_category_and_mainlabel</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">askQuery</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">category_labels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;Category&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Kategorie&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Catégorie&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Categoría&quot;</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts the category pattern and mainlabel from a MediaWiki query, supporting multiple language labels.</span>

<span class="sd">        Args:</span>
<span class="sd">            askQuery (str): The query string to be processed.</span>
<span class="sd">            category_labels (List[str], optional): A list of category labels in different languages</span>
<span class="sd">                                                   (default: [&#39;Category&#39;, &#39;Kategorie&#39;, &#39;Catégorie&#39;, &#39;Categoría&#39;]).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Tuple[str, Optional[str]]]: A tuple containing the category pattern and</span>
<span class="sd">            the mainlabel if present. Returns None if the query does not match a category pattern.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Join the list of category labels into a regex pattern</span>
        <span class="n">labels_pattern</span> <span class="o">=</span> <span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">label</span><span class="p">)</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">category_labels</span><span class="p">)</span>

        <span class="c1"># Regex to match category queries in specified languages and optionally a mainlabel</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\[\[\s*(?:</span><span class="si">{</span><span class="n">labels_pattern</span><span class="si">}</span><span class="s2">)\s*:\s*([^\]]+)\s*\]\](?:\s*\|\s*mainlabel\s*=\s*([^\|]+))?&quot;</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">askQuery</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="n">category</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>  <span class="c1"># Extract the category pattern</span>
            <span class="n">mainlabel</span> <span class="o">=</span> <span class="p">(</span>
                <span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">if</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">)</span>  <span class="c1"># Extract the mainlabel if present</span>
            <span class="k">return</span> <span class="n">category</span><span class="p">,</span> <span class="n">mainlabel</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">query_via_mw_api</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">askQuery</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wiki</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">:</span>
        <span class="c1"># Handle non-SMW wiki (assuming category query)</span>
        <span class="n">category</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_category_and_mainlabel</span><span class="p">(</span><span class="n">askQuery</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">category</span><span class="p">:</span>
            <span class="n">err_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;non SMW wiki has limited query support ([[Category:+]] and [[Category:someCategory only]] your query: </span><span class="si">{</span><span class="n">askQuery</span><span class="si">}</span><span class="s2"> is not supported&quot;</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
        <span class="n">site</span> <span class="o">=</span> <span class="n">wiki</span><span class="o">.</span><span class="n">getSite</span><span class="p">()</span>
        <span class="c1"># result dict</span>
        <span class="n">page_records</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">category</span> <span class="o">==</span> <span class="s2">&quot;+&quot;</span><span class="p">:</span>
            <span class="n">q_page_records</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">allcategories</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">q_page_records</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">categories</span><span class="p">[</span><span class="n">category</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">q_page_records</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">limit</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">page_records</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">limit</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">page_records</span><span class="p">[</span><span class="n">page</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;pageTitle&quot;</span><span class="p">:</span> <span class="n">page</span><span class="o">.</span><span class="n">name</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">page_records</span>

    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">askQuery</span><span class="p">,</span>
        <span class="n">wiki</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">pageField</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query the given wiki for pages matching the given askQuery</span>

<span class="sd">        Args:</span>
<span class="sd">            askQuery(string): Semantic Media Wiki in line query https://www.semantic-mediawiki.org/wiki/Help:Inline_queries</span>
<span class="sd">            wiki(wikibot3rd): the wiki to query - use fromWiki if not specified</span>
<span class="sd">            pageField(string): the field to select the pageTitle from</span>
<span class="sd">            limit(int): the limit for the query (optional)</span>
<span class="sd">            showProgress(bool): true if progress of the query retrieval should be indicated (default: one dot per 50 records ...)</span>
<span class="sd">        Returns:</span>
<span class="sd">            list: a list of pageTitles matching the given askQuery</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">pageRecords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryPages</span><span class="p">(</span>
            <span class="n">askQuery</span><span class="p">,</span> <span class="n">wiki</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">showProgress</span><span class="p">,</span> <span class="n">queryDivision</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">pageField</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="c1"># use a Dict to remove duplicates</span>
        <span class="n">pagesDict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">pageRecord</span> <span class="ow">in</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">pageField</span> <span class="ow">in</span> <span class="n">pageRecord</span><span class="p">:</span>
                <span class="n">pagesDict</span><span class="p">[</span><span class="n">pageRecord</span><span class="p">[</span><span class="n">pageField</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">pagesDict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">nuke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitles</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        delete the pages with the given page Titles</span>

<span class="sd">        Args:</span>
<span class="sd">            pageTitles(list): a list of page titles to be transfered from the formWiki to the toWiki</span>
<span class="sd">            force(bool): True if pages should be actually deleted - dry run only listing pages is default</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
            <span class="s2">&quot;deleting </span><span class="si">%d</span><span class="s2"> pages in </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span>
            <span class="o">%</span> <span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="p">,</span> <span class="s2">&quot;forced&quot;</span> <span class="k">if</span> <span class="n">force</span> <span class="k">else</span> <span class="s2">&quot;dry run&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pageTitle</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="s2"> (</span><span class="si">%4.0f%%</span><span class="s2">): deleting </span><span class="si">%s</span><span class="s2"> ...&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">),</span>
                    <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">pageToBeDeleted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;👍&quot;</span> <span class="k">if</span> <span class="n">pageToBeDeleted</span><span class="o">.</span><span class="n">exists</span> <span class="k">else</span> <span class="s2">&quot;👎&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pageToBeDeleted</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;deleted by wiknuke&quot;</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getDiff</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">newText</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">forHuman</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compare the two given strings and return the differences</span>
<span class="sd">        Args:</span>
<span class="sd">            text: old text to compare the new text to</span>
<span class="sd">            newText: new text</span>
<span class="sd">            n: The number of context lines</span>
<span class="sd">            forHuman: If True update the diff string to be better human-readable</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: difference string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># if WikiPush.differ is None:</span>
        <span class="c1">#    WikiPush.differ=Differ()</span>
        <span class="c1"># https://docs.python.org/3/library/difflib.html</span>
        <span class="c1">#  difflib.unified_diff(a, b, fromfile=&#39;&#39;, tofile=&#39;&#39;, fromfiledate=&#39;&#39;, tofiledate=&#39;&#39;, n=3, lineterm=&#39;\n&#39;)¶</span>
        <span class="c1"># diffs=WikiPush.differ.compare(,)</span>
        <span class="n">textLines</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">newTextLines</span> <span class="o">=</span> <span class="n">newText</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">diffs</span> <span class="o">=</span> <span class="n">difflib</span><span class="o">.</span><span class="n">unified_diff</span><span class="p">(</span><span class="n">textLines</span><span class="p">,</span> <span class="n">newTextLines</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">forHuman</span><span class="p">:</span>
            <span class="n">hdiffs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">diffs</span><span class="p">:</span>
                <span class="n">unwantedItems</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;@@&quot;</span><span class="p">,</span> <span class="s2">&quot;---&quot;</span><span class="p">,</span> <span class="s2">&quot;+++&quot;</span><span class="p">]</span>
                <span class="n">keep</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">unwanted</span> <span class="ow">in</span> <span class="n">unwantedItems</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">unwanted</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                        <span class="n">keep</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">keep</span><span class="p">:</span>
                    <span class="n">hdiffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hdiffs</span> <span class="o">=</span> <span class="n">diffs</span>
        <span class="n">diffStr</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">hdiffs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">diffStr</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getModify</span><span class="p">(</span>
        <span class="n">search</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">replace</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the modification function</span>

<span class="sd">        Args:</span>
<span class="sd">            search(str): the search string</span>
<span class="sd">            replace(str): the replace string</span>
<span class="sd">            debug(bool): if debug show</span>

<span class="sd">        Returns:</span>
<span class="sd">            String modify function that takes as input the string, applies the search and replace action</span>
<span class="sd">             and returns the modified string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;search regex: </span><span class="si">{</span><span class="n">search</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;replace regex: </span><span class="si">{</span><span class="n">replace</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">searchRegex</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">search</span>
        <span class="n">replaceRegex</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">replace</span>
        <span class="n">modify</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">text</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">searchRegex</span><span class="p">,</span> <span class="n">replaceRegex</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">modify</span>

    <span class="k">def</span> <span class="nf">edit_page_content</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">new_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">summary</span><span class="o">=</span><span class="s2">&quot;edited by wikiedit&quot;</span><span class="p">,</span>
        <span class="n">modify</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Edit the content of a single page.</span>

<span class="sd">        Args:</span>
<span class="sd">        page_title (str): The title of the page to be edited</span>
<span class="sd">        new_text (str): the new text for the page</span>
<span class="sd">        summary (str): the summary / comment for the editing</span>
<span class="sd">        modify (Callable[[str], str]): Function to modify the page content</span>
<span class="sd">        force (bool): If True, actually edit the page; if False, perform a dry run</span>
<span class="sd">        context (int): The number of context lines for diff</span>

<span class="sd">        Returns:</span>
<span class="sd">        str: Status of the edit operation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">page_to_edit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">page_to_edit</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;👎&quot;</span>

        <span class="n">text</span> <span class="o">=</span> <span class="n">page_to_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">new_text</span><span class="p">:</span>
            <span class="n">new_text</span> <span class="o">=</span> <span class="n">modify</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">new_text</span> <span class="o">==</span> <span class="n">text</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;↔&quot;</span>

        <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
            <span class="n">page_to_edit</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">new_text</span><span class="p">,</span> <span class="n">summary</span><span class="p">)</span>
            <span class="k">return</span> <span class="s2">&quot;✅&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">diff_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDiff</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">new_text</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;👍</span><span class="si">{</span><span class="n">diff_str</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">edit</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">page_titles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">modify</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">context</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Edit the pages with the given page titles</span>

<span class="sd">        Args:</span>
<span class="sd">        page_titles (list): a list of page titles to be transferred from the formWiki to the toWiki</span>
<span class="sd">        modify: String modify function that takes as input the string and returns the modified string</span>
<span class="sd">        context: The number of context lines</span>
<span class="sd">        force (bool): True if pages should be actually edited - dry run only listing pages is default</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">modify</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;wikipush edit needs a modify function!&quot;</span><span class="p">)</span>

        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">page_titles</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;editing </span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> pages in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="s1">&#39;forced&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">force</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;dry run&#39;</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">page_title</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">page_titles</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">:</span><span class="s2">4.0f</span><span class="si">}</span><span class="s2">%): editing </span><span class="si">{</span><span class="n">page_title</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">,</span>
                    <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit_page_content</span><span class="p">(</span><span class="n">page_title</span><span class="p">,</span> <span class="n">modify</span><span class="p">,</span> <span class="n">force</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">edit_wikison</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">page_titles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
        <span class="n">entity_type_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">property_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Edit the WikiSON for on the given pages</span>
<span class="sd">        Args:</span>
<span class="sd">            page_titles: a list of page titles to be edited</span>
<span class="sd">            entity_type_name: name of the WikiSON entity type</span>
<span class="sd">            property_name: name of the property to edit</span>
<span class="sd">            value: value to set. If None property is deleted from the WikiSON</span>
<span class="sd">            force: If False only print the changes. Otherwise, apply the changes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">page_titles</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;&quot;&quot;editing </span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> pages in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="s2">&quot;forced&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">force</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;dry run&quot;</span><span class="si">}</span><span class="s2">)&quot;&quot;&quot;</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">page_title</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">page_titles</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">i</span><span class="o">/</span><span class="n">total</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%): editing </span><span class="si">{</span><span class="n">page_title</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">,</span>
                    <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">page_to_be_edited</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">page_to_be_edited</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;👎&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;edited by wikiedit&quot;</span>
                    <span class="n">markup</span> <span class="o">=</span> <span class="n">page_to_be_edited</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                    <span class="n">wikison</span> <span class="o">=</span> <span class="n">WikiSON</span><span class="p">(</span><span class="n">page_title</span><span class="p">,</span> <span class="n">markup</span><span class="p">)</span>
                    <span class="n">new_markup</span> <span class="o">=</span> <span class="n">wikison</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                        <span class="n">entity_type_name</span><span class="o">=</span><span class="n">entity_type_name</span><span class="p">,</span> <span class="n">record</span><span class="o">=</span><span class="p">{</span><span class="n">property_name</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">new_markup</span> <span class="o">!=</span> <span class="n">markup</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
                            <span class="n">page_to_be_edited</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">new_markup</span><span class="p">,</span> <span class="n">comment</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">diff_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDiff</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">new_markup</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;👍</span><span class="si">{</span><span class="n">diff_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;↔&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        push the given files</span>
<span class="sd">        Args:</span>
<span class="sd">            files(list): a list of filenames to be transfered to the toWiki</span>
<span class="sd">            force(bool): True if images should be overwritten if they exist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;uploading </span><span class="si">%d</span><span class="s2"> files to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">files</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="s2"> (</span><span class="si">%4.0f%%</span><span class="s2">): uploading </span><span class="si">%s</span><span class="s2"> ...&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="n">file</span><span class="p">),</span>
                    <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;uploaded by wikiupload&quot;</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uploadImage</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">force</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">backup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitles</span><span class="p">,</span> <span class="n">backupPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">git</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">withImages</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        backup the given page titles</span>
<span class="sd">        Args:</span>
<span class="sd">            pageTitles(list): a list of page titles to be downloaded from the fromWiki</span>
<span class="sd">            git(bool): True if git should be used as a version control system</span>
<span class="sd">            withImages(bool): True if the image on a page should also be copied</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">backupPath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">backupPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHomePath</span><span class="p">(</span><span class="s2">&quot;wikibackup/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span><span class="p">)</span>
        <span class="n">imageBackupPath</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/images&quot;</span> <span class="o">%</span> <span class="n">backupPath</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
            <span class="s2">&quot;downloading </span><span class="si">%d</span><span class="s2"> pages from </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span><span class="p">,</span> <span class="n">backupPath</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pageTitle</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="s2"> (</span><span class="si">%4.0f%%</span><span class="s2">): downloading </span><span class="si">%s</span><span class="s2"> ...&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">),</span>
                    <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
                <span class="n">wikiFilePath</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">.wiki&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">backupPath</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ensureParentDirectoryExists</span><span class="p">(</span><span class="n">wikiFilePath</span><span class="p">)</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">wikiFilePath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">wikiFile</span><span class="p">:</span>
                    <span class="n">wikiFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">Image</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">backupImages</span><span class="p">([</span><span class="n">page</span><span class="p">],</span> <span class="n">imageBackupPath</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">withImages</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">backupImages</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">images</span><span class="p">(),</span> <span class="n">imageBackupPath</span><span class="p">)</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">git</span><span class="p">:</span>
            <span class="n">gitPath</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/.git&quot;</span> <span class="o">%</span> <span class="n">backupPath</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">gitPath</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;initializing git repository ...&quot;</span><span class="p">)</span>
                <span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">backupPath</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="p">(</span><span class="n">backupPath</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;committing to git repository&quot;</span><span class="p">)</span>
            <span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
            <span class="n">repo</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;auto commit by wikibackup at </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">timestamp</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">backupImages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imageList</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">imageBackupPath</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        backup the images in the givne imageList</span>

<span class="sd">        Args:</span>
<span class="sd">            imageList(list): the list of images</span>
<span class="sd">            imageBackupPath(str): the path to the backup directory</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">imageList</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">imagePath</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downloadImage</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">imageBackupPath</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">handleException</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">work</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">pageTitles</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">activity</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;copying&quot;</span><span class="p">,</span>
        <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;pushed&quot;</span><span class="p">,</span>
        <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">ignore</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">withImages</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        work on the given page titles</span>

<span class="sd">        Args:</span>
<span class="sd">            pageTitles(list): a list of page titles to be transfered from the formWiki to the toWiki</span>
<span class="sd">            activity(str): the activity to perform</span>
<span class="sd">            comment(str): the comment to display</span>
<span class="sd">            force(bool): True if pages should be overwritten if they exist</span>
<span class="sd">            ignore(bool): True if warning for images should be ignored (e.g if they exist)</span>
<span class="sd">            withImages(bool): True if the image on a page should also be copied</span>
<span class="sd">        Returns:</span>
<span class="sd">            list: a list of pageTitles for which the activity failed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">failed</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">activity</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> pages from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pageTitle</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">percent</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">percent</span><span class="si">:</span><span class="s2">4.0f</span><span class="si">}</span><span class="s2">%): </span><span class="si">{</span><span class="n">activity</span><span class="si">}</span><span class="s2"> ... </span><span class="si">{</span><span class="n">pageTitle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
                    <span class="c1"># is this an image?</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">Image</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">pushImages</span><span class="p">([</span><span class="n">page</span><span class="p">],</span> <span class="n">ignore</span><span class="o">=</span><span class="n">ignore</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">newPage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="n">newPage</span><span class="o">.</span><span class="n">exists</span> <span class="ow">or</span> <span class="n">force</span><span class="p">:</span>
                            <span class="k">try</span><span class="p">:</span>
                                <span class="n">newPage</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span> <span class="n">comment</span><span class="p">)</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
                                <span class="n">pageOk</span> <span class="o">=</span> <span class="kc">True</span>
                            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                                <span class="n">pageOk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleException</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">ignore</span><span class="p">)</span>
                                <span class="k">if</span> <span class="ow">not</span> <span class="n">pageOk</span><span class="p">:</span>
                                    <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">withImages</span> <span class="ow">and</span> <span class="n">pageOk</span><span class="p">:</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">pushImages</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">images</span><span class="p">(),</span> <span class="n">ignore</span><span class="o">=</span><span class="n">ignore</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;👎&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;❌&quot;</span><span class="p">)</span>
                    <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">failed</span>

    <span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitles</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">withImages</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        push the given page titles</span>

<span class="sd">        Args:</span>
<span class="sd">            pageTitles(list): a list of page titles to be transfered from the formWiki to the toWiki</span>
<span class="sd">            force(bool): True if pages should be overwritten if they exist</span>
<span class="sd">            ignore(bool): True if warning for images should be ignored (e.g if they exist)</span>
<span class="sd">            withImages(bool): True if the image on a page should also be copied</span>
<span class="sd">        Returns:</span>
<span class="sd">            list: a list of pageTitles for which the activity failed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">comment</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;pushed from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span><span class="si">}</span><span class="s2"> by wikipush&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">work</span><span class="p">(</span>
            <span class="n">pageTitles</span><span class="p">,</span>
            <span class="n">activity</span><span class="o">=</span><span class="s2">&quot;copying&quot;</span><span class="p">,</span>
            <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
            <span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">,</span>
            <span class="n">ignore</span><span class="o">=</span><span class="n">ignore</span><span class="p">,</span>
            <span class="n">withImages</span><span class="o">=</span><span class="n">withImages</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">ensureParentDirectoryExists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        for pages that have a &quot;/&quot; in the name make sure that the parent Directory exists</span>

<span class="sd">        Args:</span>
<span class="sd">            filePath(str): the filePath to check</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ensureDirectoryExists</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ensureDirectoryExists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        make sure the given directory exists</span>

<span class="sd">        Args:</span>
<span class="sd">            directory(str): the directory to check for existence</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Path</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getHomePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">localPath</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the given home path</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">homePath</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">localPath</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ensureDirectoryExists</span><span class="p">(</span><span class="n">homePath</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">homePath</span>

    <span class="k">def</span> <span class="nf">getDownloadPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the download path</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHomePath</span><span class="p">(</span><span class="s2">&quot;Downloads/mediawiki&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">pushImages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imageList</span><span class="p">,</span> <span class="n">delim</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        push the images in the given image List</span>

<span class="sd">        Args:</span>
<span class="sd">            imageList(list): a list of images to be pushed</span>
<span class="sd">            ignore(bool): True to upload despite any warnings.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">imageList</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">copying image </span><span class="si">%s</span><span class="s2"> ...&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">delim</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">imagePath</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downloadImage</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
                <span class="n">description</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">imageinfo</span><span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">uploadImage</span><span class="p">(</span><span class="n">imagePath</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">ignore</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">handleAPIWarnings</span><span class="p">(</span><span class="n">ex</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="n">ignore</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">imageinfo</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">handleException</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">ignore</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">show_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ex</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Show the given exception and, if debug mode is on, show the traceback.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;❌: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="c1"># Append the formatted traceback to the message</span>
            <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handleException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        handle the given exception and ignore it if it includes &quot;exists&quot; and ignoreExists is True</span>

<span class="sd">        Args:</span>
<span class="sd">            ex(Exception): the exception to handle</span>
<span class="sd">            ignoreExists(bool): True if &quot;exists&quot; should be ignored</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the exception was handled as ok False if it was logged as an error</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleWarning</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;❌&quot;</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="n">ignoreExists</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handleAPIWarnings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">warnings</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        handle API Warnings</span>

<span class="sd">        Args:</span>
<span class="sd">            warnings(list): a list of API warnings</span>
<span class="sd">            ignoreExists(bool): ignore messages that warn about existing content</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the exception was handled as ok False if it was logged as an error</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">warnings</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">warnings</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="n">warnings</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">warning</span> <span class="ow">in</span> <span class="n">warnings</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">warning</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleWarning</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="n">ignoreExists</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handleWarning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;⚠️&quot;</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        handle the given warning and ignore it if it includes &quot;exists&quot; and ignoreExists is True</span>

<span class="sd">        Args:</span>
<span class="sd">            msg(string): the warning to handle</span>
<span class="sd">            marker(string): the marker to use for the message</span>
<span class="sd">            ignoreExists(bool): True if &quot;exists&quot; should be ignored</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the exception was handled as ok False if it was logged as an error</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># print (&quot;handling warning %s with ignoreExists=%r&quot; % (msg,ignoreExists))</span>
        <span class="k">if</span> <span class="n">ignoreExists</span> <span class="ow">and</span> <span class="s2">&quot;exists&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
            <span class="c1"># shorten exact duplicate message</span>
            <span class="k">if</span> <span class="s2">&quot;exact duplicate&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;exact duplicate&quot;</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="s2">&quot;👀&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ignoreExists</span> <span class="ow">and</span> <span class="s2">&quot;exists&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
                <span class="s2">&quot;file exists (to overwrite existing files enable the ignore parameter)&quot;</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">marker</span><span class="p">,</span> <span class="n">msg</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">marker</span> <span class="o">==</span> <span class="s2">&quot;👀&quot;</span>

    <span class="k">def</span> <span class="nf">downloadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">downloadPath</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        download the given image</span>

<span class="sd">        Args:</span>
<span class="sd">            image(image): the image to download</span>
<span class="sd">            downloadPath(str): the path to download to if None getDownloadPath will be used</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">original_filename</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">name</span>
        <span class="n">prefixes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">,</span> <span class="s2">&quot;Datei&quot;</span><span class="p">,</span> <span class="s2">&quot;Fichier&quot;</span><span class="p">,</span> <span class="s2">&quot;Archivo&quot;</span><span class="p">,</span> <span class="s2">&quot;Файл&quot;</span><span class="p">,</span> <span class="s2">&quot;文件&quot;</span><span class="p">,</span> <span class="s2">&quot;ファイル&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">prefixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">original_filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">):</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">original_filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">original_filename</span>  <span class="c1"># Fallback in case no prefix matches</span>

        <span class="k">if</span> <span class="n">downloadPath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">downloadPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDownloadPath</span><span class="p">()</span>
        <span class="n">imagePath</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">downloadPath</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ensureParentDirectoryExists</span><span class="p">(</span><span class="n">imagePath</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">imagePath</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">imageFile</span><span class="p">:</span>
            <span class="n">image</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">imageFile</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">imagePath</span><span class="p">,</span> <span class="n">filename</span>

    <span class="k">def</span> <span class="nf">uploadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imagePath</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        upload an image</span>

<span class="sd">        Args:</span>
<span class="sd">            imagePath(str): the path to the image</span>
<span class="sd">            filename(str): the filename to use</span>
<span class="sd">            description(str): the description to use</span>
<span class="sd">            ignoreExists(bool): True if it should be ignored if the image exists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">imagePath</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">imageFile</span><span class="p">:</span>
            <span class="n">warnings</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span>
                <span class="n">imageFile</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">ignoreExists</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="s2">&quot;warnings&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
                <span class="n">warnings</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;warnings&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;upload&quot;</span> <span class="ow">in</span> <span class="n">response</span> <span class="ow">and</span> <span class="s2">&quot;warnings&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;upload&quot;</span><span class="p">]:</span>
                <span class="n">warningsDict</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;upload&quot;</span><span class="p">][</span><span class="s2">&quot;warnings&quot;</span><span class="p">]</span>
                <span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">warningsDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">warnings</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">warnings</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">restore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">backupPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">listFile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stdIn</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        restore given page titles from local backup</span>
<span class="sd">        If no page titles are given the whole backup is restored.</span>

<span class="sd">        Args:</span>
<span class="sd">            pageTitles(list): a list of pageTitles to be restored to toWiki. If None -&gt; full restore of backup</span>
<span class="sd">            backupPath(str): path to backup location</span>
<span class="sd">            listFile:</span>
<span class="sd">            stdIn:</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">stdIn</span><span class="p">:</span>
            <span class="n">backupPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
            <span class="n">pageTitlesfix</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">pageTitles</span><span class="p">:</span>
                <span class="n">pageTitlesfix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.wiki&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
            <span class="n">pageTitles</span> <span class="o">=</span> <span class="n">pageTitlesfix</span>
        <span class="k">elif</span> <span class="n">listFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">listFile</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
            <span class="n">allx</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
            <span class="n">pageTitles</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">allx</span><span class="p">:</span>
                <span class="n">pageTitles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.wiki&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">backupPath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">backupPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHomePath</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;wikibackup/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">pageTitles</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">pageTitles</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">subdirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">backupPath</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">)[</span><span class="nb">len</span><span class="p">(</span><span class="n">backupPath</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>
                        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.wiki&quot;</span><span class="p">):</span>
                            <span class="n">pageTitles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">[:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="s2">&quot;.wiki&quot;</span><span class="p">)])</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
            <span class="s2">&quot;restoring </span><span class="si">%d</span><span class="s2"> pages from </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="n">backupPath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pageTitle</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="s2"> (</span><span class="si">%4.0f%%</span><span class="s2">): restore </span><span class="si">%s</span><span class="s2"> ...&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">),</span>
                    <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">wikiFilePath</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">backupPath</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">pageTitle</span><span class="si">}</span><span class="s2">.wiki&quot;</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">wikiFilePath</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">wikiFile</span><span class="p">:</span>
                    <span class="n">page_content</span> <span class="o">=</span> <span class="n">wikiFile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                    <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
                    <span class="n">page</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span>
                        <span class="n">page_content</span><span class="p">,</span>
                        <span class="sa">f</span><span class="s2">&quot;modified through wikirestore by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">fromWikiId</span><span class="p">,</span> <span class="n">toWikiId</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">login</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Constructor</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>fromWikiId(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the id of the wiki to push from (source)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>toWikiID(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the id of the wiki to push to (target)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>login(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True login to source wiki</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>verbose(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True print info messages</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>debug(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True show debugging messages</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">fromWikiId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">toWikiId</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">login</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>

<span class="sd">    Args:</span>
<span class="sd">        fromWikiId(str): the id of the wiki to push from (source)</span>
<span class="sd">        toWikiID(str): the id of the wiki to push to (target)</span>
<span class="sd">        login(bool): if True login to source wiki</span>
<span class="sd">        verbose(bool): if True print info messages</span>
<span class="sd">        debug(bool): if True show debugging messages</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="n">verbose</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">template</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span> <span class="o">=</span> <span class="n">fromWikiId</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">ofWikiId</span><span class="p">(</span><span class="n">fromWikiId</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span> <span class="o">=</span> <span class="n">toWikiId</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span> <span class="o">=</span> <span class="n">WikiClient</span><span class="o">.</span><span class="n">ofWikiId</span><span class="p">(</span><span class="n">toWikiId</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">login</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span><span class="o">.</span><span class="n">login</span><span class="p">():</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;can&#39;t login to source Wiki </span><span class="si">{</span><span class="n">fromWikiId</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">ex</span> <span class="o">=</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
            <span class="k">raise</span> <span class="p">(</span><span class="n">ex</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">login</span><span class="p">():</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;can&#39;t login to target Wiki </span><span class="si">{</span><span class="n">toWikiId</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">ex</span> <span class="o">=</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
            <span class="k">raise</span> <span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.backup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">backup</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">,</span> <span class="n">backupPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">git</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">withImages</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>backup the given page titles
Args:
    pageTitles(list): a list of page titles to be downloaded from the fromWiki
    git(bool): True if git should be used as a version control system
    withImages(bool): True if the image on a page should also be copied</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">backup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitles</span><span class="p">,</span> <span class="n">backupPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">git</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">withImages</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    backup the given page titles</span>
<span class="sd">    Args:</span>
<span class="sd">        pageTitles(list): a list of page titles to be downloaded from the fromWiki</span>
<span class="sd">        git(bool): True if git should be used as a version control system</span>
<span class="sd">        withImages(bool): True if the image on a page should also be copied</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">backupPath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">backupPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHomePath</span><span class="p">(</span><span class="s2">&quot;wikibackup/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span><span class="p">)</span>
    <span class="n">imageBackupPath</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/images&quot;</span> <span class="o">%</span> <span class="n">backupPath</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
        <span class="s2">&quot;downloading </span><span class="si">%d</span><span class="s2"> pages from </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span><span class="p">,</span> <span class="n">backupPath</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pageTitle</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="s2"> (</span><span class="si">%4.0f%%</span><span class="s2">): downloading </span><span class="si">%s</span><span class="s2"> ...&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">),</span>
                <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
            <span class="n">wikiFilePath</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">.wiki&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">backupPath</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ensureParentDirectoryExists</span><span class="p">(</span><span class="n">wikiFilePath</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">wikiFilePath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">wikiFile</span><span class="p">:</span>
                <span class="n">wikiFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">Image</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">backupImages</span><span class="p">([</span><span class="n">page</span><span class="p">],</span> <span class="n">imageBackupPath</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">withImages</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">backupImages</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">images</span><span class="p">(),</span> <span class="n">imageBackupPath</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">git</span><span class="p">:</span>
        <span class="n">gitPath</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/.git&quot;</span> <span class="o">%</span> <span class="n">backupPath</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">gitPath</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;initializing git repository ...&quot;</span><span class="p">)</span>
            <span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="n">backupPath</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">repo</span> <span class="o">=</span> <span class="n">Repo</span><span class="p">(</span><span class="n">backupPath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;committing to git repository&quot;</span><span class="p">)</span>
        <span class="n">repo</span><span class="o">.</span><span class="n">git</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">all</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="n">repo</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">commit</span><span class="p">(</span><span class="s2">&quot;auto commit by wikibackup at </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">timestamp</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.backupImages" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">backupImages</span><span class="p">(</span><span class="n">imageList</span><span class="p">,</span> <span class="n">imageBackupPath</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>backup the images in the givne imageList</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>imageList(list)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of images</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>imageBackupPath(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path to the backup directory</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">backupImages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imageList</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">imageBackupPath</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    backup the images in the givne imageList</span>

<span class="sd">    Args:</span>
<span class="sd">        imageList(list): the list of images</span>
<span class="sd">        imageBackupPath(str): the path to the backup directory</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">imageList</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">imagePath</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downloadImage</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">imageBackupPath</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handleException</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.convertToCSV" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convertToCSV</span><span class="p">(</span><span class="n">pageRecords</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s1">&#39;;&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Converts the given pageRecords into a str in csv format
ToDO: Currently does not support escaping of the separator and escaping of quotes
Args:
    pageRecords: dict of dicts containing the printouts
    separator(char):
Returns: str</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">convertToCSV</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageRecords</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s2">&quot;;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts the given pageRecords into a str in csv format</span>
<span class="sd">    ToDO: Currently does not support escaping of the separator and escaping of quotes</span>
<span class="sd">    Args:</span>
<span class="sd">        pageRecords: dict of dicts containing the printouts</span>
<span class="sd">        separator(char):</span>
<span class="sd">    Returns: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">printedHeaders</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">for</span> <span class="n">pageRecord</span> <span class="ow">in</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">printedHeaders</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">pageRecord</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">res</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">res</span><span class="si">}{</span><span class="n">key</span><span class="si">}{</span><span class="n">separator</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">res</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">res</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">printedHeaders</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">printouts</span> <span class="ow">in</span> <span class="n">pageRecord</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">res</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">res</span><span class="si">}{</span><span class="n">printouts</span><span class="si">}{</span><span class="n">separator</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">res</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="c1"># remove last separator and end line</span>
    <span class="k">return</span> <span class="n">res</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.downloadImage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">downloadImage</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">downloadPath</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>download the given image</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>image(image)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the image to download</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>downloadPath(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path to download to if None getDownloadPath will be used</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">downloadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">downloadPath</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    download the given image</span>

<span class="sd">    Args:</span>
<span class="sd">        image(image): the image to download</span>
<span class="sd">        downloadPath(str): the path to download to if None getDownloadPath will be used</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">original_filename</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">name</span>
    <span class="n">prefixes</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">,</span> <span class="s2">&quot;Datei&quot;</span><span class="p">,</span> <span class="s2">&quot;Fichier&quot;</span><span class="p">,</span> <span class="s2">&quot;Archivo&quot;</span><span class="p">,</span> <span class="s2">&quot;Файл&quot;</span><span class="p">,</span> <span class="s2">&quot;文件&quot;</span><span class="p">,</span> <span class="s2">&quot;ファイル&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">prefixes</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">original_filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">):</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">original_filename</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">original_filename</span>  <span class="c1"># Fallback in case no prefix matches</span>

    <span class="k">if</span> <span class="n">downloadPath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">downloadPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDownloadPath</span><span class="p">()</span>
    <span class="n">imagePath</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">downloadPath</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ensureParentDirectoryExists</span><span class="p">(</span><span class="n">imagePath</span><span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">imagePath</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">imageFile</span><span class="p">:</span>
        <span class="n">image</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">imageFile</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">imagePath</span><span class="p">,</span> <span class="n">filename</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.edit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">edit</span><span class="p">(</span><span class="n">page_titles</span><span class="p">,</span> <span class="n">modify</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Edit the pages with the given page titles</p>
<p>Args:
page_titles (list): a list of page titles to be transferred from the formWiki to the toWiki
modify: String modify function that takes as input the string and returns the modified string
context: The number of context lines
force (bool): True if pages should be actually edited - dry run only listing pages is default</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">edit</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">page_titles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">modify</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Edit the pages with the given page titles</span>

<span class="sd">    Args:</span>
<span class="sd">    page_titles (list): a list of page titles to be transferred from the formWiki to the toWiki</span>
<span class="sd">    modify: String modify function that takes as input the string and returns the modified string</span>
<span class="sd">    context: The number of context lines</span>
<span class="sd">    force (bool): True if pages should be actually edited - dry run only listing pages is default</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">modify</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;wikipush edit needs a modify function!&quot;</span><span class="p">)</span>

    <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">page_titles</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;editing </span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> pages in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="s1">&#39;forced&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">force</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;dry run&#39;</span><span class="si">}</span><span class="s2">)&quot;</span>
    <span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">page_title</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">page_titles</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">100</span><span class="si">:</span><span class="s2">4.0f</span><span class="si">}</span><span class="s2">%): editing </span><span class="si">{</span><span class="n">page_title</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">,</span>
                <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">edit_page_content</span><span class="p">(</span><span class="n">page_title</span><span class="p">,</span> <span class="n">modify</span><span class="p">,</span> <span class="n">force</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.edit_page_content" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">edit_page_content</span><span class="p">(</span><span class="n">page_title</span><span class="p">,</span> <span class="n">new_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">summary</span><span class="o">=</span><span class="s1">&#39;edited by wikiedit&#39;</span><span class="p">,</span> <span class="n">modify</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Edit the content of a single page.</p>
<p>Args:
page_title (str): The title of the page to be edited
new_text (str): the new text for the page
summary (str): the summary / comment for the editing
modify (Callable[[str], str]): Function to modify the page content
force (bool): If True, actually edit the page; if False, perform a dry run
context (int): The number of context lines for diff</p>
<p>Returns:
str: Status of the edit operation</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">edit_page_content</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">new_text</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">summary</span><span class="o">=</span><span class="s2">&quot;edited by wikiedit&quot;</span><span class="p">,</span>
    <span class="n">modify</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">context</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Edit the content of a single page.</span>

<span class="sd">    Args:</span>
<span class="sd">    page_title (str): The title of the page to be edited</span>
<span class="sd">    new_text (str): the new text for the page</span>
<span class="sd">    summary (str): the summary / comment for the editing</span>
<span class="sd">    modify (Callable[[str], str]): Function to modify the page content</span>
<span class="sd">    force (bool): If True, actually edit the page; if False, perform a dry run</span>
<span class="sd">    context (int): The number of context lines for diff</span>

<span class="sd">    Returns:</span>
<span class="sd">    str: Status of the edit operation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">page_to_edit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">page_to_edit</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;👎&quot;</span>

    <span class="n">text</span> <span class="o">=</span> <span class="n">page_to_edit</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">new_text</span><span class="p">:</span>
        <span class="n">new_text</span> <span class="o">=</span> <span class="n">modify</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">new_text</span> <span class="o">==</span> <span class="n">text</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;↔&quot;</span>

    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
        <span class="n">page_to_edit</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">new_text</span><span class="p">,</span> <span class="n">summary</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;✅&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">diff_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDiff</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">new_text</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">context</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;👍</span><span class="si">{</span><span class="n">diff_str</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.edit_wikison" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">edit_wikison</span><span class="p">(</span><span class="n">page_titles</span><span class="p">,</span> <span class="n">entity_type_name</span><span class="p">,</span> <span class="n">property_name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Edit the WikiSON for on the given pages
Args:
    page_titles: a list of page titles to be edited
    entity_type_name: name of the WikiSON entity type
    property_name: name of the property to edit
    value: value to set. If None property is deleted from the WikiSON
    force: If False only print the changes. Otherwise, apply the changes</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">edit_wikison</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">page_titles</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">entity_type_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">property_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Any</span><span class="p">,</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Edit the WikiSON for on the given pages</span>
<span class="sd">    Args:</span>
<span class="sd">        page_titles: a list of page titles to be edited</span>
<span class="sd">        entity_type_name: name of the WikiSON entity type</span>
<span class="sd">        property_name: name of the property to edit</span>
<span class="sd">        value: value to set. If None property is deleted from the WikiSON</span>
<span class="sd">        force: If False only print the changes. Otherwise, apply the changes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">page_titles</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;&quot;&quot;editing </span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> pages in </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="s2">&quot;forced&quot;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">force</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;dry run&quot;</span><span class="si">}</span><span class="s2">)&quot;&quot;&quot;</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">page_title</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">page_titles</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">i</span><span class="o">/</span><span class="n">total</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">%): editing </span><span class="si">{</span><span class="n">page_title</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">,</span>
                <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">page_to_be_edited</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">page_title</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">page_to_be_edited</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;👎&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">comment</span> <span class="o">=</span> <span class="s2">&quot;edited by wikiedit&quot;</span>
                <span class="n">markup</span> <span class="o">=</span> <span class="n">page_to_be_edited</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
                <span class="n">wikison</span> <span class="o">=</span> <span class="n">WikiSON</span><span class="p">(</span><span class="n">page_title</span><span class="p">,</span> <span class="n">markup</span><span class="p">)</span>
                <span class="n">new_markup</span> <span class="o">=</span> <span class="n">wikison</span><span class="o">.</span><span class="n">set</span><span class="p">(</span>
                    <span class="n">entity_type_name</span><span class="o">=</span><span class="n">entity_type_name</span><span class="p">,</span> <span class="n">record</span><span class="o">=</span><span class="p">{</span><span class="n">property_name</span><span class="p">:</span> <span class="n">value</span><span class="p">}</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">new_markup</span> <span class="o">!=</span> <span class="n">markup</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">force</span><span class="p">:</span>
                        <span class="n">page_to_be_edited</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">new_markup</span><span class="p">,</span> <span class="n">comment</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">diff_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDiff</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="n">new_markup</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;👍</span><span class="si">{</span><span class="n">diff_str</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;↔&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.ensureDirectoryExists" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ensureDirectoryExists</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>make sure the given directory exists</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>directory(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the directory to check for existence</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">ensureDirectoryExists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    make sure the given directory exists</span>

<span class="sd">    Args:</span>
<span class="sd">        directory(str): the directory to check for existence</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">Path</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.ensureParentDirectoryExists" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ensureParentDirectoryExists</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>for pages that have a "/" in the name make sure that the parent Directory exists</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>filePath(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the filePath to check</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">ensureParentDirectoryExists</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    for pages that have a &quot;/&quot; in the name make sure that the parent Directory exists</span>

<span class="sd">    Args:</span>
<span class="sd">        filePath(str): the filePath to check</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ensureDirectoryExists</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.extract_category_and_mainlabel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extract_category_and_mainlabel</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">category_labels</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Category&#39;</span><span class="p">,</span> <span class="s1">&#39;Kategorie&#39;</span><span class="p">,</span> <span class="s1">&#39;Catégorie&#39;</span><span class="p">,</span> <span class="s1">&#39;Categoría&#39;</span><span class="p">])</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Extracts the category pattern and mainlabel from a MediaWiki query, supporting multiple language labels.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>askQuery</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The query string to be processed.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>category_labels</code></td>
            <td>
                  <code><span title="typing.List">List</span>[str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of category labels in different languages
                                   (default: ['Category', 'Kategorie', 'Catégorie', 'Categoría']).</p>
              </div>
            </td>
            <td>
                  <code>[&#39;Category&#39;, &#39;Kategorie&#39;, &#39;Catégorie&#39;, &#39;Categoría&#39;]</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Tuple">Tuple</span>[str, <span title="typing.Optional">Optional</span>[str]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[Tuple[str, Optional[str]]]: A tuple containing the category pattern and</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Tuple">Tuple</span>[str, <span title="typing.Optional">Optional</span>[str]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the mainlabel if present. Returns None if the query does not match a category pattern.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">extract_category_and_mainlabel</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">askQuery</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">category_labels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;Category&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Kategorie&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Catégorie&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Categoría&quot;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the category pattern and mainlabel from a MediaWiki query, supporting multiple language labels.</span>

<span class="sd">    Args:</span>
<span class="sd">        askQuery (str): The query string to be processed.</span>
<span class="sd">        category_labels (List[str], optional): A list of category labels in different languages</span>
<span class="sd">                                               (default: [&#39;Category&#39;, &#39;Kategorie&#39;, &#39;Catégorie&#39;, &#39;Categoría&#39;]).</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[Tuple[str, Optional[str]]]: A tuple containing the category pattern and</span>
<span class="sd">        the mainlabel if present. Returns None if the query does not match a category pattern.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Join the list of category labels into a regex pattern</span>
    <span class="n">labels_pattern</span> <span class="o">=</span> <span class="s2">&quot;|&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">label</span><span class="p">)</span> <span class="k">for</span> <span class="n">label</span> <span class="ow">in</span> <span class="n">category_labels</span><span class="p">)</span>

    <span class="c1"># Regex to match category queries in specified languages and optionally a mainlabel</span>
    <span class="n">pattern</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\[\[\s*(?:</span><span class="si">{</span><span class="n">labels_pattern</span><span class="si">}</span><span class="s2">)\s*:\s*([^\]]+)\s*\]\](?:\s*\|\s*mainlabel\s*=\s*([^\|]+))?&quot;</span>
    <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">askQuery</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
        <span class="n">category</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>  <span class="c1"># Extract the category pattern</span>
        <span class="n">mainlabel</span> <span class="o">=</span> <span class="p">(</span>
            <span class="k">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">if</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>  <span class="c1"># Extract the mainlabel if present</span>
        <span class="k">return</span> <span class="n">category</span><span class="p">,</span> <span class="n">mainlabel</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.extract_template_records" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extract_template_records</span><span class="p">(</span><span class="n">pageRecords</span><span class="p">,</span> <span class="n">template</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Extract template records from the given pageRecords using batch page retrieval.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pageRecords</code></td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary with page titles as keys</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>template</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the template to extract (e.g., "Infobox officeholder")</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list[dict]: List of template records, where each record is a dictionary
       containing the template parameters. Returns None for pages
       where the template is not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="example" open>
  <summary>Example</summary>
  <blockquote>
<blockquote>
<blockquote>
<p>pageRecords = {"John Adams": {}, "Thomas Jefferson": {}}
records = extract_template_records(pageRecords, "Infobox officeholder")</p>
</blockquote>
</blockquote>
</blockquote>
</details>
            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">extract_template_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageRecords</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extract template records from the given pageRecords using batch page retrieval.</span>

<span class="sd">    Args:</span>
<span class="sd">        pageRecords (dict): Dictionary with page titles as keys</span>
<span class="sd">        template (str): Name of the template to extract (e.g., &quot;Infobox officeholder&quot;)</span>

<span class="sd">    Returns:</span>
<span class="sd">        list[dict]: List of template records, where each record is a dictionary</span>
<span class="sd">                   containing the template parameters. Returns None for pages</span>
<span class="sd">                   where the template is not found.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; pageRecords = {&quot;John Adams&quot;: {}, &quot;Thomas Jefferson&quot;: {}}</span>
<span class="sd">        &gt;&gt;&gt; records = extract_template_records(pageRecords, &quot;Infobox officeholder&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dod</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">page_titles</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">pageRecords</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="c1"># Get multiple pages at once</span>
    <span class="n">site</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span><span class="o">.</span><span class="n">get_site</span><span class="p">()</span>
    <span class="c1"># Process each page</span>
    <span class="k">for</span> <span class="n">page_title</span> <span class="ow">in</span> <span class="n">page_titles</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">page</span> <span class="o">=</span> <span class="n">site</span><span class="o">.</span><span class="n">pages</span><span class="p">[</span><span class="n">page_title</span><span class="p">]</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
            <span class="n">wiki_markup</span> <span class="o">=</span> <span class="n">WikiMarkup</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">markup</span><span class="p">)</span>
            <span class="n">records</span> <span class="o">=</span> <span class="n">wiki_markup</span><span class="o">.</span><span class="n">extract_template</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">record</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">records</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">record</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">page_title</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">page_title</span>
                    <span class="n">dod</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">record</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;❌ </span><span class="si">{</span><span class="n">page_title</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">)</span>
            <span class="k">pass</span>
    <span class="k">return</span> <span class="n">dod</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.formatQueryResult" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">formatQueryResult</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">wiki</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">outputFormat</span><span class="o">=</span><span class="s1">&#39;lod&#39;</span><span class="p">,</span> <span class="n">entityName</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>format the query result for the given askQuery.
Args:
    askQuery(string): Semantic Media Wiki in line query https://www.semantic-mediawiki.org/wiki/Help:Inline_queries
    wiki(wikibot3rd): the wiki to query - use fromWiki if not specified
    limit(int): the limit for the query (optional)
    showProgress(bool): true if progress of the query retrieval should be indicated (default: one dot per 50 records ...)
    queryDivision(int): Defines the number of subintervals the query is divided into (must be greater equal 1)
    outputFormat(str): output format of the query results - default format is lod
    entityName(str): the name of the entity
    title(str): the title of the query (if any)
Returns:
    Query results in the requested outputFormat as string.
    If the requested outputFormat is not supported None is returned.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">formatQueryResult</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">askQuery</span><span class="p">,</span>
    <span class="n">wiki</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">outputFormat</span><span class="o">=</span><span class="s2">&quot;lod&quot;</span><span class="p">,</span>
    <span class="n">entityName</span><span class="o">=</span><span class="s2">&quot;data&quot;</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    format the query result for the given askQuery.</span>
<span class="sd">    Args:</span>
<span class="sd">        askQuery(string): Semantic Media Wiki in line query https://www.semantic-mediawiki.org/wiki/Help:Inline_queries</span>
<span class="sd">        wiki(wikibot3rd): the wiki to query - use fromWiki if not specified</span>
<span class="sd">        limit(int): the limit for the query (optional)</span>
<span class="sd">        showProgress(bool): true if progress of the query retrieval should be indicated (default: one dot per 50 records ...)</span>
<span class="sd">        queryDivision(int): Defines the number of subintervals the query is divided into (must be greater equal 1)</span>
<span class="sd">        outputFormat(str): output format of the query results - default format is lod</span>
<span class="sd">        entityName(str): the name of the entity</span>
<span class="sd">        title(str): the title of the query (if any)</span>
<span class="sd">    Returns:</span>
<span class="sd">        Query results in the requested outputFormat as string.</span>
<span class="sd">        If the requested outputFormat is not supported None is returned.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pageRecords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryPages</span><span class="p">(</span>
        <span class="n">askQuery</span><span class="p">,</span> <span class="n">wiki</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">showProgress</span><span class="p">,</span> <span class="n">queryDivision</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">template</span><span class="p">:</span>
        <span class="n">pageRecords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">extract_template_records</span><span class="p">(</span>
            <span class="n">pageRecords</span><span class="p">,</span> <span class="n">template</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">template</span>
        <span class="p">)</span>
        <span class="k">pass</span>
    <span class="n">outputFormat</span> <span class="o">=</span> <span class="n">outputFormat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s2">&quot;csv&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">convertToCSV</span><span class="p">(</span><span class="n">pageRecords</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s2">&quot;json&quot;</span><span class="p">:</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
        <span class="n">res_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="n">entityName</span><span class="p">:</span> <span class="n">res</span><span class="p">},</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res_json</span>
    <span class="k">elif</span> <span class="n">outputFormat</span> <span class="o">==</span> <span class="s2">&quot;lod&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">pageRecord</span> <span class="k">for</span> <span class="n">pageRecord</span> <span class="ow">in</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">entityName</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">entityName</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
        <span class="n">qlod</span> <span class="o">=</span> <span class="p">[</span><span class="n">pageRecord</span> <span class="k">for</span> <span class="n">pageRecord</span> <span class="ow">in</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">values</span><span class="p">()]</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">query</span><span class="o">.</span><span class="n">documentQueryResult</span><span class="p">(</span>
            <span class="n">qlod</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="n">outputFormat</span><span class="p">,</span> <span class="n">withSourceCode</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">doc</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.getDiff" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getDiff</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">newText</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">forHuman</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Compare the two given strings and return the differences
Args:
    text: old text to compare the new text to
    newText: new text
    n: The number of context lines
    forHuman: If True update the diff string to be better human-readable</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>difference string</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getDiff</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">newText</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">forHuman</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compare the two given strings and return the differences</span>
<span class="sd">    Args:</span>
<span class="sd">        text: old text to compare the new text to</span>
<span class="sd">        newText: new text</span>
<span class="sd">        n: The number of context lines</span>
<span class="sd">        forHuman: If True update the diff string to be better human-readable</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: difference string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># if WikiPush.differ is None:</span>
    <span class="c1">#    WikiPush.differ=Differ()</span>
    <span class="c1"># https://docs.python.org/3/library/difflib.html</span>
    <span class="c1">#  difflib.unified_diff(a, b, fromfile=&#39;&#39;, tofile=&#39;&#39;, fromfiledate=&#39;&#39;, tofiledate=&#39;&#39;, n=3, lineterm=&#39;\n&#39;)¶</span>
    <span class="c1"># diffs=WikiPush.differ.compare(,)</span>
    <span class="n">textLines</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">newTextLines</span> <span class="o">=</span> <span class="n">newText</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">diffs</span> <span class="o">=</span> <span class="n">difflib</span><span class="o">.</span><span class="n">unified_diff</span><span class="p">(</span><span class="n">textLines</span><span class="p">,</span> <span class="n">newTextLines</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">forHuman</span><span class="p">:</span>
        <span class="n">hdiffs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">diffs</span><span class="p">:</span>
            <span class="n">unwantedItems</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;@@&quot;</span><span class="p">,</span> <span class="s2">&quot;---&quot;</span><span class="p">,</span> <span class="s2">&quot;+++&quot;</span><span class="p">]</span>
            <span class="n">keep</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">for</span> <span class="n">unwanted</span> <span class="ow">in</span> <span class="n">unwantedItems</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">unwanted</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
                    <span class="n">keep</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">keep</span><span class="p">:</span>
                <span class="n">hdiffs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">hdiffs</span> <span class="o">=</span> <span class="n">diffs</span>
    <span class="n">diffStr</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">hdiffs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">diffStr</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.getDownloadPath" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getDownloadPath</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the download path</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getDownloadPath</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the download path</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHomePath</span><span class="p">(</span><span class="s2">&quot;Downloads/mediawiki&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.getHomePath" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getHomePath</span><span class="p">(</span><span class="n">localPath</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get the given home path</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getHomePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">localPath</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the given home path</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">homePath</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">localPath</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ensureDirectoryExists</span><span class="p">(</span><span class="n">homePath</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">homePath</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.getModify" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getModify</span><span class="p">(</span><span class="n">search</span><span class="p">,</span> <span class="n">replace</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>get the modification function</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>search(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the search string</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>replace(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the replace string</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>debug(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if debug show</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Callable">Callable</span>[[str], str]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>String modify function that takes as input the string, applies the search and replace action
and returns the modified string</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getModify</span><span class="p">(</span>
    <span class="n">search</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">replace</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the modification function</span>

<span class="sd">    Args:</span>
<span class="sd">        search(str): the search string</span>
<span class="sd">        replace(str): the replace string</span>
<span class="sd">        debug(bool): if debug show</span>

<span class="sd">    Returns:</span>
<span class="sd">        String modify function that takes as input the string, applies the search and replace action</span>
<span class="sd">         and returns the modified string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;search regex: </span><span class="si">{</span><span class="n">search</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;replace regex: </span><span class="si">{</span><span class="n">replace</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">searchRegex</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">search</span>
    <span class="n">replaceRegex</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">replace</span>
    <span class="n">modify</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">text</span><span class="p">:</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">searchRegex</span><span class="p">,</span> <span class="n">replaceRegex</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">modify</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.handleAPIWarnings" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handleAPIWarnings</span><span class="p">(</span><span class="n">warnings</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>handle API Warnings</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>warnings(list)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of API warnings</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ignoreExists(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ignore messages that warn about existing content</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the exception was handled as ok False if it was logged as an error</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">handleAPIWarnings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">warnings</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    handle API Warnings</span>

<span class="sd">    Args:</span>
<span class="sd">        warnings(list): a list of API warnings</span>
<span class="sd">        ignoreExists(bool): ignore messages that warn about existing content</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the exception was handled as ok False if it was logged as an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">warnings</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">warnings</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">warnings</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">warning</span> <span class="ow">in</span> <span class="n">warnings</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">warning</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleWarning</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="n">ignoreExists</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.handleException" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handleException</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>handle the given exception and ignore it if it includes "exists" and ignoreExists is True</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>ex(Exception)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the exception to handle</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ignoreExists(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if "exists" should be ignored</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the exception was handled as ok False if it was logged as an error</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">handleException</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    handle the given exception and ignore it if it includes &quot;exists&quot; and ignoreExists is True</span>

<span class="sd">    Args:</span>
<span class="sd">        ex(Exception): the exception to handle</span>
<span class="sd">        ignoreExists(bool): True if &quot;exists&quot; should be ignored</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the exception was handled as ok False if it was logged as an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleWarning</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;❌&quot;</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="n">ignoreExists</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.handleWarning" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handleWarning</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s1">&#39;⚠️&#39;</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>handle the given warning and ignore it if it includes "exists" and ignoreExists is True</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>msg(string)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the warning to handle</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>marker(string)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the marker to use for the message</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ignoreExists(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if "exists" should be ignored</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the exception was handled as ok False if it was logged as an error</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">handleWarning</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="s2">&quot;⚠️&quot;</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    handle the given warning and ignore it if it includes &quot;exists&quot; and ignoreExists is True</span>

<span class="sd">    Args:</span>
<span class="sd">        msg(string): the warning to handle</span>
<span class="sd">        marker(string): the marker to use for the message</span>
<span class="sd">        ignoreExists(bool): True if &quot;exists&quot; should be ignored</span>

<span class="sd">    Returns:</span>
<span class="sd">        bool: True if the exception was handled as ok False if it was logged as an error</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># print (&quot;handling warning %s with ignoreExists=%r&quot; % (msg,ignoreExists))</span>
    <span class="k">if</span> <span class="n">ignoreExists</span> <span class="ow">and</span> <span class="s2">&quot;exists&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
        <span class="c1"># shorten exact duplicate message</span>
        <span class="k">if</span> <span class="s2">&quot;exact duplicate&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;exact duplicate&quot;</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="s2">&quot;👀&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">ignoreExists</span> <span class="ow">and</span> <span class="s2">&quot;exists&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;file exists (to overwrite existing files enable the ignore parameter)&quot;</span>
        <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">:</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">marker</span><span class="p">,</span> <span class="n">msg</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">marker</span> <span class="o">==</span> <span class="s2">&quot;👀&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.log" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>show the given message if verbose is on</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>msg(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the message to display</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    show the given message if verbose is on</span>

<span class="sd">    Args:</span>
<span class="sd">        msg(str): the message to display</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="n">end</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.nuke" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">nuke</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>delete the pages with the given page Titles</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pageTitles(list)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of page titles to be transfered from the formWiki to the toWiki</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>force(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if pages should be actually deleted - dry run only listing pages is default</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">nuke</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitles</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    delete the pages with the given page Titles</span>

<span class="sd">    Args:</span>
<span class="sd">        pageTitles(list): a list of page titles to be transfered from the formWiki to the toWiki</span>
<span class="sd">        force(bool): True if pages should be actually deleted - dry run only listing pages is default</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
        <span class="s2">&quot;deleting </span><span class="si">%d</span><span class="s2"> pages in </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span>
        <span class="o">%</span> <span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="p">,</span> <span class="s2">&quot;forced&quot;</span> <span class="k">if</span> <span class="n">force</span> <span class="k">else</span> <span class="s2">&quot;dry run&quot;</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pageTitle</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="s2"> (</span><span class="si">%4.0f%%</span><span class="s2">): deleting </span><span class="si">%s</span><span class="s2"> ...&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">),</span>
                <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">pageToBeDeleted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">force</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;👍&quot;</span> <span class="k">if</span> <span class="n">pageToBeDeleted</span><span class="o">.</span><span class="n">exists</span> <span class="k">else</span> <span class="s2">&quot;👎&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">pageToBeDeleted</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;deleted by wiknuke&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.push" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">push</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">withImages</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>push the given page titles</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pageTitles(list)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of page titles to be transfered from the formWiki to the toWiki</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>force(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if pages should be overwritten if they exist</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ignore(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if warning for images should be ignored (e.g if they exist)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>withImages(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the image on a page should also be copied</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns:
    list: a list of pageTitles for which the activity failed</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">push</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitles</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">withImages</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    push the given page titles</span>

<span class="sd">    Args:</span>
<span class="sd">        pageTitles(list): a list of page titles to be transfered from the formWiki to the toWiki</span>
<span class="sd">        force(bool): True if pages should be overwritten if they exist</span>
<span class="sd">        ignore(bool): True if warning for images should be ignored (e.g if they exist)</span>
<span class="sd">        withImages(bool): True if the image on a page should also be copied</span>
<span class="sd">    Returns:</span>
<span class="sd">        list: a list of pageTitles for which the activity failed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">comment</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;pushed from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span><span class="si">}</span><span class="s2"> by wikipush&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">work</span><span class="p">(</span>
        <span class="n">pageTitles</span><span class="p">,</span>
        <span class="n">activity</span><span class="o">=</span><span class="s2">&quot;copying&quot;</span><span class="p">,</span>
        <span class="n">comment</span><span class="o">=</span><span class="n">comment</span><span class="p">,</span>
        <span class="n">force</span><span class="o">=</span><span class="n">force</span><span class="p">,</span>
        <span class="n">ignore</span><span class="o">=</span><span class="n">ignore</span><span class="p">,</span>
        <span class="n">withImages</span><span class="o">=</span><span class="n">withImages</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.pushImages" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">pushImages</span><span class="p">(</span><span class="n">imageList</span><span class="p">,</span> <span class="n">delim</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>push the images in the given image List</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>imageList(list)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of images to be pushed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ignore(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True to upload despite any warnings.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">pushImages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imageList</span><span class="p">,</span> <span class="n">delim</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    push the images in the given image List</span>

<span class="sd">    Args:</span>
<span class="sd">        imageList(list): a list of images to be pushed</span>
<span class="sd">        ignore(bool): True to upload despite any warnings.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">imageList</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">copying image </span><span class="si">%s</span><span class="s2"> ...&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">delim</span><span class="p">,</span> <span class="n">image</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="n">imagePath</span><span class="p">,</span> <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">downloadImage</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">imageinfo</span><span class="p">[</span><span class="s2">&quot;comment&quot;</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">uploadImage</span><span class="p">(</span><span class="n">imagePath</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">ignore</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">handleAPIWarnings</span><span class="p">(</span><span class="n">ex</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="n">ignore</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">image</span><span class="o">.</span><span class="n">imageinfo</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handleException</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">ignore</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.query" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">query</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">wiki</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">pageField</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>query the given wiki for pages matching the given askQuery</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>askQuery(string)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Semantic Media Wiki in line query https://www.semantic-mediawiki.org/wiki/Help:Inline_queries</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>wiki(wikibot3rd)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the wiki to query - use fromWiki if not specified</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>pageField(string)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the field to select the pageTitle from</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limit(int)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the limit for the query (optional)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>showProgress(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>true if progress of the query retrieval should be indicated (default: one dot per 50 records ...)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns:
    list: a list of pageTitles matching the given askQuery</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">query</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">askQuery</span><span class="p">,</span>
    <span class="n">wiki</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">pageField</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    query the given wiki for pages matching the given askQuery</span>

<span class="sd">    Args:</span>
<span class="sd">        askQuery(string): Semantic Media Wiki in line query https://www.semantic-mediawiki.org/wiki/Help:Inline_queries</span>
<span class="sd">        wiki(wikibot3rd): the wiki to query - use fromWiki if not specified</span>
<span class="sd">        pageField(string): the field to select the pageTitle from</span>
<span class="sd">        limit(int): the limit for the query (optional)</span>
<span class="sd">        showProgress(bool): true if progress of the query retrieval should be indicated (default: one dot per 50 records ...)</span>
<span class="sd">    Returns:</span>
<span class="sd">        list: a list of pageTitles matching the given askQuery</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">pageRecords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryPages</span><span class="p">(</span>
        <span class="n">askQuery</span><span class="p">,</span> <span class="n">wiki</span><span class="p">,</span> <span class="n">limit</span><span class="p">,</span> <span class="n">showProgress</span><span class="p">,</span> <span class="n">queryDivision</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">pageField</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="c1"># use a Dict to remove duplicates</span>
    <span class="n">pagesDict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">pageRecord</span> <span class="ow">in</span> <span class="n">pageRecords</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">pageField</span> <span class="ow">in</span> <span class="n">pageRecord</span><span class="p">:</span>
            <span class="n">pagesDict</span><span class="p">[</span><span class="n">pageRecord</span><span class="p">[</span><span class="n">pageField</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">pagesDict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.queryPages" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">queryPages</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">wiki</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>query the given wiki for pagerecords matching the given askQuery</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>askQuery</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Semantic Media Wiki in line query https://www.semantic-mediawiki.org/wiki/Help:Inline_queries</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>wiki</code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" href="#wikibot3rd">wikibot3rd</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the wiki to query - use fromWiki if not specified</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>limit</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the limit for the query (optional)</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>showProgress</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>true if progress of the query retrieval should be indicated (default: one dot per 50 records ...)</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>queryDivision</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Defines the number of subintervals the query is divided into (must be greater equal 1)</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns:
    list: a list of pageRecords matching the given askQuery</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">queryPages</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">askQuery</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wiki</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queryDivision</span><span class="o">=</span><span class="mi">1</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    query the given wiki for pagerecords matching the given askQuery</span>

<span class="sd">    Args:</span>
<span class="sd">        askQuery (str): Semantic Media Wiki in line query https://www.semantic-mediawiki.org/wiki/Help:Inline_queries</span>
<span class="sd">        wiki (wikibot3rd): the wiki to query - use fromWiki if not specified</span>
<span class="sd">        limit (int): the limit for the query (optional)</span>
<span class="sd">        showProgress (bool): true if progress of the query retrieval should be indicated (default: one dot per 50 records ...)</span>
<span class="sd">        queryDivision (int): Defines the number of subintervals the query is divided into (must be greater equal 1)</span>
<span class="sd">    Returns:</span>
<span class="sd">        list: a list of pageRecords matching the given askQuery</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">wiki</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">wiki</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span>
    <span class="c1"># no wiki no pages e.g. if wikirestore is used without a -s option</span>
    <span class="k">if</span> <span class="n">wiki</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pageRecords</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">wiki</span><span class="o">.</span><span class="n">is_smw_enabled</span><span class="p">:</span>
        <span class="n">smwClient</span> <span class="o">=</span> <span class="n">SMWClient</span><span class="p">(</span>
            <span class="n">wiki</span><span class="o">.</span><span class="n">getSite</span><span class="p">(),</span>
            <span class="n">showProgress</span><span class="o">=</span><span class="n">showProgress</span><span class="p">,</span>
            <span class="n">queryDivision</span><span class="o">=</span><span class="n">queryDivision</span><span class="p">,</span>
            <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">pageRecords</span> <span class="o">=</span> <span class="n">smwClient</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">pageRecords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query_via_mw_api</span><span class="p">(</span><span class="n">askQuery</span><span class="p">,</span> <span class="n">wiki</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="n">limit</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pageRecords</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.restore" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">restore</span><span class="p">(</span><span class="n">pageTitles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">backupPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">listFile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stdIn</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>restore given page titles from local backup
If no page titles are given the whole backup is restored.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pageTitles(list)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of pageTitles to be restored to toWiki. If None -&gt; full restore of backup</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>backupPath(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>path to backup location</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>listFile</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>stdIn</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">897</span>
<span class="normal">898</span>
<span class="normal">899</span>
<span class="normal">900</span>
<span class="normal">901</span>
<span class="normal">902</span>
<span class="normal">903</span>
<span class="normal">904</span>
<span class="normal">905</span>
<span class="normal">906</span>
<span class="normal">907</span>
<span class="normal">908</span>
<span class="normal">909</span>
<span class="normal">910</span>
<span class="normal">911</span>
<span class="normal">912</span>
<span class="normal">913</span>
<span class="normal">914</span>
<span class="normal">915</span>
<span class="normal">916</span>
<span class="normal">917</span>
<span class="normal">918</span>
<span class="normal">919</span>
<span class="normal">920</span>
<span class="normal">921</span>
<span class="normal">922</span>
<span class="normal">923</span>
<span class="normal">924</span>
<span class="normal">925</span>
<span class="normal">926</span>
<span class="normal">927</span>
<span class="normal">928</span>
<span class="normal">929</span>
<span class="normal">930</span>
<span class="normal">931</span>
<span class="normal">932</span>
<span class="normal">933</span>
<span class="normal">934</span>
<span class="normal">935</span>
<span class="normal">936</span>
<span class="normal">937</span>
<span class="normal">938</span>
<span class="normal">939</span>
<span class="normal">940</span>
<span class="normal">941</span>
<span class="normal">942</span>
<span class="normal">943</span>
<span class="normal">944</span>
<span class="normal">945</span>
<span class="normal">946</span>
<span class="normal">947</span>
<span class="normal">948</span>
<span class="normal">949</span>
<span class="normal">950</span>
<span class="normal">951</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">restore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pageTitles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">backupPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">listFile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stdIn</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    restore given page titles from local backup</span>
<span class="sd">    If no page titles are given the whole backup is restored.</span>

<span class="sd">    Args:</span>
<span class="sd">        pageTitles(list): a list of pageTitles to be restored to toWiki. If None -&gt; full restore of backup</span>
<span class="sd">        backupPath(str): path to backup location</span>
<span class="sd">        listFile:</span>
<span class="sd">        stdIn:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">stdIn</span><span class="p">:</span>
        <span class="n">backupPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
        <span class="n">pageTitlesfix</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">pageTitles</span><span class="p">:</span>
            <span class="n">pageTitlesfix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.wiki&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)))</span>
        <span class="n">pageTitles</span> <span class="o">=</span> <span class="n">pageTitlesfix</span>
    <span class="k">elif</span> <span class="n">listFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">listFile</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
        <span class="n">allx</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">pageTitles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">allx</span><span class="p">:</span>
            <span class="n">pageTitles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.wiki&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">backupPath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">backupPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getHomePath</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;wikibackup/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pageTitles</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pageTitles</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">subdirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">backupPath</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
                    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">)[</span><span class="nb">len</span><span class="p">(</span><span class="n">backupPath</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]</span>
                    <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.wiki&quot;</span><span class="p">):</span>
                        <span class="n">pageTitles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">[:</span> <span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="s2">&quot;.wiki&quot;</span><span class="p">)])</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
        <span class="s2">&quot;restoring </span><span class="si">%d</span><span class="s2"> pages from </span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="n">backupPath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pageTitle</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="s2"> (</span><span class="si">%4.0f%%</span><span class="s2">): restore </span><span class="si">%s</span><span class="s2"> ...&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="n">pageTitle</span><span class="p">),</span>
                <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">wikiFilePath</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">backupPath</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">pageTitle</span><span class="si">}</span><span class="s2">.wiki&quot;</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">wikiFilePath</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">wikiFile</span><span class="p">:</span>
                <span class="n">page_content</span> <span class="o">=</span> <span class="n">wikiFile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
                <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
                <span class="n">page</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span>
                    <span class="n">page_content</span><span class="p">,</span>
                    <span class="sa">f</span><span class="s2">&quot;modified through wikirestore by </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">user</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.show_exception" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Show the given exception and, if debug mode is on, show the traceback.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">show_exception</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ex</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Show the given exception and, if debug mode is on, show the traceback.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;❌: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="c1"># Append the formatted traceback to the message</span>
        <span class="n">msg</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.upload" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">upload</span><span class="p">(</span><span class="n">files</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>push the given files
Args:
    files(list): a list of filenames to be transfered to the toWiki
    force(bool): True if images should be overwritten if they exist</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">upload</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">files</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    push the given files</span>
<span class="sd">    Args:</span>
<span class="sd">        files(list): a list of filenames to be transfered to the toWiki</span>
<span class="sd">        force(bool): True if images should be overwritten if they exist</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">files</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;uploading </span><span class="si">%d</span><span class="s2"> files to </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">total</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">file</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">files</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%d</span><span class="s2">/</span><span class="si">%d</span><span class="s2"> (</span><span class="si">%4.0f%%</span><span class="s2">): uploading </span><span class="si">%s</span><span class="s2"> ...&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span> <span class="n">file</span><span class="p">),</span>
                <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;uploaded by wikiupload&quot;</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uploadImage</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">force</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.uploadImage" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">uploadImage</span><span class="p">(</span><span class="n">imagePath</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>upload an image</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>imagePath(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path to the image</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>filename(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the filename to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>description(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the description to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ignoreExists(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if it should be ignored if the image exists</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span>
<span class="normal">877</span>
<span class="normal">878</span>
<span class="normal">879</span>
<span class="normal">880</span>
<span class="normal">881</span>
<span class="normal">882</span>
<span class="normal">883</span>
<span class="normal">884</span>
<span class="normal">885</span>
<span class="normal">886</span>
<span class="normal">887</span>
<span class="normal">888</span>
<span class="normal">889</span>
<span class="normal">890</span>
<span class="normal">891</span>
<span class="normal">892</span>
<span class="normal">893</span>
<span class="normal">894</span>
<span class="normal">895</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">uploadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imagePath</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">ignoreExists</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    upload an image</span>

<span class="sd">    Args:</span>
<span class="sd">        imagePath(str): the path to the image</span>
<span class="sd">        filename(str): the filename to use</span>
<span class="sd">        description(str): the description to use</span>
<span class="sd">        ignoreExists(bool): True if it should be ignored if the image exists</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">imagePath</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">imageFile</span><span class="p">:</span>
        <span class="n">warnings</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span>
            <span class="n">imageFile</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">ignoreExists</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;warnings&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
            <span class="n">warnings</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;warnings&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;upload&quot;</span> <span class="ow">in</span> <span class="n">response</span> <span class="ow">and</span> <span class="s2">&quot;warnings&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;upload&quot;</span><span class="p">]:</span>
            <span class="n">warningsDict</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">&quot;upload&quot;</span><span class="p">][</span><span class="s2">&quot;warnings&quot;</span><span class="p">]</span>
            <span class="n">warnings</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">warningsDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">warnings</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">warnings</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikipush.WikiPush.work" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">work</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">,</span> <span class="n">activity</span><span class="o">=</span><span class="s1">&#39;copying&#39;</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="s1">&#39;pushed&#39;</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">withImages</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>work on the given page titles</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>pageTitles(list)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of page titles to be transfered from the formWiki to the toWiki</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>activity(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the activity to perform</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>comment(str)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the comment to display</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>force(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if pages should be overwritten if they exist</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ignore(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if warning for images should be ignored (e.g if they exist)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>withImages(bool)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the image on a page should also be copied</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Returns:
    list: a list of pageTitles for which the activity failed</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">work</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">pageTitles</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
    <span class="n">activity</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;copying&quot;</span><span class="p">,</span>
    <span class="n">comment</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;pushed&quot;</span><span class="p">,</span>
    <span class="n">force</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">ignore</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">withImages</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    work on the given page titles</span>

<span class="sd">    Args:</span>
<span class="sd">        pageTitles(list): a list of page titles to be transfered from the formWiki to the toWiki</span>
<span class="sd">        activity(str): the activity to perform</span>
<span class="sd">        comment(str): the comment to display</span>
<span class="sd">        force(bool): True if pages should be overwritten if they exist</span>
<span class="sd">        ignore(bool): True if warning for images should be ignored (e.g if they exist)</span>
<span class="sd">        withImages(bool): True if the image on a page should also be copied</span>
<span class="sd">    Returns:</span>
<span class="sd">        list: a list of pageTitles for which the activity failed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">failed</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">activity</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> pages from </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fromWikiId</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">toWikiId</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pageTitle</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pageTitles</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">percent</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">total</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">percent</span><span class="si">:</span><span class="s2">4.0f</span><span class="si">}</span><span class="s2">%): </span><span class="si">{</span><span class="n">activity</span><span class="si">}</span><span class="s2"> ... </span><span class="si">{</span><span class="n">pageTitle</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">page</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">page</span><span class="o">.</span><span class="n">exists</span><span class="p">:</span>
                <span class="c1"># is this an image?</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">page</span><span class="p">,</span> <span class="n">Image</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">pushImages</span><span class="p">([</span><span class="n">page</span><span class="p">],</span> <span class="n">ignore</span><span class="o">=</span><span class="n">ignore</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">newPage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toWiki</span><span class="o">.</span><span class="n">getPage</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">newPage</span><span class="o">.</span><span class="n">exists</span> <span class="ow">or</span> <span class="n">force</span><span class="p">:</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">newPage</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">text</span><span class="p">(),</span> <span class="n">comment</span><span class="p">)</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;✅&quot;</span><span class="p">)</span>
                            <span class="n">pageOk</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                            <span class="n">pageOk</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handleException</span><span class="p">(</span><span class="n">ex</span><span class="p">,</span> <span class="n">ignore</span><span class="p">)</span>
                            <span class="k">if</span> <span class="ow">not</span> <span class="n">pageOk</span><span class="p">:</span>
                                <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">withImages</span> <span class="ow">and</span> <span class="n">pageOk</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">pushImages</span><span class="p">(</span><span class="n">page</span><span class="o">.</span><span class="n">images</span><span class="p">(),</span> <span class="n">ignore</span><span class="o">=</span><span class="n">ignore</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;👎&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;❌&quot;</span><span class="p">)</span>
                <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_exception</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
            <span class="n">failed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pageTitle</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">failed</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="wikibot3rd.wikipush.main" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;wikipush&#39;</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>main program.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikipush.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;wikipush&quot;</span><span class="p">):</span>  <span class="c1"># IGNORE:C0111</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;main program.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">argv</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">argv</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="n">program_name</span> <span class="o">=</span> <span class="n">mode</span>
    <span class="n">program_version</span> <span class="o">=</span> <span class="s2">&quot;v</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">__version__</span>
    <span class="n">program_build_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">__updated__</span><span class="p">)</span>
    <span class="n">program_version_message</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%%</span><span class="s2">(prog)s </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">program_version</span><span class="p">,</span>
        <span class="n">program_build_date</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">program_shortdesc</span> <span class="o">=</span> <span class="s2">&quot;wikipush&quot;</span>
    <span class="n">user_name</span> <span class="o">=</span> <span class="s2">&quot;Wolfgang Fahl&quot;</span>

    <span class="n">program_license</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="si">%s</span>

<span class="s2">  Created by </span><span class="si">%s</span><span class="s2"> on </span><span class="si">%s</span><span class="s2">.</span>
<span class="s2">  Copyright 2020-2024 Wolfgang Fahl. All rights reserved.</span>

<span class="s2">  Licensed under the Apache License 2.0</span>
<span class="s2">  http://www.apache.org/licenses/LICENSE-2.0</span>

<span class="s2">  Distributed on an &quot;AS IS&quot; basis without warranties</span>
<span class="s2">  or conditions of any kind, either express or implied.</span>

<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">program_shortdesc</span><span class="p">,</span>
        <span class="n">user_name</span><span class="p">,</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">__date__</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Setup argument parser</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="n">program_license</span><span class="p">,</span> <span class="n">formatter_class</span><span class="o">=</span><span class="n">RawDescriptionHelpFormatter</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-V&quot;</span><span class="p">,</span> <span class="s2">&quot;--version&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">program_version_message</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikipush&quot;</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-l&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--login&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;login&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;login to source wiki for access permission&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="s2">&quot;--source&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;source wiki id&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--force&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;force&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;force to overwrite existing pages&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-i&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--ignore&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;ignore upload warnings e.g. duplicate images&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-wi&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--withImages&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;withImages&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;copy images on the given pages&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikibackup&quot;</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-g&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--git&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;git&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;use git for version control&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-l&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--login&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;login&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;login to source wiki for access permission&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="s2">&quot;--source&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;source wiki id&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-wi&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--withImages&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;withImages&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;copy images on the given pages&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--backupPath&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;backupPath&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;path where the backup should be stored&quot;</span><span class="p">,</span>
                <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikinuke&quot;</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--force&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;force&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;force to delete pages - default is &#39;dry&#39; run only listing pages&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikiedit&quot;</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--search&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;search&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;search pattern&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--replace&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;replace pattern&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--context&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;context&quot;</span><span class="p">,</span>
                <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;number of context lines to show in dry run diff display&quot;</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--force&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;force&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;force to edit pages - default is &#39;dry&#39; run only listing pages&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--template&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;template&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Name of the template to edit&quot;</span><span class="p">,</span>
                <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--property&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;property&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Name of the property in the template to edit&quot;</span><span class="p">,</span>
                <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--value&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Value of the Property. If not set but property name is given the property is removed from the template&quot;</span><span class="p">,</span>
                <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikiquery&quot;</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-l&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--login&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;login&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;login to source wiki for access permission&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="s2">&quot;--source&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;source wiki id&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--format&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;format&quot;</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;format to use for query result csv,json,lod or any of the tablefmt options of https://pypi.org/project/tabulate/&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--entityName&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;entityName&quot;</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="s2">&quot;data&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;name of the entities that are queried - only needed for some output formats - default is &#39;data&#39;&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--template&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;name of template to extract the data from - the query needs to have a pagetitle mainlabel and retrieve pages&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikiupload&quot;</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--files&quot;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;list of files to be uploaded&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-f&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--force&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;force&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;force to (re)upload existing files - default is false&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikirestore&quot;</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--listFile&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;listFile&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;List of pages to restore&quot;</span><span class="p">,</span>
                <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--backupPath&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;backupPath&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;path the backup is stored&quot;</span><span class="p">,</span>
                <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-s&quot;</span><span class="p">,</span> <span class="s2">&quot;--source&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;source&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;source wiki id&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-l&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--login&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;login&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;login to source wiki for access permission&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-stdinp&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;stdinp&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Use the input from STD IN using pipes&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="s2">&quot;wikipush&quot;</span><span class="p">,</span>
            <span class="s2">&quot;wikiedit&quot;</span><span class="p">,</span>
            <span class="s2">&quot;wikinuke&quot;</span><span class="p">,</span>
            <span class="s2">&quot;wikibackup&quot;</span><span class="p">,</span>
            <span class="s2">&quot;wikiquery&quot;</span><span class="p">,</span>
            <span class="s2">&quot;wikirestore&quot;</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="n">QueryCmd</span><span class="o">.</span><span class="n">add_args</span><span class="p">(</span><span class="n">parser</span><span class="o">=</span><span class="n">parser</span><span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;--progress&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;showProgress&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;shows progress for query&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-pf&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--pageField&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;pageField&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;query result field which contains page&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-p&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--pages&quot;</span><span class="p">,</span>
                <span class="n">nargs</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;list of page Titles to be pushed&quot;</span><span class="p">,</span>
                <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-ui&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--withGUI&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;ui&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Pop up GUI for selection&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-qd&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--queryDivision&quot;</span><span class="p">,</span>
                <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;queryDivision&quot;</span><span class="p">,</span>
                <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;divide query into equidistant subintervals to limit the result size of the individual queries&quot;</span><span class="p">,</span>
                <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;wikiquery&quot;</span><span class="p">]:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--title&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the title for the query&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;wikibackup&quot;</span><span class="p">,</span> <span class="s2">&quot;wikiquery&quot;</span><span class="p">]:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-t&quot;</span><span class="p">,</span> <span class="s2">&quot;--target&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;target&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;target wiki id&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
        <span class="c1"># Process arguments</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s2">&quot;queryDivision&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">queryDivision</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;queryDivision argument must be greater equal 1&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikipush&quot;</span><span class="p">:</span>
            <span class="n">wikipush</span> <span class="o">=</span> <span class="n">WikiPush</span><span class="p">(</span>
                <span class="n">args</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">login</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">debug</span>
            <span class="p">)</span>
            <span class="n">queryWiki</span> <span class="o">=</span> <span class="n">wikipush</span><span class="o">.</span><span class="n">fromWiki</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikibackup&quot;</span><span class="p">:</span>
            <span class="n">wikipush</span> <span class="o">=</span> <span class="n">WikiPush</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">login</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
            <span class="n">queryWiki</span> <span class="o">=</span> <span class="n">wikipush</span><span class="o">.</span><span class="n">fromWiki</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikiquery&quot;</span><span class="p">:</span>
            <span class="n">wikipush</span> <span class="o">=</span> <span class="n">WikiPush</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">login</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
            <span class="n">queryWiki</span> <span class="o">=</span> <span class="n">wikipush</span><span class="o">.</span><span class="n">fromWiki</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikiupload&quot;</span><span class="p">:</span>
            <span class="n">wikipush</span> <span class="o">=</span> <span class="n">WikiPush</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikirestore&quot;</span><span class="p">:</span>
            <span class="n">wikipush</span> <span class="o">=</span> <span class="n">WikiPush</span><span class="p">(</span>
                <span class="n">args</span><span class="o">.</span><span class="n">source</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">login</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">login</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">debug</span>
            <span class="p">)</span>
            <span class="n">queryWiki</span> <span class="o">=</span> <span class="n">wikipush</span><span class="o">.</span><span class="n">fromWiki</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wikipush</span> <span class="o">=</span> <span class="n">WikiPush</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">target</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
            <span class="n">queryWiki</span> <span class="o">=</span> <span class="n">wikipush</span><span class="o">.</span><span class="n">toWiki</span>
        <span class="c1"># make the full args available to wikipush</span>
        <span class="n">wikipush</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikiupload&quot;</span><span class="p">:</span>
            <span class="n">wikipush</span><span class="o">.</span><span class="n">upload</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">files</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">force</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">pages</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">pages</span><span class="p">:</span>
                <span class="n">pages</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">pages</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s2">&quot;stdinp&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">stdinp</span><span class="p">:</span>
                    <span class="n">pages</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">pages</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># set the fixed language for the wikpush toolkit</span>
                <span class="c1"># SMW ask</span>
                <span class="c1"># see https://www.semantic-mediawiki.org/wiki/Help:Inline_queries</span>
                <span class="c1"># Parser function #ask</span>
                <span class="n">args</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="s2">&quot;ask&quot;</span>
                <span class="n">query_cmd</span> <span class="o">=</span> <span class="n">QueryCmd</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">,</span> <span class="n">with_default_queries</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">handled</span> <span class="o">=</span> <span class="n">query_cmd</span><span class="o">.</span><span class="n">handle_args</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">handled</span><span class="p">:</span>
                    <span class="k">return</span> <span class="mi">0</span>
                <span class="n">query</span> <span class="o">=</span> <span class="n">query_cmd</span><span class="o">.</span><span class="n">queryCode</span>
                <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikiquery&quot;</span><span class="p">:</span>
                    <span class="n">formatedQueryResults</span> <span class="o">=</span> <span class="n">wikipush</span><span class="o">.</span><span class="n">formatQueryResult</span><span class="p">(</span>
                        <span class="n">query</span><span class="p">,</span>
                        <span class="n">wiki</span><span class="o">=</span><span class="n">queryWiki</span><span class="p">,</span>
                        <span class="n">limit</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
                        <span class="n">showProgress</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">showProgress</span><span class="p">,</span>
                        <span class="n">queryDivision</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">queryDivision</span><span class="p">,</span>
                        <span class="n">outputFormat</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">format</span><span class="p">,</span>
                        <span class="n">entityName</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">entityName</span><span class="p">,</span>
                        <span class="n">title</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">formatedQueryResults</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">formatedQueryResults</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Format </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">format</span><span class="si">}</span><span class="s2"> is not supported.&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">pages</span> <span class="o">=</span> <span class="n">wikipush</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
                        <span class="n">query</span><span class="p">,</span>
                        <span class="n">wiki</span><span class="o">=</span><span class="n">queryWiki</span><span class="p">,</span>
                        <span class="n">pageField</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">pageField</span><span class="p">,</span>
                        <span class="n">limit</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
                        <span class="n">showProgress</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">showProgress</span><span class="p">,</span>
                        <span class="n">queryDivision</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">queryDivision</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="k">if</span> <span class="n">pages</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikiquery&quot;</span><span class="p">:</span>
                    <span class="c1"># we are finished</span>
                    <span class="k">return</span> <span class="mi">0</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikirestore&quot;</span><span class="p">:</span>
                    <span class="c1"># full restore</span>
                    <span class="n">wikipush</span><span class="o">.</span><span class="n">restore</span><span class="p">(</span>
                        <span class="n">pageTitles</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">backupPath</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">backupPath</span><span class="p">,</span>
                        <span class="n">listFile</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">listFile</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                        <span class="s2">&quot;no pages specified - you might want to use the -p, -q -qn or --queryFile option&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">ui</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">pages</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">pages</span> <span class="o">=</span> <span class="n">Selector</span><span class="o">.</span><span class="n">select</span><span class="p">(</span>
                        <span class="n">pages</span><span class="p">,</span>
                        <span class="n">action</span><span class="o">=</span><span class="n">mode</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;wiki&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
                        <span class="o">+</span> <span class="n">mode</span><span class="o">.</span><span class="n">lstrip</span><span class="p">(</span><span class="s2">&quot;wiki&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:],</span>
                        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;GUI program for the mode &quot;</span> <span class="o">+</span> <span class="n">mode</span><span class="p">,</span>
                        <span class="n">title</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">if</span> <span class="n">pages</span> <span class="o">==</span> <span class="s2">&quot;Q&quot;</span><span class="p">:</span>  <span class="c1"># If GUI window is closed, end the program</span>
                        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikipush&quot;</span><span class="p">:</span>
                    <span class="n">wikipush</span><span class="o">.</span><span class="n">push</span><span class="p">(</span>
                        <span class="n">pages</span><span class="p">,</span>
                        <span class="n">force</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">force</span><span class="p">,</span>
                        <span class="n">ignore</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">ignore</span><span class="p">,</span>
                        <span class="n">withImages</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">withImages</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikibackup&quot;</span><span class="p">:</span>
                    <span class="n">wikipush</span><span class="o">.</span><span class="n">backup</span><span class="p">(</span>
                        <span class="n">pages</span><span class="p">,</span>
                        <span class="n">git</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">git</span><span class="p">,</span>
                        <span class="n">withImages</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">withImages</span><span class="p">,</span>
                        <span class="n">backupPath</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">backupPath</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikinuke&quot;</span><span class="p">:</span>
                    <span class="n">wikipush</span><span class="o">.</span><span class="n">nuke</span><span class="p">(</span><span class="n">pages</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">force</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikiedit&quot;</span><span class="p">:</span>
                    <span class="c1"># two modes search&amp;replace and WikiSON property edit</span>
                    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">search</span> <span class="ow">or</span> <span class="n">args</span><span class="o">.</span><span class="n">replace</span><span class="p">:</span>
                        <span class="c1"># search&amp;replace</span>
                        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">search</span> <span class="ow">and</span> <span class="n">args</span><span class="o">.</span><span class="n">replace</span><span class="p">:</span>
                            <span class="n">modify</span> <span class="o">=</span> <span class="n">WikiPush</span><span class="o">.</span><span class="n">getModify</span><span class="p">(</span>
                                <span class="n">args</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">replace</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">debug</span>
                            <span class="p">)</span>
                            <span class="n">wikipush</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span>
                                <span class="n">pages</span><span class="p">,</span>
                                <span class="n">modify</span><span class="o">=</span><span class="n">modify</span><span class="p">,</span>
                                <span class="n">context</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
                                <span class="n">force</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">force</span><span class="p">,</span>
                            <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="s2">&quot;In wikiedit search&amp;replace mode both args &#39;--search&#39; and &#39;--replace&#39; need to be set&quot;</span>
                            <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># WikiSON property edit</span>
                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">pages</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">args</span><span class="o">.</span><span class="n">template</span> <span class="ow">and</span> <span class="n">args</span><span class="o">.</span><span class="n">property</span><span class="p">:</span>
                            <span class="n">wikipush</span><span class="o">.</span><span class="n">edit_wikison</span><span class="p">(</span>
                                <span class="n">page_titles</span><span class="o">=</span><span class="n">pages</span><span class="p">,</span>
                                <span class="n">entity_type_name</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">template</span><span class="p">,</span>
                                <span class="n">property_name</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">property</span><span class="p">,</span>
                                <span class="n">value</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                                <span class="n">force</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">force</span><span class="p">,</span>
                            <span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                                <span class="s2">&quot;In wikiedit WikiSON edit mode &#39;--pages&#39;, &#39;--template&#39; and &#39;--property&#39; need to be defined (&#39;--value&#39; is optional see &#39;--help&#39;)&quot;</span>
                            <span class="p">)</span>

                <span class="k">elif</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;wikirestore&quot;</span><span class="p">:</span>
                    <span class="n">wikipush</span><span class="o">.</span><span class="n">restore</span><span class="p">(</span>
                        <span class="n">pages</span><span class="p">,</span> <span class="n">backupPath</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">backupPath</span><span class="p">,</span> <span class="n">stdIn</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">stdinp</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;undefined wikipush mode </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">mode</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="c1">### handle keyboard interrupt ###</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">indent</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">program_name</span><span class="p">)</span> <span class="o">*</span> <span class="s2">&quot; &quot;</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">program_name</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">indent</span> <span class="o">+</span> <span class="s2">&quot;  for help use --help&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">())</span>
        <span class="k">return</span> <span class="mi">2</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikiquery" class="doc doc-heading">
            <code>wikiquery</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2024-04-18</p>
<p>@author: wf</p>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikirestore" class="doc doc-heading">
            <code>wikirestore</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2021-02-16</p>
<p>@author: wf</p>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikitext" class="doc doc-heading">
            <code>wikitext</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2023-02-24
  @author: tholzheim</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.wikitext.WikiMarkup" class="doc doc-heading">
            <code>WikiMarkup</code>


</h3>


    <div class="doc doc-contents ">


      <p>Provides methods to modify, query and update Templates in wiki markup
see https://en.wikipedia.org/wiki/Help:Wikitext</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/wikitext.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">WikiMarkup</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Provides methods to modify, query and update Templates in wiki markup</span>
<span class="sd">    see https://en.wikipedia.org/wiki/Help:Wikitext</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wiki_markup</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        Args:</span>
<span class="sd">            page_title: page title of the wiki_markup file</span>
<span class="sd">            wiki_markup: WikiPage content as string. If None tries to init the wiki_markup from source location</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">page_title</span> <span class="o">=</span> <span class="n">page_title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wiki_markup</span> <span class="o">=</span> <span class="n">wiki_markup</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_wiki_markup</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">wtp</span><span class="o">.</span><span class="n">WikiText</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">wiki_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get wiki markup. If wikimarkup was parsed the parsed markup is converted back to wiki markup</span>

<span class="sd">        Returns:</span>
<span class="sd">            str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_wiki_markup</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wiki_markup</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parsed_wiki_markup</span><span class="p">)</span>

    <span class="nd">@wiki_markup</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">wiki_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wiki_markup</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_wiki_markup</span> <span class="o">=</span> <span class="n">wiki_markup</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_wiki_markup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># update parsed wiki_markup</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_wiki_markup</span> <span class="o">=</span> <span class="n">wtp</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">wiki_markup</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">parsed_wiki_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">wtp</span><span class="o">.</span><span class="n">WikiText</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get WikiText. If not already parsed the markup is parsed</span>

<span class="sd">        Returns:</span>
<span class="sd">            wtp:WikiText</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_wiki_markup</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wiki_markup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_wiki_markup</span> <span class="o">=</span> <span class="n">wtp</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_wiki_markup</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_wiki_markup</span>

    <span class="nd">@parsed_wiki_markup</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">parsed_wiki_markup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parsed_wiki_markup</span><span class="p">:</span> <span class="n">wtp</span><span class="o">.</span><span class="n">WikiText</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_wiki_markup</span> <span class="o">=</span> <span class="n">parsed_wiki_markup</span>

    <span class="k">def</span> <span class="nf">_get_templates_by_name</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">template_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">match</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">Template</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns the templates matching the given name and if additional matches are defined the values of the template</span>
<span class="sd">        also have to match these</span>
<span class="sd">        Args:</span>
<span class="sd">            template_name: name of the template</span>
<span class="sd">            match(dict): Additional matching criteria</span>

<span class="sd">        Returns:</span>
<span class="sd">            list of templates with the given name matching the given criteria</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsed_wiki_markup</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsed_wiki_markup</span><span class="o">.</span><span class="n">templates</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># markup has no templates</span>
            <span class="k">return</span> <span class="p">[]</span>
        <span class="n">target_template_name</span> <span class="o">=</span> <span class="n">template_name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">matching_templates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">template</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parsed_wiki_markup</span><span class="o">.</span><span class="n">templates</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="n">target_template_name</span><span class="p">:</span>
                <span class="n">matches</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">match</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">template</span><span class="o">.</span><span class="n">has_arg</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
                        <span class="n">matches</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">matches</span><span class="p">:</span>
                    <span class="n">matching_templates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">matching_templates</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_get_template_arguments</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">Template</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the arguments of the given template</span>
<span class="sd">        Args:</span>
<span class="sd">            template: template to extract the arguments from</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: arguments of the template</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">template</span><span class="o">.</span><span class="n">arguments</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">arg</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">args</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">args</span>

    <span class="k">def</span> <span class="nf">add_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Adds the given data as template with the given name to this wikifile.</span>
<span class="sd">        The data is added as new template object to the wikifile.</span>
<span class="sd">        Args:</span>
<span class="sd">            template_name(str): Name of the template the data should be inserted in</span>
<span class="sd">            data(dict): Data that should be saved in form of a template</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">template_markup</span> <span class="o">=</span> <span class="s2">&quot;{{&quot;</span> <span class="o">+</span> <span class="n">template_name</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">template_markup</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;|</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">template_markup</span> <span class="o">+=</span> <span class="s2">&quot;}}&quot;</span>
        <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">template_markup</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">template</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">update_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">template_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
        <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">update_all</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">match</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the given template the values from the given dict args.</span>
<span class="sd">        If force is set to True existing values will be overwritten.</span>
<span class="sd">        Args:</span>
<span class="sd">            template_name(str): name of the template that should be updated</span>
<span class="sd">            args(dict): Dict containing the arguments that should be set. key=argument name, value=argument value</span>
<span class="sd">            overwrite(bool): If True existing values will be overwritten</span>
<span class="sd">            update_all(bool): If True all matching attributes are updated.</span>
<span class="sd">                              Otherwise, only one template is updated if matched multiple an error is raised.</span>
<span class="sd">            match(dict): matching criteria for the template.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Nothing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">matching_templates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_templates_by_name</span><span class="p">(</span><span class="n">template_name</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">match</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">matching_templates</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matching_templates</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">update_all</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s2">&quot;More than one template were matched. Either improve the matching criteria or enable update_all&quot;</span><span class="p">,</span>
                    <span class="ne">UserWarning</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">template</span> <span class="ow">in</span> <span class="n">matching_templates</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_update_arguments</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_template</span><span class="p">(</span><span class="n">template_name</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">_update_arguments</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">template</span><span class="p">:</span> <span class="n">Template</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Updates the arguments of the given template with the values of the given dict (args)</span>

<span class="sd">        Args:</span>
<span class="sd">            template: Template that should be updated</span>
<span class="sd">            args(dict): Dict containing the arguments that should be set. key=argument name, value=argument value</span>
<span class="sd">            overwrite(bool): If True existing values will be overwritten</span>

<span class="sd">        Returns:</span>
<span class="sd">            Nothing</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">postfix</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">template</span><span class="o">.</span><span class="n">has_arg</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
                <span class="c1"># update argument</span>
                <span class="k">if</span> <span class="n">overwrite</span><span class="p">:</span>
                    <span class="n">template</span><span class="o">.</span><span class="n">del_arg</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">template</span><span class="o">.</span><span class="n">set_arg</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">+</span> <span class="n">postfix</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">template</span><span class="o">.</span><span class="n">set_arg</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">+</span> <span class="n">postfix</span><span class="p">,</span> <span class="n">preserve_spacing</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">extract_template</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">template_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">match</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extracts the template data and returns it as dict</span>

<span class="sd">        Args:</span>
<span class="sd">            template_name: name of the template that should be extracted</span>
<span class="sd">            match(dict): Additional matching criteria</span>

<span class="sd">        Returns:</span>
<span class="sd">            list of dicts: records of the templates that match the given name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">match</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">templates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_templates_by_name</span><span class="p">(</span><span class="n">template_name</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">match</span><span class="p">)</span>
        <span class="n">lod</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">template</span> <span class="ow">in</span> <span class="n">templates</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">template</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_template_arguments</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">records</span><span class="p">:</span>
                <span class="n">lod</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lod</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="wikibot3rd.wikitext.WikiMarkup.parsed_wiki_markup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parsed_wiki_markup</span><span class="p">:</span> <span class="n">wtp</span><span class="o">.</span><span class="n">WikiText</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Get WikiText. If not already parsed the markup is parsed</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>wtp</code></td>            <td>
                  <code><span title="wikitextparser.WikiText">WikiText</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>WikiText</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="wikibot3rd.wikitext.WikiMarkup.wiki_markup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">wiki_markup</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
      <small class="doc doc-label doc-label-writable"><code>writable</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Get wiki markup. If wikimarkup was parsed the parsed markup is converted back to wiki markup</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>str</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikitext.WikiMarkup.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">page_title</span><span class="p">,</span> <span class="n">wiki_markup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>page_title</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>page title of the wiki_markup file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>wiki_markup</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>WikiPage content as string. If None tries to init the wiki_markup from source location</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikitext.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wiki_markup</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">    Args:</span>
<span class="sd">        page_title: page title of the wiki_markup file</span>
<span class="sd">        wiki_markup: WikiPage content as string. If None tries to init the wiki_markup from source location</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">page_title</span> <span class="o">=</span> <span class="n">page_title</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_wiki_markup</span> <span class="o">=</span> <span class="n">wiki_markup</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_parsed_wiki_markup</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">wtp</span><span class="o">.</span><span class="n">WikiText</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikitext.WikiMarkup.add_template" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_template</span><span class="p">(</span><span class="n">template_name</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Adds the given data as template with the given name to this wikifile.
The data is added as new template object to the wikifile.
Args:
    template_name(str): Name of the template the data should be inserted in
    data(dict): Data that should be saved in form of a template</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikitext.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">template_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Adds the given data as template with the given name to this wikifile.</span>
<span class="sd">    The data is added as new template object to the wikifile.</span>
<span class="sd">    Args:</span>
<span class="sd">        template_name(str): Name of the template the data should be inserted in</span>
<span class="sd">        data(dict): Data that should be saved in form of a template</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">template_markup</span> <span class="o">=</span> <span class="s2">&quot;{{&quot;</span> <span class="o">+</span> <span class="n">template_name</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">template_markup</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;|</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">template_markup</span> <span class="o">+=</span> <span class="s2">&quot;}}&quot;</span>
    <span class="n">template</span> <span class="o">=</span> <span class="n">Template</span><span class="p">(</span><span class="n">template_markup</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">template</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikitext.WikiMarkup.extract_template" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extract_template</span><span class="p">(</span><span class="n">template_name</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Extracts the template data and returns it as dict</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>template_name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the template that should be extracted</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>match(dict)</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional matching criteria</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[str, str]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of dicts: records of the templates that match the given name</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikitext.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">extract_template</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">template_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">match</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">List</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extracts the template data and returns it as dict</span>

<span class="sd">    Args:</span>
<span class="sd">        template_name: name of the template that should be extracted</span>
<span class="sd">        match(dict): Additional matching criteria</span>

<span class="sd">    Returns:</span>
<span class="sd">        list of dicts: records of the templates that match the given name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">match</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">templates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_templates_by_name</span><span class="p">(</span><span class="n">template_name</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">match</span><span class="p">)</span>
    <span class="n">lod</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">template</span> <span class="ow">in</span> <span class="n">templates</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">template</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_template_arguments</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">records</span><span class="p">:</span>
            <span class="n">lod</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">records</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lod</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikitext.WikiMarkup.update_template" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">update_template</span><span class="p">(</span><span class="n">template_name</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">update_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Updates the given template the values from the given dict args.
If force is set to True existing values will be overwritten.
Args:
    template_name(str): name of the template that should be updated
    args(dict): Dict containing the arguments that should be set. key=argument name, value=argument value
    overwrite(bool): If True existing values will be overwritten
    update_all(bool): If True all matching attributes are updated.
                      Otherwise, only one template is updated if matched multiple an error is raised.
    match(dict): matching criteria for the template.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Nothing</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikitext.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">update_template</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">template_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">overwrite</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">update_all</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">match</span><span class="p">:</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Updates the given template the values from the given dict args.</span>
<span class="sd">    If force is set to True existing values will be overwritten.</span>
<span class="sd">    Args:</span>
<span class="sd">        template_name(str): name of the template that should be updated</span>
<span class="sd">        args(dict): Dict containing the arguments that should be set. key=argument name, value=argument value</span>
<span class="sd">        overwrite(bool): If True existing values will be overwritten</span>
<span class="sd">        update_all(bool): If True all matching attributes are updated.</span>
<span class="sd">                          Otherwise, only one template is updated if matched multiple an error is raised.</span>
<span class="sd">        match(dict): matching criteria for the template.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Nothing</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">match</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">match</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">matching_templates</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_templates_by_name</span><span class="p">(</span><span class="n">template_name</span><span class="p">,</span> <span class="n">match</span><span class="o">=</span><span class="n">match</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">matching_templates</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">matching_templates</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">update_all</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;More than one template were matched. Either improve the matching criteria or enable update_all&quot;</span><span class="p">,</span>
                <span class="ne">UserWarning</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">template</span> <span class="ow">in</span> <span class="n">matching_templates</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_update_arguments</span><span class="p">(</span><span class="n">template</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_template</span><span class="p">(</span><span class="n">template_name</span><span class="p">,</span> <span class="n">args</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.wikitext.WikiSON" class="doc doc-heading">
            <code>WikiSON</code>


</h3>


    <div class="doc doc-contents ">


      <p>WikiSON Api to edit WikiSON entities</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/wikitext.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">WikiSON</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    WikiSON Api to edit WikiSON entities</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wiki_markup</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor</span>
<span class="sd">        Args:</span>
<span class="sd">            page_title: name of the wiki page</span>
<span class="sd">            wiki_markup: markup of the wiki page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span> <span class="o">=</span> <span class="n">WikiMarkup</span><span class="p">(</span><span class="n">page_title</span><span class="p">,</span> <span class="n">wiki_markup</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_type_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the WikiSON entity by the given name</span>
<span class="sd">        Args:</span>
<span class="sd">            entity_type_name: name of the WikiSON entity type e.g. Scholar, Event</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: if wiki markup contains more than one WikiSON with the same entity type name</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: record of the entity</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span><span class="o">.</span><span class="n">extract_template</span><span class="p">(</span><span class="n">entity_type_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;More than one WikiSON with the same entity type on one Page&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">record</span> <span class="o">=</span> <span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">record</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">record</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_type_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set WikiSON entity with the given type and data</span>
<span class="sd">        Args:</span>
<span class="sd">            entity_type_name: name of the WikiSON entity type e.g. Scholar, Event</span>
<span class="sd">            record: data to add to the WikiSON entity</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: wiki markup of the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span><span class="o">.</span><span class="n">update_template</span><span class="p">(</span><span class="n">entity_type_name</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">record</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span><span class="o">.</span><span class="n">wiki_markup</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikitext.WikiSON.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">page_title</span><span class="p">,</span> <span class="n">wiki_markup</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>constructor
Args:
    page_title: name of the wiki page
    wiki_markup: markup of the wiki page</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikitext.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">page_title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">wiki_markup</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor</span>
<span class="sd">    Args:</span>
<span class="sd">        page_title: name of the wiki page</span>
<span class="sd">        wiki_markup: markup of the wiki page</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span> <span class="o">=</span> <span class="n">WikiMarkup</span><span class="p">(</span><span class="n">page_title</span><span class="p">,</span> <span class="n">wiki_markup</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikitext.WikiSON.get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">entity_type_name</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Get the WikiSON entity by the given name
Args:
    entity_type_name: name of the WikiSON entity type e.g. Scholar, Event</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>Exception</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if wiki markup contains more than one WikiSON with the same entity type name</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[str, str]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>record of the entity</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikitext.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_type_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">typing</span><span class="o">.</span><span class="n">Optional</span><span class="p">[</span><span class="n">typing</span><span class="o">.</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the WikiSON entity by the given name</span>
<span class="sd">    Args:</span>
<span class="sd">        entity_type_name: name of the WikiSON entity type e.g. Scholar, Event</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: if wiki markup contains more than one WikiSON with the same entity type name</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: record of the entity</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span><span class="o">.</span><span class="n">extract_template</span><span class="p">(</span><span class="n">entity_type_name</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;More than one WikiSON with the same entity type on one Page&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">records</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">records</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">record</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">record</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikitext.WikiSON.set" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">set</span><span class="p">(</span><span class="n">entity_type_name</span><span class="p">,</span> <span class="n">record</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Set WikiSON entity with the given type and data
Args:
    entity_type_name: name of the WikiSON entity type e.g. Scholar, Event
    record: data to add to the WikiSON entity</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>wiki markup of the page</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikitext.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entity_type_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set WikiSON entity with the given type and data</span>
<span class="sd">    Args:</span>
<span class="sd">        entity_type_name: name of the WikiSON entity type e.g. Scholar, Event</span>
<span class="sd">        record: data to add to the WikiSON entity</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: wiki markup of the page</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span><span class="o">.</span><span class="n">update_template</span><span class="p">(</span><span class="n">entity_type_name</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="n">record</span><span class="p">,</span> <span class="n">overwrite</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">wiki_markup</span><span class="o">.</span><span class="n">wiki_markup</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikiupload" class="doc doc-heading">
            <code>wikiupload</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2020-11-12</p>
<p>@author: wf</p>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikiuser" class="doc doc-heading">
            <code>wikiuser</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2020-11-01</p>
<p>@author: wf</p>



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.wikiuser.WikiCredentials" class="doc doc-heading">
            <code>WikiCredentials</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


      <p>Base class for wiki credentials</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">WikiCredentials</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Base class for wiki credentials</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">password</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">cypher</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">secret</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">salt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        if a password is available immediately encrypt it</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">encrypted</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Property to check if the credentials are encrypted.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the credentials are encrypted, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">encrypted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">cypher</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">encrypted</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">needs_encrypt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">needs_encrypt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">encrypted</span>
        <span class="k">return</span> <span class="n">needs_encrypt</span>

    <span class="k">def</span> <span class="nf">encrypt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Encrypt the given password</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">crypt</span> <span class="o">=</span> <span class="n">Crypt</span><span class="o">.</span><span class="n">getRandomCrypt</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secret</span> <span class="o">=</span> <span class="n">crypt</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cypher</span> <span class="o">=</span> <span class="n">crypt</span><span class="o">.</span><span class="n">cypher</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">salt</span> <span class="o">=</span> <span class="n">crypt</span><span class="o">.</span><span class="n">salt</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">decrypt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Decrypt and return the password</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">encrypted</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Data is not encrypted&quot;</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">Crypt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cypher</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">salt</span><span class="p">)</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">decrypt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secret</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">password</span>

    <span class="k">def</span> <span class="nf">get_password</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get my decrypted password</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the decrypted password for this user</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">encrypted</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;clear text password state&quot;</span><span class="p">)</span>
        <span class="n">password</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decrypt</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">password</span>

    <span class="k">def</span> <span class="nf">getPassword</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_password</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="wikibot3rd.wikiuser.WikiCredentials.encrypted" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">encrypted</span><span class="p">:</span> <span class="nb">bool</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Property to check if the credentials are encrypted.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>bool</code></td>            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the credentials are encrypted, False otherwise.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiCredentials.__post_init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__post_init__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>if a password is available immediately encrypt it</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    if a password is available immediately encrypt it</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiCredentials.decrypt" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">decrypt</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Decrypt and return the password</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">decrypt</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decrypt and return the password</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">encrypted</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Data is not encrypted&quot;</span><span class="p">)</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">Crypt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">cypher</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">salt</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">decrypt</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">secret</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">password</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiCredentials.encrypt" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">encrypt</span><span class="p">(</span><span class="n">password</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Encrypt the given password</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">encrypt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Encrypt the given password</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">crypt</span> <span class="o">=</span> <span class="n">Crypt</span><span class="o">.</span><span class="n">getRandomCrypt</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">secret</span> <span class="o">=</span> <span class="n">crypt</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="n">password</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cypher</span> <span class="o">=</span> <span class="n">crypt</span><span class="o">.</span><span class="n">cypher</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">salt</span> <span class="o">=</span> <span class="n">crypt</span><span class="o">.</span><span class="n">salt</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiCredentials.get_password" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_password</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>get my decrypted password</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the decrypted password for this user</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_password</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get my decrypted password</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the decrypted password for this user</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">encrypted</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;clear text password state&quot;</span><span class="p">)</span>
    <span class="n">password</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decrypt</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">password</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.wikiuser.WikiUser" class="doc doc-heading">
            <code>WikiUser</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wikibot3rd.wikiuser.WikiUserData" href="#wikibot3rd.wikiuser.WikiUserData">WikiUserData</a></code></p>


      <p>WikiUser handling</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">WikiUser</span><span class="p">(</span><span class="n">WikiUserData</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    WikiUser handling</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">interactive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">filePath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">yes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">get_wiki_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the full url of this wiki</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the full url of this wiki</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">scriptPath</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">getWikiUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the full url of this wiki</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the full url of this wiki</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_wiki_url</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">getInteractiveFields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the non-credential fields from WikiUserData plus &#39;password&#39; for interactive input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get all field names from WikiCredentials to exclude</span>
        <span class="n">credentials_field_names</span> <span class="o">=</span> <span class="p">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">WikiCredentials</span><span class="p">)}</span>

        <span class="c1"># Create a list to hold the non-credential fields in the declared order</span>
        <span class="n">interactive_fields</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># Iterate over WikiUserData fields in the declared order</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">WikiUserData</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">credentials_field_names</span><span class="p">:</span>
                <span class="n">interactive_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

        <span class="c1"># Add the &#39;password&#39; field explicitly, assuming it&#39;s part of WikiCredentials</span>
        <span class="n">password_field</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
            <span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">WikiCredentials</span><span class="p">)</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;password&quot;</span>
        <span class="p">)</span>
        <span class="n">interactive_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">password_field</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">interactive_fields</span>

    <span class="k">def</span> <span class="nf">ask_password</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Ask the user for a password twice to ensure it is entered correctly.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The confirmed password entered by the user.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;Password (hidden): &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Password cannot be empty. Please enter a valid password.&quot;</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="n">confirm_password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;Confirm Password (hidden): &quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">password</span> <span class="o">==</span> <span class="n">confirm_password</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">password</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Passwords do not match. Please try again.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">interactiveSave</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">yes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">interactive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">filePath</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save me</span>

<span class="sd">        Args:</span>
<span class="sd">            yes (bool): if True save without asking</span>
<span class="sd">            interactive (bool): if True get interactive input</span>
<span class="sd">            filePath (str): the path where to save the credentials ini file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">interactive_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getInteractiveFields</span><span class="p">()</span>

        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">interactive_fields</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">interactive</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;password&quot;</span><span class="p">:</span>
                    <span class="c1"># Ensure password is provided</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
                        <span class="n">inputValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask_password</span><span class="p">()</span>  <span class="c1"># Ask for password twice</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="n">inputValue</span><span class="p">)</span>  <span class="c1"># Encrypt immediately after input</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;********&quot;</span>  <span class="c1"># Placeholder for display purposes</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">inputMsg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">): &quot;</span>
                    <span class="n">inputValue</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">inputMsg</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">inputValue</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">inputValue</span><span class="p">)</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">inputValue</span>
            <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  </span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">yes</span><span class="p">:</span>
            <span class="n">answer</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;shall i store credentials for </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="se">\n</span><span class="s2">to an ini file? yes/no y/n&quot;</span>
            <span class="p">)</span>
            <span class="n">yes</span> <span class="o">=</span> <span class="s2">&quot;y&quot;</span> <span class="ow">in</span> <span class="n">answer</span> <span class="ow">or</span> <span class="s2">&quot;yes&quot;</span> <span class="ow">in</span> <span class="n">answer</span>
        <span class="k">if</span> <span class="n">yes</span><span class="p">:</span>
            <span class="n">ini_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;wikiuser details available at </span><span class="si">{</span><span class="n">ini_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">user</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">wikiId</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getIniPath</span><span class="p">():</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the path for the ini file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;.mediawiki-japi&quot;</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">iniFilePath</span><span class="p">(</span><span class="n">wikiId</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the path for the ini file for the given wikiId</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getuser</span><span class="p">()</span>
        <span class="n">iniPath</span> <span class="o">=</span> <span class="n">WikiUser</span><span class="o">.</span><span class="n">getIniPath</span><span class="p">()</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">iniPath</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">wikiId</span><span class="si">}</span><span class="s2">.ini&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">ofWikiId</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">wikiId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WikiUser&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a wikiUser for the given wikiId</span>

<span class="sd">        Args:</span>
<span class="sd">            wikiId (str): the wikiId of the user to be created</span>
<span class="sd">            lenient (bool): if True ignore parsing errors in the ini file</span>

<span class="sd">        Returns:</span>
<span class="sd">            WikiUser: the wikiUser for this wikiId</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">path</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">iniFilePath</span><span class="p">(</span><span class="n">wikiId</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">config</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">readPropertyFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s1">&#39;the wiki with the wikiID &quot;</span><span class="si">{</span><span class="n">wikiId</span><span class="si">}</span><span class="s1">&quot; does not have a corresponding configuration file ... you might want to create one with the wikiuser command&#39;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ofDict</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iniFilePath</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        save me to a propertyFile</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the path of the property file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">iniFilePath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">iniPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getIniPath</span><span class="p">()</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">iniPath</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">iniFilePath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iniFilePath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wikiId</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">iniFilePath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">iniFile</span><span class="p">:</span>
            <span class="n">isodate</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
            <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;# Mediawiki JAPI credentials for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">wikiId</span><span class="si">}</span><span class="se">\n</span><span class="s2"># created by py-3rdparty-mediawiki WikiUser at </span><span class="si">{</span><span class="n">isodate</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">WikiUserData</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">content</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">iniFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">iniFilePath</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">readPropertyFile</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">comment_char</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Read the file passed as parameter as a properties file.</span>

<span class="sd">        https://stackoverflow.com/a/31852401/1497139</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">props</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">l</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">l</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">comment_char</span><span class="p">):</span>
                    <span class="n">key_value</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span>
                    <span class="n">key</span> <span class="o">=</span> <span class="n">key_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">key_value</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
                    <span class="n">props</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">props</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getWikiUsers</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get all WikiUsers from the ini files in the iniPath</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">wikiUsers</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">iniPath</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">getIniPath</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">iniPath</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">scandir</span><span class="p">(</span><span class="n">iniPath</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.ini&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entry</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">config</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">readPropertyFile</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
                        <span class="n">wikiUser</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ofDict</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">)</span>
                        <span class="n">wikiUsers</span><span class="p">[</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">wikiId</span><span class="p">]</span> <span class="o">=</span> <span class="n">wikiUser</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;error in </span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wikiUsers</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">ofDict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">userDict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">encrypted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encrypt</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a WikiUser from the given dictionary</span>

<span class="sd">        Args:</span>
<span class="sd">        userDict (dict): dictionary with WikiUser properties</span>
<span class="sd">        encrypted(bool): if True the password is encrypted in the dict</span>
<span class="sd">        lenient (bool): if True ignore missing fields</span>
<span class="sd">        encrypt (bool): if True encrypt the password (if not encrypted yet)</span>

<span class="sd">        Returns:</span>
<span class="sd">        WikiUser: the WikiUser created from the dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;url&quot;</span> <span class="ow">in</span> <span class="n">userDict</span> <span class="ow">and</span> <span class="n">userDict</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># fix broken escapes e.g. http\://waihekepedia.bitplan.com</span>
            <span class="n">userDict</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">userDict</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\:&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>

        <span class="c1"># is the password currently encrypted?</span>
        <span class="n">is_encrypted</span> <span class="o">=</span> <span class="n">userDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cypher&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">encrypted</span> <span class="o">!=</span> <span class="n">is_encrypted</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lenient</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Encryption state mismatch&quot;</span><span class="p">)</span>

        <span class="n">err_msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">wikiUser</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">userDict</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">err_msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">wikiUser</span> <span class="ow">and</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">is_smw</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">WikiUserData</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">userDict</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lenient</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">is_encrypted</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cypher&quot;</span><span class="p">,</span> <span class="s2">&quot;secret&quot;</span><span class="p">,</span> <span class="s2">&quot;salt&quot;</span><span class="p">]:</span>
                            <span class="n">err_msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> missing for encrypted data&quot;</span>
                        <span class="k">elif</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
                            <span class="s2">&quot;cypher&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;secret&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;salt&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;password&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;encrypted&quot;</span><span class="p">,</span>
                        <span class="p">]:</span>
                            <span class="n">err_msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> missing&quot;</span>
        <span class="k">if</span> <span class="n">err_msg</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">encrypt</span> <span class="ow">and</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">needs_encrypt</span><span class="p">:</span>
            <span class="n">wikiUser</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">wikiUser</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.ask_password" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ask_password</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Ask the user for a password twice to ensure it is entered correctly.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The confirmed password entered by the user.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">ask_password</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Ask the user for a password twice to ensure it is entered correctly.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The confirmed password entered by the user.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;Password (hidden): &quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">password</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Password cannot be empty. Please enter a valid password.&quot;</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="n">confirm_password</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">&quot;Confirm Password (hidden): &quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">password</span> <span class="o">==</span> <span class="n">confirm_password</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">password</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Passwords do not match. Please try again.&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.getIniPath" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getIniPath</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>get the path for the ini file</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getIniPath</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the path for the ini file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;.mediawiki-japi&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.getInteractiveFields" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getInteractiveFields</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>Get the non-credential fields from WikiUserData plus 'password' for interactive input.</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getInteractiveFields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the non-credential fields from WikiUserData plus &#39;password&#39; for interactive input.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Get all field names from WikiCredentials to exclude</span>
    <span class="n">credentials_field_names</span> <span class="o">=</span> <span class="p">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">WikiCredentials</span><span class="p">)}</span>

    <span class="c1"># Create a list to hold the non-credential fields in the declared order</span>
    <span class="n">interactive_fields</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Iterate over WikiUserData fields in the declared order</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">WikiUserData</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">credentials_field_names</span><span class="p">:</span>
            <span class="n">interactive_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>

    <span class="c1"># Add the &#39;password&#39; field explicitly, assuming it&#39;s part of WikiCredentials</span>
    <span class="n">password_field</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
        <span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">WikiCredentials</span><span class="p">)</span> <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;password&quot;</span>
    <span class="p">)</span>
    <span class="n">interactive_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">password_field</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">interactive_fields</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.getWikiUrl" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getWikiUrl</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>return the full url of this wiki</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the full url of this wiki</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getWikiUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    return the full url of this wiki</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the full url of this wiki</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_wiki_url</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.getWikiUsers" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getWikiUsers</span><span class="p">(</span><span class="n">lenient</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>get all WikiUsers from the ini files in the iniPath</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">getWikiUsers</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get all WikiUsers from the ini files in the iniPath</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">wikiUsers</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">iniPath</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">getIniPath</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">iniPath</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">scandir</span><span class="p">(</span><span class="n">iniPath</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">entry</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.ini&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">entry</span><span class="o">.</span><span class="n">is_file</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">config</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">readPropertyFile</span><span class="p">(</span><span class="n">entry</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
                    <span class="n">wikiUser</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ofDict</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">)</span>
                    <span class="n">wikiUsers</span><span class="p">[</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">wikiId</span><span class="p">]</span> <span class="o">=</span> <span class="n">wikiUser</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;error in </span><span class="si">{</span><span class="n">entry</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wikiUsers</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.get_wiki_url" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_wiki_url</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>return the full url of this wiki</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the full url of this wiki</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_wiki_url</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    return the full url of this wiki</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the full url of this wiki</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">scriptPath</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.iniFilePath" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">iniFilePath</span><span class="p">(</span><span class="n">wikiId</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>get the path for the ini file for the given wikiId</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">iniFilePath</span><span class="p">(</span><span class="n">wikiId</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the path for the ini file for the given wikiId</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getuser</span><span class="p">()</span>
    <span class="n">iniPath</span> <span class="o">=</span> <span class="n">WikiUser</span><span class="o">.</span><span class="n">getIniPath</span><span class="p">()</span>
    <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">iniPath</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">wikiId</span><span class="si">}</span><span class="s2">.ini&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.interactiveSave" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">interactiveSave</span><span class="p">(</span><span class="n">yes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">interactive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">filePath</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>save me</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>yes</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True save without asking</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>interactive</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True get interactive input</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>filePath</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path where to save the credentials ini file</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">interactiveSave</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">yes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">interactive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">filePath</span><span class="o">=</span><span class="kc">None</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    save me</span>

<span class="sd">    Args:</span>
<span class="sd">        yes (bool): if True save without asking</span>
<span class="sd">        interactive (bool): if True get interactive input</span>
<span class="sd">        filePath (str): the path where to save the credentials ini file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">interactive_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getInteractiveFields</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">interactive_fields</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">interactive</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;password&quot;</span><span class="p">:</span>
                <span class="c1"># Ensure password is provided</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">inputValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ask_password</span><span class="p">()</span>  <span class="c1"># Ask for password twice</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="n">inputValue</span><span class="p">)</span>  <span class="c1"># Encrypt immediately after input</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;********&quot;</span>  <span class="c1"># Placeholder for display purposes</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">inputMsg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">): &quot;</span>
                <span class="n">inputValue</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">inputMsg</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">inputValue</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">inputValue</span><span class="p">)</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">inputValue</span>
        <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  </span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">yes</span><span class="p">:</span>
        <span class="n">answer</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;shall i store credentials for </span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="se">\n</span><span class="s2">to an ini file? yes/no y/n&quot;</span>
        <span class="p">)</span>
        <span class="n">yes</span> <span class="o">=</span> <span class="s2">&quot;y&quot;</span> <span class="ow">in</span> <span class="n">answer</span> <span class="ow">or</span> <span class="s2">&quot;yes&quot;</span> <span class="ow">in</span> <span class="n">answer</span>
    <span class="k">if</span> <span class="n">yes</span><span class="p">:</span>
        <span class="n">ini_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;wikiuser details available at </span><span class="si">{</span><span class="n">ini_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.ofDict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ofDict</span><span class="p">(</span><span class="n">userDict</span><span class="p">,</span> <span class="n">encrypted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encrypt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>create a WikiUser from the given dictionary</p>
<p>Args:
userDict (dict): dictionary with WikiUser properties
encrypted(bool): if True the password is encrypted in the dict
lenient (bool): if True ignore missing fields
encrypt (bool): if True encrypt the password (if not encrypted yet)</p>
<p>Returns:
WikiUser: the WikiUser created from the dictionary</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">ofDict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">userDict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">encrypted</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">encrypt</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    create a WikiUser from the given dictionary</span>

<span class="sd">    Args:</span>
<span class="sd">    userDict (dict): dictionary with WikiUser properties</span>
<span class="sd">    encrypted(bool): if True the password is encrypted in the dict</span>
<span class="sd">    lenient (bool): if True ignore missing fields</span>
<span class="sd">    encrypt (bool): if True encrypt the password (if not encrypted yet)</span>

<span class="sd">    Returns:</span>
<span class="sd">    WikiUser: the WikiUser created from the dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;url&quot;</span> <span class="ow">in</span> <span class="n">userDict</span> <span class="ow">and</span> <span class="n">userDict</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># fix broken escapes e.g. http\://waihekepedia.bitplan.com</span>
        <span class="n">userDict</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">userDict</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\:&quot;</span><span class="p">,</span> <span class="s2">&quot;:&quot;</span><span class="p">)</span>

    <span class="c1"># is the password currently encrypted?</span>
    <span class="n">is_encrypted</span> <span class="o">=</span> <span class="n">userDict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;cypher&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">encrypted</span> <span class="o">!=</span> <span class="n">is_encrypted</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lenient</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Encryption state mismatch&quot;</span><span class="p">)</span>

    <span class="n">err_msg</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">wikiUser</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">userDict</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="n">err_msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">wikiUser</span> <span class="ow">and</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">is_smw</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">WikiUserData</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">userDict</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lenient</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">field</span><span class="o">.</span><span class="n">default</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">is_encrypted</span> <span class="ow">and</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;cypher&quot;</span><span class="p">,</span> <span class="s2">&quot;secret&quot;</span><span class="p">,</span> <span class="s2">&quot;salt&quot;</span><span class="p">]:</span>
                        <span class="n">err_msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> missing for encrypted data&quot;</span>
                    <span class="k">elif</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span>
                        <span class="s2">&quot;cypher&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;secret&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;salt&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;password&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;encrypted&quot;</span><span class="p">,</span>
                    <span class="p">]:</span>
                        <span class="n">err_msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> missing&quot;</span>
    <span class="k">if</span> <span class="n">err_msg</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">encrypt</span> <span class="ow">and</span> <span class="n">wikiUser</span><span class="o">.</span><span class="n">needs_encrypt</span><span class="p">:</span>
        <span class="n">wikiUser</span><span class="o">.</span><span class="n">encrypt</span><span class="p">(</span><span class="n">wikiUser</span><span class="o">.</span><span class="n">password</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">wikiUser</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.ofWikiId" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ofWikiId</span><span class="p">(</span><span class="n">wikiId</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>create a wikiUser for the given wikiId</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>wikiId</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the wikiId of the user to be created</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>lenient</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True ignore parsing errors in the ini file</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>WikiUser</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="wikibot3rd.wikiuser.WikiUser" href="#wikibot3rd.wikiuser.WikiUser">WikiUser</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the wikiUser for this wikiId</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">ofWikiId</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">wikiId</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;WikiUser&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    create a wikiUser for the given wikiId</span>

<span class="sd">    Args:</span>
<span class="sd">        wikiId (str): the wikiId of the user to be created</span>
<span class="sd">        lenient (bool): if True ignore parsing errors in the ini file</span>

<span class="sd">    Returns:</span>
<span class="sd">        WikiUser: the wikiUser for this wikiId</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">path</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">iniFilePath</span><span class="p">(</span><span class="n">wikiId</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">config</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">readPropertyFile</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;the wiki with the wikiID &quot;</span><span class="si">{</span><span class="n">wikiId</span><span class="si">}</span><span class="s1">&quot; does not have a corresponding configuration file ... you might want to create one with the wikiuser command&#39;</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ofDict</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.readPropertyFile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">readPropertyFile</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s1">&#39;=&#39;</span><span class="p">,</span> <span class="n">comment_char</span><span class="o">=</span><span class="s1">&#39;#&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

      <p>Read the file passed as parameter as a properties file.</p>
<p>https://stackoverflow.com/a/31852401/1497139</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">readPropertyFile</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;=&quot;</span><span class="p">,</span> <span class="n">comment_char</span><span class="o">=</span><span class="s2">&quot;#&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Read the file passed as parameter as a properties file.</span>

<span class="sd">    https://stackoverflow.com/a/31852401/1497139</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">props</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">l</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">l</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">l</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">comment_char</span><span class="p">):</span>
                <span class="n">key_value</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">sep</span><span class="p">)</span>
                <span class="n">key</span> <span class="o">=</span> <span class="n">key_value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">sep</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">key_value</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
                <span class="n">props</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">props</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="wikibot3rd.wikiuser.WikiUser.save" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">save</span><span class="p">(</span><span class="n">iniFilePath</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

      <p>save me to a propertyFile</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path of the property file</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iniFilePath</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    save me to a propertyFile</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the path of the property file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">iniFilePath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">iniPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getIniPath</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">iniPath</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">iniFilePath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iniFilePath</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">wikiId</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">iniFilePath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">iniFile</span><span class="p">:</span>
        <span class="n">isodate</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
        <span class="n">content</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;# Mediawiki JAPI credentials for </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">wikiId</span><span class="si">}</span><span class="se">\n</span><span class="s2"># created by py-3rdparty-mediawiki WikiUser at </span><span class="si">{</span><span class="n">isodate</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">WikiUserData</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">content</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">field</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">=</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">iniFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">iniFilePath</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="wikibot3rd.wikiuser.WikiUserData" class="doc doc-heading">
            <code>WikiUserData</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="wikibot3rd.wikiuser.WikiCredentials" href="#wikibot3rd.wikiuser.WikiCredentials">WikiCredentials</a></code></p>


      <p>User credentials for a specific wiki</p>

              <details class="quote">
                <summary>Source code in <code>wikibot3rd/wikiuser.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">WikiUserData</span><span class="p">(</span><span class="n">WikiCredentials</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    User credentials for a specific wiki</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">wikiId</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">scriptPath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;MediaWiki 1.39.10&quot;</span>
    <span class="n">user</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">is_smw</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">WikiCredentials</span><span class="o">.</span><span class="n">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">is_smw</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">normalized_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_smw</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">normalized_value</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;yes&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">is_smw</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">normalized_value</span> <span class="ow">in</span> <span class="p">{</span><span class="s2">&quot;no&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">}:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">is_smw</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid value for is_smw: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">is_smw</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="wikibot3rd.wikiuser_cmd" class="doc doc-heading">
            <code>wikiuser_cmd</code>


</h2>

    <div class="doc doc-contents ">

      <p>Created on 2024-09-26</p>
<p>@author: wf</p>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="wikibot3rd.wikiuser_cmd.main" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>WikiUser credential handling</p>

            <details class="quote">
              <summary>Source code in <code>wikibot3rd/wikiuser_cmd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    WikiUser credential handling</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">argv</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">argv</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="n">program_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">program_version</span> <span class="o">=</span> <span class="s2">&quot;v</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">__version__</span>
    <span class="n">program_build_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">__updated__</span><span class="p">)</span>
    <span class="n">program_version_message</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%%</span><span class="s2">(prog)s </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">program_version</span><span class="p">,</span>
        <span class="n">program_build_date</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">program_shortdesc</span> <span class="o">=</span> <span class="s2">&quot;WikiUser credential handling&quot;</span>
    <span class="n">user_name</span> <span class="o">=</span> <span class="s2">&quot;Wolfgang Fahl&quot;</span>

    <span class="n">program_license</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span><span class="si">{</span><span class="n">program_shortdesc</span><span class="si">}</span>

<span class="s2">  Created by </span><span class="si">{</span><span class="n">user_name</span><span class="si">}</span><span class="s2"> on </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">__date__</span><span class="p">)</span><span class="si">}</span><span class="s2">.</span>
<span class="s2">  Copyright 2020-2024 Wolfgang Fahl. All rights reserved.</span>

<span class="s2">  Licensed under the Apache License 2.0</span>
<span class="s2">  http://www.apache.org/licenses/LICENSE-2.0</span>

<span class="s2">  Distributed on an &quot;AS IS&quot; basis without warranties</span>
<span class="s2">  or conditions of any kind, either express or implied.</span>

<span class="s2">USAGE</span>
<span class="s2">&quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Setup argument parser</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="n">program_license</span><span class="p">,</span> <span class="n">formatter_class</span><span class="o">=</span><span class="n">RawDescriptionHelpFormatter</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-d&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--debug&quot;</span><span class="p">,</span>
            <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;count&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;set debug level [default: </span><span class="si">%(default)s</span><span class="s2">]&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-e&quot;</span><span class="p">,</span> <span class="s2">&quot;--email&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;email&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;email of the user&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;--file&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;filePath&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;ini-file path&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-i&quot;</span><span class="p">,</span> <span class="s2">&quot;--interactive&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-l&quot;</span><span class="p">,</span> <span class="s2">&quot;--url&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;url&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;url of the wiki&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-L&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--lenient&quot;</span><span class="p">,</span>
            <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;lenient&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;be lenient with missing fields&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-p&quot;</span><span class="p">,</span> <span class="s2">&quot;--password&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;password&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-s&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--scriptPath&quot;</span><span class="p">,</span>
            <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;scriptPath&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;script path default: </span><span class="si">%(default)s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-u&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--user&quot;</span><span class="p">,</span>
            <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;os user id default: </span><span class="si">%(default)s</span><span class="s2">)&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="n">getpass</span><span class="o">.</span><span class="n">getuser</span><span class="p">(),</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-v&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--wikiVersion&quot;</span><span class="p">,</span>
            <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;version&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;MediaWiki 1.39.1&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;version of the wiki default: </span><span class="si">%(default)s</span><span class="s2">)&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-V&quot;</span><span class="p">,</span> <span class="s2">&quot;--version&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">program_version_message</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-w&quot;</span><span class="p">,</span> <span class="s2">&quot;--wikiId&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;wikiId&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;wiki Id&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-y&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--yes&quot;</span><span class="p">,</span>
            <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;yes&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;immediately store without asking&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;--smw&quot;</span><span class="p">,</span> <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;is_smw&quot;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s2">&quot;true&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;is this a semantic mediawiki?&quot;</span>
        <span class="p">)</span>
        <span class="c1"># Process arguments</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
        <span class="n">argsDict</span> <span class="o">=</span> <span class="nb">vars</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="n">wikiuser</span> <span class="o">=</span> <span class="n">WikiUser</span><span class="o">.</span><span class="n">ofDict</span><span class="p">(</span>
            <span class="n">argsDict</span><span class="p">,</span> <span class="n">encrypted</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">encrypt</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="n">wikiuser</span><span class="o">.</span><span class="n">interactiveSave</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">yes</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">interactive</span><span class="p">,</span> <span class="n">args</span><span class="o">.</span><span class="n">filePath</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="c1">### handle keyboard interrupt ###</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">DEBUG</span><span class="p">:</span>
            <span class="k">raise</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">indent</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">program_name</span><span class="p">)</span> <span class="o">*</span> <span class="s2">&quot; &quot;</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">program_name</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">indent</span> <span class="o">+</span> <span class="s2">&quot;  for help use --help&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s2">&quot;debug&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">())</span>
        <span class="k">return</span> <span class="mi">2</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>